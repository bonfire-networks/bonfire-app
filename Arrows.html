<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.4">
    <meta name="project" content="Bonfire v1.0.0-social-rc.3.1">


    <title>Arrows â€” Bonfire v1.0.0-social-rc.3.1</title>

    <link rel="stylesheet" href="dist/html-elixir-RLZO5U2C.css" />

    <script defer src="dist/sidebar_items-02D4CD50.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-Y223O6DN.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://bonfirenetworks.org" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Bonfire" />
        </a>

      <div>
        <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
Bonfire
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0-social-rc.3.1
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Bonfire</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Arrows</span> 
      <small class="app-vsn" translate="no">(Bonfire v1.0.0-social-rc.3.1)</small>

    </h1>

      <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>A handful of (mostly) arrow macros with superpowers.</p><h2 id="module-installation" class="section-heading"><a href="#module-installation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Installation</span></h2><p>The package can be installed by adding <code class="inline">arrows</code> to your list of dependencies in <code class="inline">mix.exs</code>: </p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="6522029725-1">do</span><span class="w">
  </span><span class="p" data-group-id="6522029725-2">[</span><span class="w">
    </span><span class="p" data-group-id="6522029725-3">{</span><span class="ss">:arrows</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.2.0&quot;</span><span class="p" data-group-id="6522029725-3">}</span><span class="w">
  </span><span class="p" data-group-id="6522029725-2">]</span><span class="w">
</span><span class="k" data-group-id="6522029725-1">end</span></code></pre><p>Or via git:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="6237545323-1">do</span><span class="w">
  </span><span class="p" data-group-id="6237545323-2">[</span><span class="w">
    </span><span class="p" data-group-id="6237545323-3">{</span><span class="ss">:arrows</span><span class="p">,</span><span class="w"> </span><span class="ss">git</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://github.com/bonfire-networks/arrows&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">branch</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p" data-group-id="6237545323-3">}</span><span class="w">
  </span><span class="p" data-group-id="6237545323-2">]</span><span class="w">
</span><span class="k" data-group-id="6237545323-1">end</span></code></pre><h2 id="module-documentation" class="section-heading"><a href="#module-documentation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Documentation</span></h2><p>The Elixir <code class="inline">|&gt;</code> <a href="https://hexdocs.pm/elixir/Kernel.html#%7C%3E/2">(&quot;pipe&quot;) operator</a> is one of the things that seems to get people excited about elixir. Probably in part because you then don't have to keep coming up with function names. Unfortunately it's kind of limiting. The moment you need to pipe a parameter into a position that isn't the first one, it breaks down and you have to drop out of the pipeline format or write a secondary function to handle it.</p><p>Not any more! By simply inserting <code class="inline">...</code> where you would like the value to be inserted, <a href="./Arrows.html"><code class="inline">Arrows</code></a> will override where it is placed. This allows you to keep on piping while accommodating that function with the annoying argument order. <a href="./Arrows.html"><code class="inline">Arrows</code></a> was inspired by <a href="https://hexdocs.pm/magritte/Magritte.html">an existing library</a>. </p><h2 id="module-examples" class="section-heading"><a href="#module-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># Standard first position pipe</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="6144607945-1">(</span><span class="p" data-group-id="6144607945-1">)</span><span class="w">
</span><span class="s">&quot;2&quot;</span><span class="w">

</span><span class="c1"># Using ellipsis for explicit placement</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="6144607945-2">(</span><span class="n">...</span><span class="p" data-group-id="6144607945-2">)</span><span class="w">
</span><span class="s">&quot;2&quot;</span><span class="w">

</span><span class="c1"># Using ellipsis to place the piped value in a non-first position</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">3</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">pad_leading</span><span class="p" data-group-id="6144607945-3">(</span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="6144607945-3">)</span><span class="w">
</span><span class="s">&quot;002&quot;</span><span class="w">

</span><span class="c1"># Using the ellipsis multiple times</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Kernel</span><span class="o">.</span><span class="o">==</span><span class="p" data-group-id="6144607945-4">(</span><span class="n">...</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="6144607945-4">)</span><span class="w">
</span><span class="no">true</span><span class="w">

</span><span class="c1"># Nested expressions with ellipsis</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">pad_leading</span><span class="p" data-group-id="6144607945-5">(</span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="6144607945-6">(</span><span class="n">...</span><span class="p" data-group-id="6144607945-6">)</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="6144607945-5">)</span><span class="w">
</span><span class="s">&quot;002&quot;</span></code></pre><p>A few little extra features you might notice here:</p><ul><li>You can move the parameter into a subexpression, as in <code class="inline">2 |&gt; double_fst(double(...), 1)</code> where
double will be called before the parameter is passed to <code class="inline">double_fst</code>.</li><li>You can use <code class="inline">...</code> multiple times, substituting it in multiple places.</li><li>The right hand side need not even be a function call, you can use any expression with <code class="inline">...</code>.</li></ul><h3 id="module-ok-pipe" class="section-heading"><a href="#module-ok-pipe" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ok-pipe</span></h3><p><a href="./Arrows.html"><code class="inline">Arrows</code></a> also provides an <code class="inline">ok-pipe</code> operator, <code class="inline">~&gt;</code>, which only pipes into the next function if the result from the last one was considered a success. It's inspired by <a href="https://hexdocs.pm/ok/readme.html">OK</a>, but we have chosen to do things slightly differently so it better fits with our regular pipe.</p><table><tbody><tr><td style="text-align: left;">input</td><td style="text-align: left;">result</td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;">:-----------------------</td><td style="text-align: left;">:--------------</td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">{:ok, x}</code></td><td style="text-align: left;"><code class="inline">fun.(x)</code></td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">{:error, e}</code></td><td style="text-align: left;"><code class="inline">{:error, e}</code></td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">nil</code></td><td style="text-align: left;"><code class="inline">nil</code></td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">x when not is_nil(x)</code></td><td style="text-align: left;"><code class="inline">fun.(x)</code></td><td style="text-align: left;"></td></tr></tbody></table><p>In the case of a function returning an ok/error tuple being on the left hand side, this is straightforward to determine. In the event of <code class="inline">{:ok, x}</code>, x will be passed into the right hand side to call. In the event of <code class="inline">{:error, x}</code>, the result will be <code class="inline">{:error, x}</code>.</p><p>We also deal with a lot of functions that indicate failure by returning nil. <code class="inline">~&gt;</code> tries to 'do what I mean' for both of these so you can have one pipe operator to rule them all. If <code class="inline">nil</code> is a valid result, you must thus be sure to wrap it in an <code class="inline">ok</code> tuple when it occurs on the left hand side of <code class="inline">~&gt;</code>.</p><p><code class="inline">|&gt;</code> and <code class="inline">~&gt;</code> compose in the way you'd expect; i.e. a <code class="inline">~&gt;</code> receiving an error tuple or nil will stop executing the rest of the chain of (mixed) pipes.</p><p>Documentation can be found at <a href="https://hexdocs.pm/arrows">https://hexdocs.pm/arrows</a>.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#%3C~%3E/2" data-no-tooltip="" translate="no">l &lt;~&gt; r</a>

      </div>

        <div class="summary-synopsis"><p>Error-coalescing operator.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#from_ok/1" data-no-tooltip="" translate="no">from_ok(x)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts values from OK tuples.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#ok/1" data-no-tooltip="" translate="no">ok(x)</a>

      </div>

        <div class="summary-synopsis"><p>Wraps a value in an OK tuple if it's not already in a result tuple format.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#ok_or/2" data-no-tooltip="" translate="no">ok_or(x, err)</a>

      </div>

        <div class="summary-synopsis"><p>Wraps a value in an OK tuple or returns an error tuple with a default error.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_ok/1" data-no-tooltip="" translate="no">to_ok(x)</a>

      </div>

        <div class="summary-synopsis"><p>Converts various values to an OK tuple format.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#%7C%3E/2" data-no-tooltip="" translate="no">l |&gt; r</a>

      </div>

        <div class="summary-synopsis"><p>Enhanced pipe operator with support for ellipsis (<code class="inline">...</code>) placement.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#%7C%7C%7C/2" data-no-tooltip="" translate="no">l ||| r</a>

      </div>

        <div class="summary-synopsis"><p>Nil-coalescing &quot;or&quot; operator.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#~%3E/2" data-no-tooltip="" translate="no">l ~&gt; r</a>

      </div>

        <div class="summary-synopsis"><p>OK-pipe operator.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>

    <div class="functions-list">
<section class="detail" id="%3C~%3E/2">

  <div class="detail-header">
    <a href="#%3C~%3E/2" class="detail-link" data-no-tooltip="" aria-label="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">l &lt;~&gt; r</h1>

        <span class="note">(macro)</span>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L156" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Error-coalescing operator.</p><p>Similar to the nil-coalescing operator (<code class="inline">|||</code>), but applies a similar logic of the OK-pipe (<code class="inline">~&gt;</code>).</p><p>It return the right side value if the left side is:</p><ul><li><code class="inline">nil</code></li><li><code class="inline">:error</code></li><li><code class="inline">{:error, _}</code></li></ul><h2 id="%3C~%3E/2-examples" class="section-heading"><a href="#%3C~%3E/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="no">nil</span><span class="w"> </span><span class="o">&lt;~&gt;</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="s">&quot;default&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="ss">:error</span><span class="w"> </span><span class="o">&lt;~&gt;</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="s">&quot;default&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="3946166889-1">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="3946166889-1">}</span><span class="w"> </span><span class="o">&lt;~&gt;</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="s">&quot;default&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="3946166889-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="3946166889-2">}</span><span class="w"> </span><span class="o">&lt;~&gt;</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="p" data-group-id="3946166889-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="3946166889-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="o">&lt;~&gt;</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="s">&quot;value&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="no">false</span><span class="w"> </span><span class="o">&lt;~&gt;</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="no">false</span></code></pre>
  </section>
</section>
<section class="detail" id="from_ok/1">

  <div class="detail-header">
    <a href="#from_ok/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">from_ok(x)</h1>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L215" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Extracts values from OK tuples.</p><ul><li><code class="inline">{:ok, value}</code> returns <code class="inline">value</code></li><li><code class="inline">{:error, _}</code> returns <code class="inline">nil</code></li><li><code class="inline">:error</code> returns <code class="inline">nil</code></li><li>Any other value is returned unchanged</li></ul><h2 id="from_ok/1-examples" class="section-heading"><a href="#from_ok/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">from_ok</span><span class="p" data-group-id="7109577537-1">(</span><span class="p" data-group-id="7109577537-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="7109577537-2">}</span><span class="p" data-group-id="7109577537-1">)</span><span class="w">
</span><span class="mi">123</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">from_ok</span><span class="p" data-group-id="7109577537-3">(</span><span class="p" data-group-id="7109577537-4">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="7109577537-4">}</span><span class="p" data-group-id="7109577537-3">)</span><span class="w">
</span><span class="no">nil</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">from_ok</span><span class="p" data-group-id="7109577537-5">(</span><span class="ss">:error</span><span class="p" data-group-id="7109577537-5">)</span><span class="w">
</span><span class="no">nil</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">from_ok</span><span class="p" data-group-id="7109577537-6">(</span><span class="mi">123</span><span class="p" data-group-id="7109577537-6">)</span><span class="w">
</span><span class="mi">123</span></code></pre>
  </section>
</section>
<section class="detail" id="ok/1">

  <div class="detail-header">
    <a href="#ok/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">ok(x)</h1>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L245" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Wraps a value in an OK tuple if it's not already in a result tuple format.</p><ul><li><code class="inline">{:ok, value}</code>, <code class="inline">{:error, reason}</code> and <code class="inline">:error</code> are returned unchanged</li><li>Any other value <code class="inline">x</code> is converted to <code class="inline">{:ok, x}</code></li></ul><h2 id="ok/1-examples" class="section-heading"><a href="#ok/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ok</span><span class="p" data-group-id="0906845375-1">(</span><span class="p" data-group-id="0906845375-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="0906845375-2">}</span><span class="p" data-group-id="0906845375-1">)</span><span class="w">
</span><span class="p" data-group-id="0906845375-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="0906845375-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok</span><span class="p" data-group-id="0906845375-4">(</span><span class="p" data-group-id="0906845375-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="0906845375-5">}</span><span class="p" data-group-id="0906845375-4">)</span><span class="w">
</span><span class="p" data-group-id="0906845375-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="0906845375-6">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok</span><span class="p" data-group-id="0906845375-7">(</span><span class="ss">:error</span><span class="p" data-group-id="0906845375-7">)</span><span class="w">
</span><span class="ss">:error</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok</span><span class="p" data-group-id="0906845375-8">(</span><span class="mi">123</span><span class="p" data-group-id="0906845375-8">)</span><span class="w">
</span><span class="p" data-group-id="0906845375-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="0906845375-9">}</span></code></pre>
  </section>
</section>
<section class="detail" id="ok_or/2">

  <div class="detail-header">
    <a href="#ok_or/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">ok_or(x, err)</h1>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L274" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Wraps a value in an OK tuple or returns an error tuple with a default error.</p><ul><li><code class="inline">{:ok, value}</code>, <code class="inline">{:error, reason}</code> and <code class="inline">:error</code> are returned unchanged</li><li><code class="inline">nil</code> returns <code class="inline">{:error, err}</code> where <code class="inline">err</code> is the default error provided in the second argument</li><li>Any other value <code class="inline">x</code> returns <code class="inline">{:ok, x}</code></li></ul><h2 id="ok_or/2-examples" class="section-heading"><a href="#ok_or/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ok_or</span><span class="p" data-group-id="9433480658-1">(</span><span class="p" data-group-id="9433480658-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="9433480658-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:default_error</span><span class="p" data-group-id="9433480658-1">)</span><span class="w">
</span><span class="p" data-group-id="9433480658-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="9433480658-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok_or</span><span class="p" data-group-id="9433480658-4">(</span><span class="p" data-group-id="9433480658-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="9433480658-5">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:default_error</span><span class="p" data-group-id="9433480658-4">)</span><span class="w">
</span><span class="p" data-group-id="9433480658-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="9433480658-6">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok_or</span><span class="p" data-group-id="9433480658-7">(</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:default_error</span><span class="p" data-group-id="9433480658-7">)</span><span class="w">
</span><span class="ss">:error</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok_or</span><span class="p" data-group-id="9433480658-8">(</span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">:default_error</span><span class="p" data-group-id="9433480658-8">)</span><span class="w">
</span><span class="p" data-group-id="9433480658-9">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:default_error</span><span class="p" data-group-id="9433480658-9">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ok_or</span><span class="p" data-group-id="9433480658-10">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="ss">:default_error</span><span class="p" data-group-id="9433480658-10">)</span><span class="w">
</span><span class="p" data-group-id="9433480658-11">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="9433480658-11">}</span></code></pre>
  </section>
</section>
<section class="detail" id="to_ok/1">

  <div class="detail-header">
    <a href="#to_ok/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">to_ok(x)</h1>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L183" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Converts various values to an OK tuple format.</p><ul><li><code class="inline">{:ok, value}</code> and <code class="inline">{:error, reason}</code> are returned unchanged</li><li><code class="inline">:error</code> is returned unchanged</li><li><code class="inline">nil</code> is converted to <code class="inline">:error</code></li><li>Any other value <code class="inline">x</code> is converted to <code class="inline">{:ok, x}</code></li></ul><h2 id="to_ok/1-examples" class="section-heading"><a href="#to_ok/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">to_ok</span><span class="p" data-group-id="3631682255-1">(</span><span class="p" data-group-id="3631682255-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="3631682255-2">}</span><span class="p" data-group-id="3631682255-1">)</span><span class="w">
</span><span class="p" data-group-id="3631682255-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="3631682255-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_ok</span><span class="p" data-group-id="3631682255-4">(</span><span class="p" data-group-id="3631682255-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="3631682255-5">}</span><span class="p" data-group-id="3631682255-4">)</span><span class="w">
</span><span class="p" data-group-id="3631682255-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="3631682255-6">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_ok</span><span class="p" data-group-id="3631682255-7">(</span><span class="ss">:error</span><span class="p" data-group-id="3631682255-7">)</span><span class="w">
</span><span class="ss">:error</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_ok</span><span class="p" data-group-id="3631682255-8">(</span><span class="no">nil</span><span class="p" data-group-id="3631682255-8">)</span><span class="w">
</span><span class="ss">:error</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_ok</span><span class="p" data-group-id="3631682255-9">(</span><span class="mi">123</span><span class="p" data-group-id="3631682255-9">)</span><span class="w">
</span><span class="p" data-group-id="3631682255-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="3631682255-10">}</span></code></pre>
  </section>
</section>
<section class="detail" id="%7C%3E/2">

  <div class="detail-header">
    <a href="#%7C%3E/2" class="detail-link" data-no-tooltip="" aria-label="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">l |&gt; r</h1>

        <span class="note">(macro)</span>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L62" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Enhanced pipe operator with support for ellipsis (<code class="inline">...</code>) placement.</p><p>This is a more flexible drop-in replacement for the standard Elixir pipe operator (<code class="inline">|&gt;</code>).</p><h2 id="%7C%3E/2-special-features" class="section-heading"><a href="#%7C%3E/2-special-features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Special Features</span></h2><ul><li>The ellipsis (<code class="inline">...</code>) will be replaced with the result of evaluating the left-hand side expression.</li><li>The right-hand side need not be a function; it can be any expression containing the ellipsis (<code class="inline">...</code>).</li><li>You may use the ellipsis multiple times, and the left-hand side will be calculated exactly once.</li><li>If no ellipsis is present, it behaves like the standard pipe operator (placing the value as the first argument).</li></ul><h2 id="%7C%3E/2-examples" class="section-heading"><a href="#%7C%3E/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># Standard first position pipe</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="3424521376-1">(</span><span class="p" data-group-id="3424521376-1">)</span><span class="w">
</span><span class="s">&quot;2&quot;</span><span class="w">

</span><span class="c1"># Using ellipsis for explicit placement</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="3424521376-2">(</span><span class="n">...</span><span class="p" data-group-id="3424521376-2">)</span><span class="w">
</span><span class="s">&quot;2&quot;</span><span class="w">

</span><span class="c1"># Using ellipsis to place the piped value in a non-first position</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">3</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">pad_leading</span><span class="p" data-group-id="3424521376-3">(</span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="3424521376-3">)</span><span class="w">
</span><span class="s">&quot;002&quot;</span><span class="w">

</span><span class="c1"># Using the ellipsis multiple times</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Kernel</span><span class="o">.</span><span class="o">==</span><span class="p" data-group-id="3424521376-4">(</span><span class="n">...</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="3424521376-4">)</span><span class="w">
</span><span class="no">true</span><span class="w">

</span><span class="c1"># Nested expressions with ellipsis</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">pad_leading</span><span class="p" data-group-id="3424521376-5">(</span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="3424521376-6">(</span><span class="n">...</span><span class="p" data-group-id="3424521376-6">)</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="3424521376-5">)</span><span class="w">
</span><span class="s">&quot;002&quot;</span><span class="w">

</span><span class="c1"># With expressions and transformations</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="p" data-group-id="3424521376-7">(</span><span class="n">...</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3424521376-7">)</span><span class="w">
</span><span class="mi">6</span></code></pre>
  </section>
</section>
<section class="detail" id="%7C%7C%7C/2">

  <div class="detail-header">
    <a href="#%7C%7C%7C/2" class="detail-link" data-no-tooltip="" aria-label="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">l ||| r</h1>

        <span class="note">(macro)</span>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L124" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Nil-coalescing &quot;or&quot; operator.</p><p>Works like the logical OR (<code class="inline">||</code>), except it only defaults to the right side if the left side is <code class="inline">nil</code> (whereas <code class="inline">||</code> also defaults on <code class="inline">false</code> and other falsy values).</p><h2 id="%7C%7C%7C/2-examples" class="section-heading"><a href="#%7C%7C%7C/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="no">nil</span><span class="w"> </span><span class="o">|||</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="s">&quot;default&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="no">false</span><span class="w"> </span><span class="o">|||</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="no">false</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="mi">0</span><span class="w"> </span><span class="o">|||</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="mi">0</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">|||</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w">
</span><span class="s">&quot;&quot;</span></code></pre>
  </section>
</section>
<section class="detail" id="~%3E/2">

  <div class="detail-header">
    <a href="#~%3E/2" class="detail-link" data-no-tooltip="" aria-label="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">l ~&gt; r</h1>

        <span class="note">(macro)</span>


        <a href="https://github.com/bonfire-networks/arrows/blob/main/lib/arrows.ex#L103" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>OK-pipe operator.</p><p>Similar to the enhanced pipe (<code class="inline">|&gt;</code>), but with additional error handling for the following patterns:</p><ul><li><code class="inline">{:ok, value}</code> - Extracts <code class="inline">value</code> and passes it to the right side</li><li><code class="inline">{:error, _}</code> - Passes through unchanged (short-circuits the pipeline)</li><li><code class="inline">:error</code> - Passes through unchanged (short-circuits the pipeline)</li><li><code class="inline">nil</code> - Passes through unchanged (short-circuits the pipeline)</li><li>Any other value - Passes the value directly to the right side</li></ul><h2 id="~%3E/2-examples" class="section-heading"><a href="#~%3E/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="8613030887-1">(</span><span class="p" data-group-id="8613030887-1">)</span><span class="w">
</span><span class="s">&quot;2&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8613030887-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8613030887-2">}</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="8613030887-3">(</span><span class="p" data-group-id="8613030887-3">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">pad_leading</span><span class="p" data-group-id="8613030887-4">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="8613030887-4">)</span><span class="w">
</span><span class="s">&quot;002&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8613030887-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="8613030887-5">}</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="8613030887-6">(</span><span class="p" data-group-id="8613030887-6">)</span><span class="w">
</span><span class="p" data-group-id="8613030887-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:reason</span><span class="p" data-group-id="8613030887-7">}</span><span class="w">

</span><span class="c1"># Note that this would pass :error to `String.pad_leading` breaking our pipe: </span><span class="w">
</span><span class="c1"># :error ~&gt; Integer.to_string() |&gt; String.pad_leading(2, &quot;0&quot;)</span><span class="w">
</span><span class="ss">:error</span><span class="w">
</span><span class="c1"># Instead we want to do:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="ss">:error</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="8613030887-8">(</span><span class="p" data-group-id="8613030887-8">)</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">pad_leading</span><span class="p" data-group-id="8613030887-9">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="8613030887-9">)</span><span class="w">
</span><span class="ss">:error</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="no">nil</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="8613030887-10">(</span><span class="p" data-group-id="8613030887-10">)</span><span class="w">
</span><span class="no">nil</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="p" data-group-id="8613030887-11">(</span><span class="n">...</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8613030887-11">)</span><span class="w">
</span><span class="mi">4</span><span class="w">

</span><span class="c1"># With a non-standard position using ellipsis</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="mi">2</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="nc">Kernel</span><span class="o">.</span><span class="o">/</span><span class="p" data-group-id="8613030887-12">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="8613030887-12">)</span><span class="w">
</span><span class="mf">1.5</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Bonfire.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.4) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
