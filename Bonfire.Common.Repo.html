<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Bonfire v1.0.0-social-rc.1.29">


    <title>Bonfire.Common.Repo â€” Bonfire v1.0.0-social-rc.1.29</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-D280602A.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://bonfirenetworks.org" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Bonfire" />
        </a>

      <div>
        <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
Bonfire
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0-social-rc.1.29
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Bonfire</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Bonfire.Common.Repo</span> 
      <small class="app-vsn" translate="no">(Bonfire v1.0.0-social-rc.1.29)</small>

    </h1>

      <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Main Ecto Repo.</p><p>Note: functions are defined in <a href="./Bonfire.Common.RepoTemplate.html"><code class="inline">Bonfire.Common.RepoTemplate</code></a></p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#aggregate/3" data-no-tooltip="" translate="no">aggregate(queryable, aggregate, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.aggregate/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#aggregate/4" data-no-tooltip="" translate="no">aggregate(queryable, aggregate, field, opts)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.aggregate/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#all/2" data-no-tooltip="" translate="no">all(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.all/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#all_by/3" data-no-tooltip="" translate="no">all_by(queryable, clauses, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.all_by/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#checked_out?/0" data-no-tooltip="" translate="no">checked_out?()</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.checked_out?/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#checkout/2" data-no-tooltip="" translate="no">checkout(fun, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.checkout/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#child_spec/1" data-no-tooltip="" translate="no">child_spec(opts)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#config/0" data-no-tooltip="" translate="no">config()</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.config/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#custom_preload_fun/1" data-no-tooltip="" translate="no">custom_preload_fun(fun)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#default_options/1" data-no-tooltip="" translate="no">default_options(operation)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.default_options/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#default_repo_opts/0" data-no-tooltip="" translate="no">default_repo_opts()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#delete/2" data-no-tooltip="" translate="no">delete(struct, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.delete/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#delete!/2" data-no-tooltip="" translate="no">delete!(struct, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.delete!/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#delete_all/2" data-no-tooltip="" translate="no">delete_all(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.delete_all/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#delete_many/2" data-no-tooltip="" translate="no">delete_many(queryable, opts \\ [])</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#disconnect_all/2" data-no-tooltip="" translate="no">disconnect_all(interval, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Forces all connections in the repo pool to disconnect within the given interval.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#exists?/2" data-no-tooltip="" translate="no">exists?(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.exists?/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#explain/3" data-no-tooltip="" translate="no">explain(operation, queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Executes an EXPLAIN statement or similar for the given query according to its kind and the
adapter in the given repository.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fetch/2" data-no-tooltip="" translate="no">fetch(queryable, id)</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for one result where the primary key matches the given id, and return either an {:ok, result} tuple or a {:error, :not_found}.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fetch_all/2" data-no-tooltip="" translate="no">fetch_all(queryable, id_or_ids)</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for multiple results given one or multiple IDs.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fetch_by/2" data-no-tooltip="" translate="no">fetch_by(queryable, term)</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for one result (using a keyword list to specify the key/value to query with), and return either an {:ok, result} tuple or a {:error, :not_found}.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find/3" data-no-tooltip="" translate="no">find(q, changeset, field \\ :form)</a>

      </div>

        <div class="summary-synopsis"><p>Like <a><code class="inline">single/1</code></a>, except on failure, adds an error to the changeset.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/3" data-no-tooltip="" translate="no">get(queryable, id, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.get/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get!/3" data-no-tooltip="" translate="no">get!(queryable, id, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.get!/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_by/3" data-no-tooltip="" translate="no">get_by(queryable, clauses, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.get_by/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_by!/3" data-no-tooltip="" translate="no">get_by!(queryable, clauses, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.get_by!/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_dynamic_repo/0" data-no-tooltip="" translate="no">get_dynamic_repo()</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.get_dynamic_repo/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#in_transaction?/0" data-no-tooltip="" translate="no">in_transaction?()</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.in_transaction?/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert/2" data-no-tooltip="" translate="no">insert(struct, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.insert/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert!/2" data-no-tooltip="" translate="no">insert!(struct, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.insert!/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert_all/3" data-no-tooltip="" translate="no">insert_all(schema_or_source, entries, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.insert_all/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert_all_or_ignore/2" data-no-tooltip="" translate="no">insert_all_or_ignore(schema, data)</a>

      </div>

        <div class="summary-synopsis"><p>Insert all or ignore a list of maps into a schema.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert_or_ignore/1" data-no-tooltip="" translate="no">insert_or_ignore(cs_or_struct)</a>

      </div>

        <div class="summary-synopsis"><p>Insert or ignore a changeset or struct into a schema.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert_or_ignore/2" data-no-tooltip="" translate="no">insert_or_ignore(schema, object)</a>

      </div>

        <div class="summary-synopsis"><p>Insert or ignore a map (or iterate over a list of maps) into a schema.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert_or_update/2" data-no-tooltip="" translate="no">insert_or_update(changeset, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.insert_or_update/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#insert_or_update!/2" data-no-tooltip="" translate="no">insert_or_update!(changeset, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.insert_or_update!/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#load/2" data-no-tooltip="" translate="no">load(schema_or_types, data)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.load/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#make_subquery/1" data-no-tooltip="" translate="no">make_subquery(query)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#many/2" data-no-tooltip="" translate="no">many(query, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for multiple results and return the results.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#many_paginated/3" data-no-tooltip="" translate="no">many_paginated(queryable, opts \\ [], repo_opts \\ default_repo_opts())</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for multiple results and return one page of results.
This uses the main implementation for pagination, which is cursor-based and powered by the <a><code class="inline">Paginator</code></a> library.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#maybe_one/2" data-no-tooltip="" translate="no">maybe_one(q, fallback \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for one result and return either a result or a fallback value (<code class="inline">nil</code> by default).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#maybe_preload/3" data-no-tooltip="" translate="no">maybe_preload(obj, preloads, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>See <a><code class="inline">Bonfire.Common.Repo.Preload.maybe_preload/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#maybe_where_ilike/5" data-no-tooltip="" translate="no">maybe_where_ilike(query, field, user_query, system_prefix \\ &quot;&quot;, system_suffix \\ &quot;&quot;)</a>

      </div>

        <div class="summary-synopsis"><p>Add an <code class="inline">ilike</code> clause to a query if the user query is safe.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#migrate/0" data-no-tooltip="" translate="no">migrate()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#one/2" data-no-tooltip="" translate="no">one(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.one/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#one!/2" data-no-tooltip="" translate="no">one!(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.one!/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#paginate/2" data-no-tooltip="" translate="no">paginate(pageable, options \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Different implementation for pagination using Scrivener (used by eg. rauversion).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#pagination_opts/1" data-no-tooltip="" translate="no">pagination_opts(opts)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#pluck/3" data-no-tooltip="" translate="no">pluck(query, fields, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Select and return only specific fields (specified as an atom or list of atoms)</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#preload/3" data-no-tooltip="" translate="no">preload(struct_or_structs_or_nil, preloads, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.preload/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#preload_all/2" data-no-tooltip="" translate="no">preload_all(obj, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>See <a><code class="inline">Bonfire.Common.Repo.Preload.preload_all/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#preload_mixins/2" data-no-tooltip="" translate="no">preload_mixins(obj, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>See <a><code class="inline">Bonfire.Common.Repo.Preload.preload_mixins/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#prepare_query/3" data-no-tooltip="" translate="no">prepare_query(operation, query, opts)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.prepare_query/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#prepare_transaction/2" data-no-tooltip="" translate="no">prepare_transaction(fun_or_multi, opts)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.prepare_transaction/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#put/1" data-no-tooltip="" translate="no">put(changeset)</a>

      </div>

        <div class="summary-synopsis"><p>Like <a><code class="inline">insert/1</code></a>, but understands remapping changeset errors to attr
names from config (and only config, no overrides at present!)</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#put_dynamic_repo/1" data-no-tooltip="" translate="no">put_dynamic_repo(dynamic)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.put_dynamic_repo/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#put_many/1" data-no-tooltip="" translate="no">put_many(things)</a>

      </div>

        <div class="summary-synopsis"><p>Like <a><code class="inline">put/1</code></a> but for multiple <code class="inline">changesets</code></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query/3" data-no-tooltip="" translate="no">query(sql, params \\ [], opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs a custom SQL query.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query!/3" data-no-tooltip="" translate="no">query!(sql, params \\ [], opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Same as <a><code class="inline">query/3</code></a> but returns result directly without <code class="inline">:ok</code> tuple
and raises on invalid queries</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_many/3" data-no-tooltip="" translate="no">query_many(sql, params \\ [], opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs a custom SQL query that returns multiple results on the given repo.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_many!/3" data-no-tooltip="" translate="no">query_many!(sql, params \\ [], opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Same as <code class="inline">query_many/4</code> but returns result directly without <code class="inline">:ok</code> tuple
and raises on invalid queries</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reject_preload_ids/1" data-no-tooltip="" translate="no">reject_preload_ids(exclude_ids)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reload/2" data-no-tooltip="" translate="no">reload(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.reload/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reload!/2" data-no-tooltip="" translate="no">reload!(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.reload!/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#rollback/1" data-no-tooltip="" translate="no">rollback(value)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.rollback/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#single/1" data-no-tooltip="" translate="no">single(q)</a>

      </div>

        <div class="summary-synopsis"><p>Execute a query for one result and return either an <code class="inline">{:ok, result}</code> or <code class="inline">{:error, :not_found}</code> tuple.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sql/3" data-no-tooltip="" translate="no">sql(raw_sql, data \\ [], opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Executes raw SQL query.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/1" data-no-tooltip="" translate="no">start_link(opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.start_link/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stop/1" data-no-tooltip="" translate="no">stop(timeout \\ 5000)</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.stop/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stream/2" data-no-tooltip="" translate="no">stream(queryable, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.stream/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_sql/2" data-no-tooltip="" translate="no">to_sql(operation, queryable)</a>

      </div>

        <div class="summary-synopsis"><p>Converts the given query to SQL according to its kind and the
adapter in the given repository.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#trace/1" data-no-tooltip="" translate="no">trace(fun)</a>

      </div>

        <div class="summary-synopsis"><p>Can be used to log specific queries (by calling function) in production.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#transact/2" data-no-tooltip="" translate="no">transact(fun_or_multi, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.transact/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#transact_many/1" data-no-tooltip="" translate="no">transact_many(queries)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#transact_with/2" data-no-tooltip="" translate="no">transact_with(fun, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Run a transaction, similar to <code class="inline">Repo.transaction/1</code>, but it expects an ok or error
tuple. If an error tuple is returned, the transaction is aborted.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#transaction/2" data-no-tooltip="" translate="no">transaction(fun_or_multi, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.transaction/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update/2" data-no-tooltip="" translate="no">update(struct, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.update/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update!/2" data-no-tooltip="" translate="no">update!(struct, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.update!/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update_all/3" data-no-tooltip="" translate="no">update_all(queryable, updates, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Callback implementation for <a><code class="inline">Ecto.Repo.update_all/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#upsert/3" data-no-tooltip="" translate="no">upsert(cs, keys_or_attrs_to_update \\ nil, conflict_target \\ [:id])</a>

      </div>

        <div class="summary-synopsis"><p>Inserts or updates data in the database with upsert semantics.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#upsert_all/3" data-no-tooltip="" translate="no">upsert_all(schema, data, conflict_target \\ [:id])</a>

      </div>

        <div class="summary-synopsis"><p>Insert or update all entries with upsert semantics.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="aggregate/3">

    <span id="aggregate/2"></span>

  <div class="detail-header">
    <a href="#aggregate/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">aggregate(queryable, aggregate, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:aggregate/3"><code class="inline">Ecto.Repo.aggregate/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="aggregate/4">

  <div class="detail-header">
    <a href="#aggregate/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">aggregate(queryable, aggregate, field, opts)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:aggregate/4"><code class="inline">Ecto.Repo.aggregate/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="all/2">

    <span id="all/1"></span>

  <div class="detail-header">
    <a href="#all/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">all(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:all/2"><code class="inline">Ecto.Repo.all/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="all_by/3">

    <span id="all_by/2"></span>

  <div class="detail-header">
    <a href="#all_by/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">all_by(queryable, clauses, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:all_by/3"><code class="inline">Ecto.Repo.all_by/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="checked_out?/0">

  <div class="detail-header">
    <a href="#checked_out?/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">checked_out?()</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:checked_out?/0"><code class="inline">Ecto.Repo.checked_out?/0</code></a>.</p>
  </section>
</section>
<section class="detail" id="checkout/2">

    <span id="checkout/1"></span>

  <div class="detail-header">
    <a href="#checkout/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">checkout(fun, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:checkout/2"><code class="inline">Ecto.Repo.checkout/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="child_spec/1">

  <div class="detail-header">
    <a href="#child_spec/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">child_spec(opts)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="config/0">

  <div class="detail-header">
    <a href="#config/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">config()</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:config/0"><code class="inline">Ecto.Repo.config/0</code></a>.</p>
  </section>
</section>
<section class="detail" id="custom_preload_fun/1">

  <div class="detail-header">
    <a href="#custom_preload_fun/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">custom_preload_fun(fun)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="default_options/1">

  <div class="detail-header">
    <a href="#default_options/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">default_options(operation)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:default_options/1"><code class="inline">Ecto.Repo.default_options/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="default_repo_opts/0">

  <div class="detail-header">
    <a href="#default_repo_opts/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">default_repo_opts()</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="delete/2">

    <span id="delete/1"></span>

  <div class="detail-header">
    <a href="#delete/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">delete(struct, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:delete/2"><code class="inline">Ecto.Repo.delete/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="delete!/2">

    <span id="delete!/1"></span>

  <div class="detail-header">
    <a href="#delete!/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">delete!(struct, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:delete!/2"><code class="inline">Ecto.Repo.delete!/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="delete_all/2">

    <span id="delete_all/1"></span>

  <div class="detail-header">
    <a href="#delete_all/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">delete_all(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:delete_all/2"><code class="inline">Ecto.Repo.delete_all/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="delete_many/2">

    <span id="delete_many/1"></span>

  <div class="detail-header">
    <a href="#delete_many/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">delete_many(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="disconnect_all/2">

    <span id="disconnect_all/1"></span>

  <div class="detail-header">
    <a href="#disconnect_all/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">disconnect_all(interval, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> disconnect_all(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), opts :: <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: :ok</pre>

      </div>

<p>Forces all connections in the repo pool to disconnect within the given interval.</p><p>Once this function is called, the pool will disconnect all of its connections
as they are checked in or as they are pinged. Checked in connections will be
randomly disconnected within the given time interval. Pinged connections are
immediately disconnected - as they are idle (according to <code class="inline">:idle_interval</code>).</p><p>If the connection has a backoff configured (which is the case by default),
disconnecting means an attempt at a new connection will be done immediately
after, without starting a new process for each connection. However, if backoff
has been disabled, the connection process will terminate. In such cases,
disconnecting all connections may cause the pool supervisor to restart
depending on the max_restarts/max_seconds configuration of the pool,
so you will want to set those carefully.</p>
  </section>
</section>
<section class="detail" id="exists?/2">

    <span id="exists?/1"></span>

  <div class="detail-header">
    <a href="#exists?/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">exists?(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:exists?/2"><code class="inline">Ecto.Repo.exists?/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="explain/3">

    <span id="explain/2"></span>

  <div class="detail-header">
    <a href="#explain/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">explain(operation, queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> explain(
  :all | :update_all | :delete_all,
  <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Queryable.html#t:t/0">Ecto.Queryable.t</a>(),
  opts :: <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()
) ::
  <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | <a href="https://hexdocs.pm/elixir/Exception.html#t:t/0">Exception.t</a>() | [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()]</pre>

      </div>

<p>Executes an EXPLAIN statement or similar for the given query according to its kind and the
adapter in the given repository.</p><h2 id="explain/3-examples" class="section-heading"><a href="#explain/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># Postgres</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">explain</span><span class="p" data-group-id="4527180706-1">(</span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p" data-group-id="4527180706-1">)</span><span class="w">
</span><span class="s">&quot;Seq Scan on posts p0  (cost=0.00..12.12 rows=1 width=443)&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Ecto.Adapters.SQL</span><span class="o">.</span><span class="n">explain</span><span class="p" data-group-id="4527180706-2">(</span><span class="nc">Repo</span><span class="p">,</span><span class="w"> </span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p" data-group-id="4527180706-2">)</span><span class="w">
</span><span class="s">&quot;Seq Scan on posts p0  (cost=0.00..12.12 rows=1 width=443)&quot;</span><span class="w">

</span><span class="c1"># MySQL</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">explain</span><span class="p" data-group-id="4527180706-3">(</span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="p" data-group-id="4527180706-4">(</span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;title&quot;</span><span class="p" data-group-id="4527180706-4">)</span><span class="p" data-group-id="4527180706-3">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="4527180706-5">(</span><span class="p" data-group-id="4527180706-5">)</span><span class="w">
</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="w">
</span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">partitions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">possible_keys</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">key</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">key_len</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ref</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">Extra</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="w">
</span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">SIMPLE</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">p0</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">NULL</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="nc">ALL</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nc">NULL</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="nc">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">NULL</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mf">100.0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">Using</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">+</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">+</span><span class="w">

</span><span class="c1"># Shared opts</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">explain</span><span class="p" data-group-id="4527180706-6">(</span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">analyze</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">timeout</span><span class="p">:</span><span class="w"> </span><span class="mi">20_000</span><span class="p" data-group-id="4527180706-6">)</span><span class="w">
</span><span class="s">&quot;Seq Scan on posts p0  (cost=0.00..11.70 rows=170 width=443) (actual time=0.013..0.013 rows=0 loops=1)</span><span class="se">\n</span><span class="s">Planning Time: 0.031 ms</span><span class="se">\n</span><span class="s">Execution Time: 0.021 ms&quot;</span></code></pre><p>It's safe to execute it for updates and deletes, no data change will be committed:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">explain</span><span class="p" data-group-id="4422178966-1">(</span><span class="nc">Repo</span><span class="p">,</span><span class="w"> </span><span class="ss">:update_all</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="p" data-group-id="4422178966-2">(</span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">update</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4422178966-3">[</span><span class="ss">set</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4422178966-4">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new title&quot;</span><span class="p" data-group-id="4422178966-4">]</span><span class="p" data-group-id="4422178966-3">]</span><span class="p" data-group-id="4422178966-2">)</span><span class="p" data-group-id="4422178966-1">)</span><span class="w">
</span><span class="s">&quot;Update on posts p0  (cost=0.00..11.70 rows=170 width=449)</span><span class="se">\n</span><span class="s">  -&gt;  Seq Scan on posts p0  (cost=0.00..11.70 rows=170 width=449)&quot;</span></code></pre><p>This function is also available under the repository with name <code class="inline">explain</code>:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">explain</span><span class="p" data-group-id="8349651202-1">(</span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="p" data-group-id="8349651202-2">(</span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;title&quot;</span><span class="p" data-group-id="8349651202-2">)</span><span class="p" data-group-id="8349651202-1">)</span><span class="w">
</span><span class="s">&quot;Seq Scan on posts p0  (cost=0.00..12.12 rows=1 width=443)</span><span class="se">\n</span><span class="s">  Filter: ((title)::text = &#39;title&#39;::text)&quot;</span></code></pre><h3 id="explain/3-options" class="section-heading"><a href="#explain/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h3><p>Built-in adapters support passing <code class="inline">opts</code> to the EXPLAIN statement according to the following:</p><table><thead><tr><th style="text-align: left;">Adapter</th><th style="text-align: left;">Supported opts</th></tr></thead><tbody><tr><td style="text-align: left;">Postgrex</td><td style="text-align: left;"><code class="inline">analyze</code>, <code class="inline">verbose</code>, <code class="inline">costs</code>, <code class="inline">settings</code>, <code class="inline">buffers</code>, <code class="inline">timing</code>, <code class="inline">summary</code>, <code class="inline">format</code>, <code class="inline">plan</code></td></tr><tr><td style="text-align: left;">MyXQL</td><td style="text-align: left;"><code class="inline">format</code></td></tr></tbody></table><p>All options except <code class="inline">format</code> are boolean valued and default to <code class="inline">false</code>.</p><p>The allowed <code class="inline">format</code> values are <code class="inline">:map</code>, <code class="inline">:yaml</code>, and <code class="inline">:text</code>:</p><ul><li><code class="inline">:map</code> is the deserialized JSON encoding.</li><li><code class="inline">:yaml</code> and <code class="inline">:text</code> return the result as a string.</li></ul><p>The built-in adapters support the following formats:</p><ul><li>Postgrex: <code class="inline">:map</code>, <code class="inline">:yaml</code> and <code class="inline">:text</code></li><li>MyXQL: <code class="inline">:map</code> and <code class="inline">:text</code></li></ul><p>The <code class="inline">:plan</code> option in Postgrex can take the values <code class="inline">:custom</code> or <code class="inline">:fallback_generic</code>. When <code class="inline">:custom</code>
is specified, the explain plan generated will consider the specific values of the query parameters
that are supplied. When using <code class="inline">:fallback_generic</code>, the specific values of the query parameters will
be ignored. <code class="inline">:fallback_generic</code> does not use PostgreSQL's built-in support for a generic explain
plan (available as of PostgreSQL 16), but instead uses a special implementation that works for PostgreSQL
versions 12 and above. Defaults to <code class="inline">:custom</code>.</p><p>Any other value passed to <code class="inline">opts</code> will be forwarded to the underlying adapter query function, including
shared Repo options such as <code class="inline">:timeout</code>. Non built-in adapters may have specific behaviour and you should
consult their documentation for more details.</p><p>For version compatibility, please check your database's documentation:</p><ul><li><em>Postgrex</em>: <a href="https://www.postgresql.org/docs/current/sql-explain.html">PostgreSQL doc</a>.</li><li><em>MyXQL</em>: <a href="https://dev.mysql.com/doc/refman/8.0/en/explain.html">MySQL doc</a>.</li></ul>
  </section>
</section>
<section class="detail" id="fetch/2">

  <div class="detail-header">
    <a href="#fetch/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fetch(queryable, id)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fetch(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()) :: {:ok, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()} | {:error, :not_found}</pre>

      </div>

<p>Execute a query for one result where the primary key matches the given id, and return either an {:ok, result} tuple or a {:error, :not_found}.</p><h2 id="fetch/2-examples" class="section-heading"><a href="#fetch/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">fetch</span><span class="p" data-group-id="0096414769-1">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="0096414769-1">)</span><span class="w">
</span><span class="p" data-group-id="0096414769-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0096414769-3">%</span><span class="nc" data-group-id="0096414769-3">User</span><span class="p" data-group-id="0096414769-3">{</span><span class="p" data-group-id="0096414769-3">}</span><span class="p" data-group-id="0096414769-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">fetch</span><span class="p" data-group-id="0096414769-4">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="mi">999</span><span class="p" data-group-id="0096414769-4">)</span><span class="w">
</span><span class="p" data-group-id="0096414769-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_found</span><span class="p" data-group-id="0096414769-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="fetch_all/2">

  <div class="detail-header">
    <a href="#fetch_all/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fetch_all(queryable, id_or_ids)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Execute a query for multiple results given one or multiple IDs.</p><h2 id="fetch_all/2-examples" class="section-heading"><a href="#fetch_all/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">fetch_all</span><span class="p" data-group-id="6334104191-1">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6334104191-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="6334104191-2">]</span><span class="p" data-group-id="6334104191-1">)</span><span class="w">
</span><span class="p" data-group-id="6334104191-3">[</span><span class="p" data-group-id="6334104191-4">%</span><span class="nc" data-group-id="6334104191-4">User</span><span class="p" data-group-id="6334104191-4">{</span><span class="p" data-group-id="6334104191-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6334104191-5">%</span><span class="nc" data-group-id="6334104191-5">User</span><span class="p" data-group-id="6334104191-5">{</span><span class="p" data-group-id="6334104191-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6334104191-6">%</span><span class="nc" data-group-id="6334104191-6">User</span><span class="p" data-group-id="6334104191-6">{</span><span class="p" data-group-id="6334104191-6">}</span><span class="p" data-group-id="6334104191-3">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">fetch_all</span><span class="p" data-group-id="6334104191-7">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="mi">999</span><span class="p" data-group-id="6334104191-7">)</span><span class="w">
</span><span class="p" data-group-id="6334104191-8">[</span><span class="p" data-group-id="6334104191-8">]</span></code></pre>
  </section>
</section>
<section class="detail" id="fetch_by/2">

  <div class="detail-header">
    <a href="#fetch_by/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fetch_by(queryable, term)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Execute a query for one result (using a keyword list to specify the key/value to query with), and return either an {:ok, result} tuple or a {:error, :not_found}.</p><h2 id="fetch_by/2-examples" class="section-heading"><a href="#fetch_by/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">fetch_by</span><span class="p" data-group-id="1702717424-1">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="1702717424-1">)</span><span class="w">
</span><span class="p" data-group-id="1702717424-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1702717424-3">%</span><span class="nc" data-group-id="1702717424-3">User</span><span class="p" data-group-id="1702717424-3">{</span><span class="p" data-group-id="1702717424-3">}</span><span class="p" data-group-id="1702717424-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">fetch_by</span><span class="p" data-group-id="1702717424-4">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Nonexistent&quot;</span><span class="p" data-group-id="1702717424-4">)</span><span class="w">
</span><span class="p" data-group-id="1702717424-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_found</span><span class="p" data-group-id="1702717424-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="find/3">

    <span id="find/2"></span>

  <div class="detail-header">
    <a href="#find/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">find(q, changeset, field \\ :form)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Like <a href="#single/1"><code class="inline">single/1</code></a>, except on failure, adds an error to the changeset.</p><h2 id="find/3-examples" class="section-heading"><a href="#find/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">changeset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2972366399-1">%</span><span class="nc" data-group-id="2972366399-1">Ecto.Changeset</span><span class="p" data-group-id="2972366399-1">{</span><span class="p" data-group-id="2972366399-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">find</span><span class="p" data-group-id="2972366399-2">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="2972366399-2">)</span><span class="w">
</span><span class="p" data-group-id="2972366399-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2972366399-4">%</span><span class="nc" data-group-id="2972366399-4">User</span><span class="p" data-group-id="2972366399-4">{</span><span class="p" data-group-id="2972366399-4">}</span><span class="p" data-group-id="2972366399-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">changeset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2972366399-5">%</span><span class="nc" data-group-id="2972366399-5">Ecto.Changeset</span><span class="p" data-group-id="2972366399-5">{</span><span class="p" data-group-id="2972366399-5">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">find</span><span class="p" data-group-id="2972366399-6">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">999</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="2972366399-6">)</span><span class="w">
</span><span class="p" data-group-id="2972366399-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2972366399-8">%</span><span class="nc" data-group-id="2972366399-8">Ecto.Changeset</span><span class="p" data-group-id="2972366399-8">{</span><span class="p" data-group-id="2972366399-8">}</span><span class="p" data-group-id="2972366399-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="get/3">

    <span id="get/2"></span>

  <div class="detail-header">
    <a href="#get/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get(queryable, id, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:get/3"><code class="inline">Ecto.Repo.get/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="get!/3">

    <span id="get!/2"></span>

  <div class="detail-header">
    <a href="#get!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get!(queryable, id, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:get!/3"><code class="inline">Ecto.Repo.get!/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="get_by/3">

    <span id="get_by/2"></span>

  <div class="detail-header">
    <a href="#get_by/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_by(queryable, clauses, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:get_by/3"><code class="inline">Ecto.Repo.get_by/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="get_by!/3">

    <span id="get_by!/2"></span>

  <div class="detail-header">
    <a href="#get_by!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_by!(queryable, clauses, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:get_by!/3"><code class="inline">Ecto.Repo.get_by!/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="get_dynamic_repo/0">

  <div class="detail-header">
    <a href="#get_dynamic_repo/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_dynamic_repo()</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:get_dynamic_repo/0"><code class="inline">Ecto.Repo.get_dynamic_repo/0</code></a>.</p>
  </section>
</section>
<section class="detail" id="in_transaction?/0">

  <div class="detail-header">
    <a href="#in_transaction?/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">in_transaction?()</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:in_transaction?/0"><code class="inline">Ecto.Repo.in_transaction?/0</code></a>.</p>
  </section>
</section>
<section class="detail" id="insert/2">

    <span id="insert/1"></span>

  <div class="detail-header">
    <a href="#insert/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert(struct, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:insert/2"><code class="inline">Ecto.Repo.insert/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="insert!/2">

    <span id="insert!/1"></span>

  <div class="detail-header">
    <a href="#insert!/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert!(struct, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:insert!/2"><code class="inline">Ecto.Repo.insert!/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="insert_all/3">

    <span id="insert_all/2"></span>

  <div class="detail-header">
    <a href="#insert_all/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert_all(schema_or_source, entries, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:insert_all/3"><code class="inline">Ecto.Repo.insert_all/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="insert_all_or_ignore/2">

  <div class="detail-header">
    <a href="#insert_all_or_ignore/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert_all_or_ignore(schema, data)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Insert all or ignore a list of maps into a schema.</p><h2 id="insert_all_or_ignore/2-examples" class="section-heading"><a href="#insert_all_or_ignore/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">insert_all_or_ignore</span><span class="p" data-group-id="2040660641-1">(</span><span class="nc">MySchema</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2040660641-2">[</span><span class="p" data-group-id="2040660641-3">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value1&quot;</span><span class="p" data-group-id="2040660641-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2040660641-4">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value2&quot;</span><span class="p" data-group-id="2040660641-4">}</span><span class="p" data-group-id="2040660641-2">]</span><span class="p" data-group-id="2040660641-1">)</span><span class="w">
</span><span class="p" data-group-id="2040660641-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="2040660641-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="insert_or_ignore/1">

  <div class="detail-header">
    <a href="#insert_or_ignore/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert_or_ignore(cs_or_struct)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Insert or ignore a changeset or struct into a schema.</p><h2 id="insert_or_ignore/1-examples" class="section-heading"><a href="#insert_or_ignore/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">insert_or_ignore</span><span class="p" data-group-id="8763319206-1">(</span><span class="p" data-group-id="8763319206-2">%</span><span class="nc" data-group-id="8763319206-2">Ecto.Changeset</span><span class="p" data-group-id="8763319206-2">{</span><span class="p" data-group-id="8763319206-2">}</span><span class="p" data-group-id="8763319206-1">)</span><span class="w">
</span><span class="p" data-group-id="8763319206-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="8763319206-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">insert_or_ignore</span><span class="p" data-group-id="8763319206-4">(</span><span class="p" data-group-id="8763319206-5">%</span><span class="nc" data-group-id="8763319206-5">MySchema</span><span class="p" data-group-id="8763319206-5">{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="8763319206-5">}</span><span class="p" data-group-id="8763319206-4">)</span><span class="w">
</span><span class="p" data-group-id="8763319206-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="8763319206-6">}</span></code></pre>
  </section>
</section>
<section class="detail" id="insert_or_ignore/2">

  <div class="detail-header">
    <a href="#insert_or_ignore/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert_or_ignore(schema, object)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Insert or ignore a map (or iterate over a list of maps) into a schema.</p><h2 id="insert_or_ignore/2-examples" class="section-heading"><a href="#insert_or_ignore/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">insert_or_ignore</span><span class="p" data-group-id="7791373401-1">(</span><span class="nc">MySchema</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7791373401-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="7791373401-2">}</span><span class="p" data-group-id="7791373401-1">)</span><span class="w">
</span><span class="p" data-group-id="7791373401-3">[</span><span class="p" data-group-id="7791373401-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="7791373401-4">}</span><span class="p" data-group-id="7791373401-3">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">insert_or_ignore</span><span class="p" data-group-id="7791373401-5">(</span><span class="nc">MySchema</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7791373401-6">[</span><span class="p" data-group-id="7791373401-7">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value1&quot;</span><span class="p" data-group-id="7791373401-7">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7791373401-8">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value2&quot;</span><span class="p" data-group-id="7791373401-8">}</span><span class="p" data-group-id="7791373401-6">]</span><span class="p" data-group-id="7791373401-5">)</span><span class="w">
</span><span class="p" data-group-id="7791373401-9">[</span><span class="p" data-group-id="7791373401-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="7791373401-10">}</span><span class="p" data-group-id="7791373401-9">]</span></code></pre>
  </section>
</section>
<section class="detail" id="insert_or_update/2">

    <span id="insert_or_update/1"></span>

  <div class="detail-header">
    <a href="#insert_or_update/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert_or_update(changeset, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:insert_or_update/2"><code class="inline">Ecto.Repo.insert_or_update/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="insert_or_update!/2">

    <span id="insert_or_update!/1"></span>

  <div class="detail-header">
    <a href="#insert_or_update!/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">insert_or_update!(changeset, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:insert_or_update!/2"><code class="inline">Ecto.Repo.insert_or_update!/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="load/2">

  <div class="detail-header">
    <a href="#load/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">load(schema_or_types, data)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:load/2"><code class="inline">Ecto.Repo.load/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="make_subquery/1">

  <div class="detail-header">
    <a href="#make_subquery/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">make_subquery(query)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="many/2">

    <span id="many/1"></span>

  <div class="detail-header">
    <a href="#many/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">many(query, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Execute a query for multiple results and return the results.</p><h2 id="many/2-examples" class="section-heading"><a href="#many/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">many</span><span class="p" data-group-id="0363976699-1">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p" data-group-id="0363976699-1">)</span><span class="w">
</span><span class="p" data-group-id="0363976699-2">[</span><span class="p" data-group-id="0363976699-3">%</span><span class="nc" data-group-id="0363976699-3">User</span><span class="p" data-group-id="0363976699-3">{</span><span class="p" data-group-id="0363976699-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0363976699-4">%</span><span class="nc" data-group-id="0363976699-4">User</span><span class="p" data-group-id="0363976699-4">{</span><span class="p" data-group-id="0363976699-4">}</span><span class="p" data-group-id="0363976699-2">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">many</span><span class="p" data-group-id="0363976699-5">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">return</span><span class="p">:</span><span class="w"> </span><span class="ss">:query</span><span class="p" data-group-id="0363976699-5">)</span><span class="w">
</span><span class="p" data-group-id="0363976699-6">#</span><span class="nc" data-group-id="0363976699-6">Ecto.Query</span><span class="p" data-group-id="0363976699-6">&lt;</span><span class="n">...</span><span class="p" data-group-id="0363976699-6">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="many_paginated/3">

    <span id="many_paginated/1"></span>

    <span id="many_paginated/2"></span>

  <div class="detail-header">
    <a href="#many_paginated/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">many_paginated(queryable, opts \\ [], repo_opts \\ default_repo_opts())</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Execute a query for multiple results and return one page of results.
This uses the main implementation for pagination, which is cursor-based and powered by the <a href="./Paginator.html"><code class="inline">Paginator</code></a> library.</p><h2 id="many_paginated/3-examples" class="section-heading"><a href="#many_paginated/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">many_paginated</span><span class="p" data-group-id="9661773701-1">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9661773701-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9661773701-2">]</span><span class="p" data-group-id="9661773701-1">)</span><span class="w">
</span><span class="p" data-group-id="9661773701-3">%</span><span class="nc" data-group-id="9661773701-3">Paginator.Page</span><span class="p" data-group-id="9661773701-3">{</span><span class="p" data-group-id="9661773701-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="maybe_one/2">

    <span id="maybe_one/1"></span>

  <div class="detail-header">
    <a href="#maybe_one/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">maybe_one(q, fallback \\ nil)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Execute a query for one result and return either a result or a fallback value (<code class="inline">nil</code> by default).</p><h2 id="maybe_one/2-examples" class="section-heading"><a href="#maybe_one/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">maybe_one</span><span class="p" data-group-id="3639013110-1">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="3639013110-1">)</span><span class="w">
</span><span class="p" data-group-id="3639013110-2">%</span><span class="nc" data-group-id="3639013110-2">User</span><span class="p" data-group-id="3639013110-2">{</span><span class="p" data-group-id="3639013110-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">maybe_one</span><span class="p" data-group-id="3639013110-3">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">999</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fallback&quot;</span><span class="p" data-group-id="3639013110-3">)</span><span class="w">
</span><span class="s">&quot;fallback&quot;</span></code></pre>
  </section>
</section>
<section class="detail" id="maybe_preload/3">

    <span id="maybe_preload/2"></span>

  <div class="detail-header">
    <a href="#maybe_preload/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">maybe_preload(obj, preloads, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>See <a href="./Bonfire.Common.Repo.Preload.html#maybe_preload/3"><code class="inline">Bonfire.Common.Repo.Preload.maybe_preload/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="maybe_where_ilike/5">

    <span id="maybe_where_ilike/3"></span>

    <span id="maybe_where_ilike/4"></span>

  <div class="detail-header">
    <a href="#maybe_where_ilike/5" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">maybe_where_ilike(query, field, user_query, system_prefix \\ &quot;&quot;, system_suffix \\ &quot;&quot;)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Add an <code class="inline">ilike</code> clause to a query if the user query is safe.</p><h2 id="maybe_where_ilike/5-examples" class="section-heading"><a href="#maybe_where_ilike/5-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">maybe_where_ilike</span><span class="p" data-group-id="4598830065-1">(</span><span class="nc">Needle.Pointer</span><span class="p">,</span><span class="w"> </span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="4598830065-1">)</span><span class="w">
</span><span class="p" data-group-id="4598830065-2">#</span><span class="nc" data-group-id="4598830065-2">Ecto.Query</span><span class="p" data-group-id="4598830065-2">&lt;</span><span class="n">...</span><span class="p" data-group-id="4598830065-2">&gt;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">maybe_where_ilike</span><span class="p" data-group-id="4598830065-3">(</span><span class="nc">Needle.Pointer</span><span class="p">,</span><span class="w"> </span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Al%ice&quot;</span><span class="p" data-group-id="4598830065-3">)</span><span class="w">
</span><span class="nc">Needle.Pointer</span><span class="w"> 
</span><span class="c1"># ^ unchanged due to unsafe query</span></code></pre>
  </section>
</section>
<section class="detail" id="migrate/0">

  <div class="detail-header">
    <a href="#migrate/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">migrate()</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L36" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="one/2">

    <span id="one/1"></span>

  <div class="detail-header">
    <a href="#one/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">one(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:one/2"><code class="inline">Ecto.Repo.one/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="one!/2">

    <span id="one!/1"></span>

  <div class="detail-header">
    <a href="#one!/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">one!(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:one!/2"><code class="inline">Ecto.Repo.one!/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="paginate/2">

    <span id="paginate/1"></span>

  <div class="detail-header">
    <a href="#paginate/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">paginate(pageable, options \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Different implementation for pagination using Scrivener (used by eg. rauversion).</p><h2 id="paginate/2-examples" class="section-heading"><a href="#paginate/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">paginate</span><span class="p" data-group-id="3368142664-1">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">page_size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3368142664-1">)</span><span class="w">
</span><span class="p" data-group-id="3368142664-2">%</span><span class="nc" data-group-id="3368142664-2">Scrivener.Page</span><span class="p" data-group-id="3368142664-2">{</span><span class="p" data-group-id="3368142664-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="pagination_opts/1">

  <div class="detail-header">
    <a href="#pagination_opts/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pagination_opts(opts)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="pluck/3">

    <span id="pluck/2"></span>

  <div class="detail-header">
    <a href="#pluck/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pluck(query, fields, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Select and return only specific fields (specified as an atom or list of atoms)</p><h2 id="pluck/3-examples" class="section-heading"><a href="#pluck/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="o">&gt;</span><span class="w"> </span><span class="n">pluck</span><span class="p" data-group-id="3956993951-1">(</span><span class="ss">:id</span><span class="p" data-group-id="3956993951-1">)</span><span class="w">
</span><span class="p" data-group-id="3956993951-2">[</span><span class="n">id1</span><span class="p">,</span><span class="w"> </span><span class="n">id2</span><span class="p" data-group-id="3956993951-2">]</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pluck</span><span class="p" data-group-id="3956993951-3">(</span><span class="p" data-group-id="3956993951-4">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:inserted_at</span><span class="p" data-group-id="3956993951-4">]</span><span class="p" data-group-id="3956993951-3">)</span><span class="w">
</span><span class="p" data-group-id="3956993951-5">[</span><span class="p" data-group-id="3956993951-6">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id1</span><span class="p">,</span><span class="w"> </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="3956993951-6">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3956993951-7">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id2</span><span class="p">,</span><span class="w"> </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="3956993951-7">}</span><span class="p" data-group-id="3956993951-5">]</span></code></pre>
  </section>
</section>
<section class="detail" id="preload/3">

    <span id="preload/2"></span>

  <div class="detail-header">
    <a href="#preload/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">preload(struct_or_structs_or_nil, preloads, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:preload/3"><code class="inline">Ecto.Repo.preload/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="preload_all/2">

    <span id="preload_all/1"></span>

  <div class="detail-header">
    <a href="#preload_all/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">preload_all(obj, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>See <a href="./Bonfire.Common.Repo.Preload.html#preload_all/2"><code class="inline">Bonfire.Common.Repo.Preload.preload_all/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="preload_mixins/2">

    <span id="preload_mixins/1"></span>

  <div class="detail-header">
    <a href="#preload_mixins/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">preload_mixins(obj, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>See <a href="./Bonfire.Common.Repo.Preload.html#preload_mixins/2"><code class="inline">Bonfire.Common.Repo.Preload.preload_mixins/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="prepare_query/3">

  <div class="detail-header">
    <a href="#prepare_query/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">prepare_query(operation, query, opts)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:prepare_query/3"><code class="inline">Ecto.Repo.prepare_query/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="prepare_transaction/2">

  <div class="detail-header">
    <a href="#prepare_transaction/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">prepare_transaction(fun_or_multi, opts)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:prepare_transaction/2"><code class="inline">Ecto.Repo.prepare_transaction/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="put/1">

  <div class="detail-header">
    <a href="#put/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">put(changeset)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Like <a href="#insert/1"><code class="inline">insert/1</code></a>, but understands remapping changeset errors to attr
names from config (and only config, no overrides at present!)</p><h2 id="put/1-examples" class="section-heading"><a href="#put/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">changeset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5599335083-1">%</span><span class="nc" data-group-id="5599335083-1">Ecto.Changeset</span><span class="p" data-group-id="5599335083-1">{</span><span class="ss">valid?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="5599335083-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">put</span><span class="p" data-group-id="5599335083-2">(</span><span class="n">changeset</span><span class="p" data-group-id="5599335083-2">)</span><span class="w">
</span><span class="p" data-group-id="5599335083-3">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5599335083-4">%</span><span class="nc" data-group-id="5599335083-4">Ecto.Changeset</span><span class="p" data-group-id="5599335083-4">{</span><span class="p" data-group-id="5599335083-4">}</span><span class="p" data-group-id="5599335083-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="put_dynamic_repo/1">

  <div class="detail-header">
    <a href="#put_dynamic_repo/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">put_dynamic_repo(dynamic)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:put_dynamic_repo/1"><code class="inline">Ecto.Repo.put_dynamic_repo/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="put_many/1">

  <div class="detail-header">
    <a href="#put_many/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">put_many(things)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Like <a href="#put/1"><code class="inline">put/1</code></a> but for multiple <code class="inline">changesets</code></p><h2 id="put_many/1-examples" class="section-heading"><a href="#put_many/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">changesets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9727078943-1">[</span><span class="p" data-group-id="9727078943-2">%{</span><span class="ss">valid?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9727078943-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9727078943-3">%{</span><span class="ss">valid?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9727078943-3">}</span><span class="p" data-group-id="9727078943-1">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">put_many</span><span class="p" data-group-id="9727078943-4">(</span><span class="n">changesets</span><span class="p" data-group-id="9727078943-4">)</span><span class="w">
</span><span class="p" data-group-id="9727078943-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9727078943-6">[</span><span class="p" data-group-id="9727078943-7">%{</span><span class="ss">valid?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9727078943-7">}</span><span class="p" data-group-id="9727078943-6">]</span><span class="p" data-group-id="9727078943-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">changesets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9727078943-8">[</span><span class="p" data-group-id="9727078943-9">%{</span><span class="ss">valid?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9727078943-9">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9727078943-10">%{</span><span class="ss">valid?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9727078943-10">}</span><span class="p" data-group-id="9727078943-8">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">put_many</span><span class="p" data-group-id="9727078943-11">(</span><span class="n">changesets</span><span class="p" data-group-id="9727078943-11">)</span><span class="w">
</span><span class="p" data-group-id="9727078943-12">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="9727078943-12">}</span></code></pre>
  </section>
</section>
<section class="detail" id="query/3">

    <span id="query/1"></span>

    <span id="query/2"></span>

  <div class="detail-header">
    <a href="#query/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">query(sql, params \\ [], opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">iodata</a>(), <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_params/0">Ecto.Adapters.SQL.query_params</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  {:ok, <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_result/0">Ecto.Adapters.SQL.query_result</a>()} | {:error, <a href="https://hexdocs.pm/elixir/Exception.html#t:t/0">Exception.t</a>()}</pre>

      </div>

<p>Runs a custom SQL query.</p><p>If the query was successful, it will return an <code class="inline">:ok</code> tuple containing
a map with at least two keys:</p><ul><li><code class="inline">:num_rows</code> - the number of rows affected</li><li><code class="inline">:rows</code> - the result set as a list. <code class="inline">nil</code> may be returned
instead of the list if the command does not yield any row
as result (but still yields the number of affected rows,
like a <code class="inline">delete</code> command without returning would)</li></ul><h2 id="query/3-options" class="section-heading"><a href="#query/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:log</code> - When false, does not log the query</li><li><code class="inline">:timeout</code> - Execute request timeout, accepts: <code class="inline">:infinity</code> (default: <code class="inline">15000</code>);</li></ul><h2 id="query/3-examples" class="section-heading"><a href="#query/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">query</span><span class="p" data-group-id="2632124026-1">(</span><span class="s">&quot;SELECT $1::integer + $2&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2632124026-2">[</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="2632124026-2">]</span><span class="p" data-group-id="2632124026-1">)</span><span class="w">
</span><span class="p" data-group-id="2632124026-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2632124026-4">%{</span><span class="ss">rows</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2632124026-5">[</span><span class="p" data-group-id="2632124026-6">[</span><span class="mi">42</span><span class="p" data-group-id="2632124026-6">]</span><span class="p" data-group-id="2632124026-5">]</span><span class="p">,</span><span class="w"> </span><span class="ss">num_rows</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2632124026-4">}</span><span class="p" data-group-id="2632124026-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Ecto.Adapters.SQL</span><span class="o">.</span><span class="n">query</span><span class="p" data-group-id="2632124026-7">(</span><span class="nc">MyRepo</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SELECT $1::integer + $2&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2632124026-8">[</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="2632124026-8">]</span><span class="p" data-group-id="2632124026-7">)</span><span class="w">
</span><span class="p" data-group-id="2632124026-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2632124026-10">%{</span><span class="ss">rows</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2632124026-11">[</span><span class="p" data-group-id="2632124026-12">[</span><span class="mi">42</span><span class="p" data-group-id="2632124026-12">]</span><span class="p" data-group-id="2632124026-11">]</span><span class="p">,</span><span class="w"> </span><span class="ss">num_rows</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2632124026-10">}</span><span class="p" data-group-id="2632124026-9">}</span></code></pre>
  </section>
</section>
<section class="detail" id="query!/3">

    <span id="query!/1"></span>

    <span id="query!/2"></span>

  <div class="detail-header">
    <a href="#query!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">query!(sql, params \\ [], opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query!(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">iodata</a>(), <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_params/0">Ecto.Adapters.SQL.query_params</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_result/0">Ecto.Adapters.SQL.query_result</a>()</pre>

      </div>

<p>Same as <a href="#query/3"><code class="inline">query/3</code></a> but returns result directly without <code class="inline">:ok</code> tuple
and raises on invalid queries</p>
  </section>
</section>
<section class="detail" id="query_many/3">

    <span id="query_many/1"></span>

    <span id="query_many/2"></span>

  <div class="detail-header">
    <a href="#query_many/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">query_many(sql, params \\ [], opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query_many(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">iodata</a>(), <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_params/0">Ecto.Adapters.SQL.query_params</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  {:ok, [<a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_result/0">Ecto.Adapters.SQL.query_result</a>()]} | {:error, <a href="https://hexdocs.pm/elixir/Exception.html#t:t/0">Exception.t</a>()}</pre>

      </div>

<p>Runs a custom SQL query that returns multiple results on the given repo.</p><p>In case of success, it must return an <code class="inline">:ok</code> tuple containing a list of
maps with at least two keys:</p><ul><li><p><code class="inline">:num_rows</code> - the number of rows affected</p></li><li><p><code class="inline">:rows</code> - the result set as a list. <code class="inline">nil</code> may be returned
instead of the list if the command does not yield any row
as result (but still yields the number of affected rows,
like a <code class="inline">delete</code> command without returning would)</p></li></ul><h2 id="query_many/3-options" class="section-heading"><a href="#query_many/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:log</code> - When false, does not log the query</li><li><code class="inline">:timeout</code> - Execute request timeout, accepts: <code class="inline">:infinity</code> (default: <code class="inline">15000</code>);</li></ul><h2 id="query_many/3-examples" class="section-heading"><a href="#query_many/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">query_many</span><span class="p" data-group-id="3787080247-1">(</span><span class="s">&quot;SELECT $1; SELECT $2;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3787080247-2">[</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3787080247-2">]</span><span class="p" data-group-id="3787080247-1">)</span><span class="w">
</span><span class="p" data-group-id="3787080247-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3787080247-4">[</span><span class="p" data-group-id="3787080247-5">%{</span><span class="ss">rows</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3787080247-6">[</span><span class="p" data-group-id="3787080247-7">[</span><span class="mi">40</span><span class="p" data-group-id="3787080247-7">]</span><span class="p" data-group-id="3787080247-6">]</span><span class="p">,</span><span class="w"> </span><span class="ss">num_rows</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="3787080247-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3787080247-8">%{</span><span class="ss">rows</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3787080247-9">[</span><span class="p" data-group-id="3787080247-10">[</span><span class="mi">2</span><span class="p" data-group-id="3787080247-10">]</span><span class="p" data-group-id="3787080247-9">]</span><span class="p">,</span><span class="w"> </span><span class="ss">num_rows</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="3787080247-8">}</span><span class="p" data-group-id="3787080247-4">]</span><span class="p" data-group-id="3787080247-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Ecto.Adapters.SQL</span><span class="o">.</span><span class="n">query_many</span><span class="p" data-group-id="3787080247-11">(</span><span class="nc">MyRepo</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SELECT $1; SELECT $2;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3787080247-12">[</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3787080247-12">]</span><span class="p" data-group-id="3787080247-11">)</span><span class="w">
</span><span class="p" data-group-id="3787080247-13">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3787080247-14">[</span><span class="p" data-group-id="3787080247-15">%{</span><span class="ss">rows</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3787080247-16">[</span><span class="p" data-group-id="3787080247-17">[</span><span class="mi">40</span><span class="p" data-group-id="3787080247-17">]</span><span class="p" data-group-id="3787080247-16">]</span><span class="p">,</span><span class="w"> </span><span class="ss">num_rows</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="3787080247-15">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3787080247-18">%{</span><span class="ss">rows</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3787080247-19">[</span><span class="p" data-group-id="3787080247-20">[</span><span class="mi">2</span><span class="p" data-group-id="3787080247-20">]</span><span class="p" data-group-id="3787080247-19">]</span><span class="p">,</span><span class="w"> </span><span class="ss">num_rows</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="3787080247-18">}</span><span class="p" data-group-id="3787080247-14">]</span><span class="p" data-group-id="3787080247-13">}</span></code></pre>
  </section>
</section>
<section class="detail" id="query_many!/3">

    <span id="query_many!/1"></span>

    <span id="query_many!/2"></span>

  <div class="detail-header">
    <a href="#query_many!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">query_many!(sql, params \\ [], opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query_many!(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">iodata</a>(), <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_params/0">Ecto.Adapters.SQL.query_params</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: [
  <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_result/0">Ecto.Adapters.SQL.query_result</a>()
]</pre>

      </div>

<p>Same as <code class="inline">query_many/4</code> but returns result directly without <code class="inline">:ok</code> tuple
and raises on invalid queries</p>
  </section>
</section>
<section class="detail" id="reject_preload_ids/1">

  <div class="detail-header">
    <a href="#reject_preload_ids/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reject_preload_ids(exclude_ids)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="reload/2">

    <span id="reload/1"></span>

  <div class="detail-header">
    <a href="#reload/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reload(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:reload/2"><code class="inline">Ecto.Repo.reload/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="reload!/2">

    <span id="reload!/1"></span>

  <div class="detail-header">
    <a href="#reload!/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reload!(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:reload!/2"><code class="inline">Ecto.Repo.reload!/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="rollback/1">

  <div class="detail-header">
    <a href="#rollback/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">rollback(value)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> rollback(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:rollback/1"><code class="inline">Ecto.Repo.rollback/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="single/1">

  <div class="detail-header">
    <a href="#single/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">single(q)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Execute a query for one result and return either an <code class="inline">{:ok, result}</code> or <code class="inline">{:error, :not_found}</code> tuple.</p><h2 id="single/1-examples" class="section-heading"><a href="#single/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">single</span><span class="p" data-group-id="8503382770-1">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8503382770-1">)</span><span class="w">
</span><span class="p" data-group-id="8503382770-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8503382770-3">%</span><span class="nc" data-group-id="8503382770-3">User</span><span class="p" data-group-id="8503382770-3">{</span><span class="p" data-group-id="8503382770-3">}</span><span class="p" data-group-id="8503382770-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">single</span><span class="p" data-group-id="8503382770-4">(</span><span class="n">from</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">where</span><span class="p">:</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">999</span><span class="p" data-group-id="8503382770-4">)</span><span class="w">
</span><span class="p" data-group-id="8503382770-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_found</span><span class="p" data-group-id="8503382770-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="sql/3">

    <span id="sql/1"></span>

    <span id="sql/2"></span>

  <div class="detail-header">
    <a href="#sql/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sql(raw_sql, data \\ [], opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Executes raw SQL query.</p><h2 id="sql/3-examples" class="section-heading"><a href="#sql/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="o">&gt;</span><span class="w"> </span><span class="nc">YourModule</span><span class="o">.</span><span class="n">sql</span><span class="p" data-group-id="1236582816-1">(</span><span class="s">&quot;SELECT * FROM pointers&quot;</span><span class="p" data-group-id="1236582816-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="start_link/1">

    <span id="start_link/0"></span>

  <div class="detail-header">
    <a href="#start_link/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link(opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:start_link/1"><code class="inline">Ecto.Repo.start_link/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="stop/1">

    <span id="stop/0"></span>

  <div class="detail-header">
    <a href="#stop/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stop(timeout \\ 5000)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:stop/1"><code class="inline">Ecto.Repo.stop/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="stream/2">

    <span id="stream/1"></span>

  <div class="detail-header">
    <a href="#stream/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stream(queryable, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:stream/2"><code class="inline">Ecto.Repo.stream/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="to_sql/2">

  <div class="detail-header">
    <a href="#to_sql/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">to_sql(operation, queryable)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L1" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> to_sql(:all | :update_all | :delete_all, <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Queryable.html#t:t/0">Ecto.Queryable.t</a>()) ::
  {<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/ecto_sql/3.13.2/Ecto.Adapters.SQL.html#t:query_params/0">Ecto.Adapters.SQL.query_params</a>()}</pre>

      </div>

<p>Converts the given query to SQL according to its kind and the
adapter in the given repository.</p><h2 id="to_sql/2-examples" class="section-heading"><a href="#to_sql/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>The examples below are meant for reference. Each adapter will
return a different result:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">to_sql</span><span class="p" data-group-id="8931704902-1">(</span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p" data-group-id="8931704902-1">)</span><span class="w">
</span><span class="p" data-group-id="8931704902-2">{</span><span class="s">&quot;SELECT p.id, p.title, p.inserted_at, p.created_at FROM posts as p&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8931704902-3">[</span><span class="p" data-group-id="8931704902-3">]</span><span class="p" data-group-id="8931704902-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">MyRepo</span><span class="o">.</span><span class="n">to_sql</span><span class="p" data-group-id="8931704902-4">(</span><span class="ss">:update_all</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="p" data-group-id="8931704902-5">(</span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">update</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8931704902-6">[</span><span class="ss">set</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8931704902-7">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="o">^</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="8931704902-7">]</span><span class="p" data-group-id="8931704902-6">]</span><span class="p" data-group-id="8931704902-5">)</span><span class="p" data-group-id="8931704902-4">)</span><span class="w">
</span><span class="p" data-group-id="8931704902-8">{</span><span class="s">&quot;UPDATE posts AS p SET title = $1&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8931704902-9">[</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="8931704902-9">]</span><span class="p" data-group-id="8931704902-8">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Ecto.Adapters.SQL</span><span class="o">.</span><span class="n">to_sql</span><span class="p" data-group-id="8931704902-10">(</span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="nc">MyRepo</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p" data-group-id="8931704902-10">)</span><span class="w">
</span><span class="p" data-group-id="8931704902-11">{</span><span class="s">&quot;SELECT p.id, p.title, p.inserted_at, p.created_at FROM posts as p&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8931704902-12">[</span><span class="p" data-group-id="8931704902-12">]</span><span class="p" data-group-id="8931704902-11">}</span></code></pre>
  </section>
</section>
<section class="detail" id="trace/1">

  <div class="detail-header">
    <a href="#trace/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">trace(fun)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Can be used to log specific queries (by calling function) in production.</p><h2 id="trace/1-examples" class="section-heading"><a href="#trace/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">trace</span><span class="p" data-group-id="3553643874-1">(</span><span class="k" data-group-id="3553643874-2">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Repo</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="3553643874-3">(</span><span class="nc">User</span><span class="p" data-group-id="3553643874-3">)</span><span class="w"> </span><span class="k" data-group-id="3553643874-2">end</span><span class="p" data-group-id="3553643874-1">)</span><span class="w">
</span><span class="p" data-group-id="3553643874-4">[</span><span class="p" data-group-id="3553643874-5">%</span><span class="nc" data-group-id="3553643874-5">User</span><span class="p" data-group-id="3553643874-5">{</span><span class="p" data-group-id="3553643874-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3553643874-6">%</span><span class="nc" data-group-id="3553643874-6">User</span><span class="p" data-group-id="3553643874-6">{</span><span class="p" data-group-id="3553643874-6">}</span><span class="p" data-group-id="3553643874-4">]</span></code></pre>
  </section>
</section>
<section class="detail" id="transact/2">

    <span id="transact/1"></span>

  <div class="detail-header">
    <a href="#transact/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">transact(fun_or_multi, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:transact/2"><code class="inline">Ecto.Repo.transact/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="transact_many/1">

  <div class="detail-header">
    <a href="#transact_many/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">transact_many(queries)</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="transact_with/2">

    <span id="transact_with/1"></span>

  <div class="detail-header">
    <a href="#transact_with/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">transact_with(fun, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Run a transaction, similar to <code class="inline">Repo.transaction/1</code>, but it expects an ok or error
tuple. If an error tuple is returned, the transaction is aborted.</p><h2 id="transact_with/2-examples" class="section-heading"><a href="#transact_with/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">transact_with</span><span class="p" data-group-id="8065314413-1">(</span><span class="k" data-group-id="8065314413-2">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="8065314413-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;success&quot;</span><span class="p" data-group-id="8065314413-3">}</span><span class="w"> </span><span class="k" data-group-id="8065314413-2">end</span><span class="p" data-group-id="8065314413-1">)</span><span class="w">
</span><span class="s">&quot;success&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">transact_with</span><span class="p" data-group-id="8065314413-4">(</span><span class="k" data-group-id="8065314413-5">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="8065314413-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;failure&quot;</span><span class="p" data-group-id="8065314413-6">}</span><span class="w"> </span><span class="k" data-group-id="8065314413-5">end</span><span class="p" data-group-id="8065314413-4">)</span><span class="w">
</span><span class="gt">** (Ecto.RollbackError) Rolling back the DB transaction, error reason: failure</span></code></pre>
  </section>
</section>
<section class="detail" id="transaction/2">

    <span id="transaction/1"></span>

  <div class="detail-header">
    <a href="#transaction/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">transaction(fun_or_multi, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:transaction/2"><code class="inline">Ecto.Repo.transaction/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="update/2">

    <span id="update/1"></span>

  <div class="detail-header">
    <a href="#update/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">update(struct, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:update/2"><code class="inline">Ecto.Repo.update/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="update!/2">

    <span id="update!/1"></span>

  <div class="detail-header">
    <a href="#update!/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">update!(struct, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:update!/2"><code class="inline">Ecto.Repo.update!/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="update_all/3">

    <span id="update_all/2"></span>

  <div class="detail-header">
    <a href="#update_all/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">update_all(queryable, updates, opts \\ [])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Callback implementation for <a href="https://hexdocs.pm/ecto/3.13.2/Ecto.Repo.html#c:update_all/3"><code class="inline">Ecto.Repo.update_all/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="upsert/3">

    <span id="upsert/1"></span>

    <span id="upsert/2"></span>

  <div class="detail-header">
    <a href="#upsert/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">upsert(cs, keys_or_attrs_to_update \\ nil, conflict_target \\ [:id])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Inserts or updates data in the database with upsert semantics.</p><ul><li><code class="inline">cs</code> - The changeset or schema to insert or update.</li><li><code class="inline">keys_or_attrs_to_update</code> - A list of keys or a map of attributes to update.</li><li><code class="inline">conflict_target</code> - The column(s) or constraint to check for conflicts, defaults to <code class="inline">[:id]</code>.</li></ul><h2 id="upsert/3-examples" class="section-heading"><a href="#upsert/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">upsert</span><span class="p" data-group-id="7021910934-1">(</span><span class="p" data-group-id="7021910934-2">%</span><span class="nc" data-group-id="7021910934-2">Ecto.Changeset</span><span class="p" data-group-id="7021910934-2">{</span><span class="p" data-group-id="7021910934-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7021910934-3">[</span><span class="ss">:field1</span><span class="p">,</span><span class="w"> </span><span class="ss">:field2</span><span class="p" data-group-id="7021910934-3">]</span><span class="p" data-group-id="7021910934-1">)</span><span class="w">
</span><span class="p" data-group-id="7021910934-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="7021910934-4">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">upsert</span><span class="p" data-group-id="7021910934-5">(</span><span class="p" data-group-id="7021910934-6">%</span><span class="nc" data-group-id="7021910934-6">Ecto.Changeset</span><span class="p" data-group-id="7021910934-6">{</span><span class="p" data-group-id="7021910934-6">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7021910934-7">%{</span><span class="ss">field1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="7021910934-7">}</span><span class="p" data-group-id="7021910934-5">)</span><span class="w">
</span><span class="p" data-group-id="7021910934-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="7021910934-8">}</span></code></pre>
  </section>
</section>
<section class="detail" id="upsert_all/3">

    <span id="upsert_all/2"></span>

  <div class="detail-header">
    <a href="#upsert_all/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">upsert_all(schema, data, conflict_target \\ [:id])</h1>


        <a href="https://github.com/bonfire-networks/bonfire_common/blob/main/lib/repo/repo.ex#L9" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Insert or update all entries with upsert semantics.</p><ul><li><code class="inline">schema</code> - The schema or table name to insert or update.</li><li><code class="inline">data</code> - A list of maps containing the data to insert or update.</li><li><code class="inline">conflict_target</code> - The column(s) or constraint to check for conflicts, defaults to <code class="inline">[:id]</code>.</li></ul><h2 id="upsert_all/3-examples" class="section-heading"><a href="#upsert_all/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">upsert_all</span><span class="p" data-group-id="3334128461-1">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3334128461-2">[</span><span class="p" data-group-id="3334128461-3">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="3334128461-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3334128461-4">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="3334128461-4">}</span><span class="p" data-group-id="3334128461-2">]</span><span class="p" data-group-id="3334128461-1">)</span><span class="w">
</span><span class="p" data-group-id="3334128461-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="3334128461-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">upsert_all</span><span class="p" data-group-id="3334128461-6">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3334128461-7">[</span><span class="p" data-group-id="3334128461-8">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice Updated&quot;</span><span class="p" data-group-id="3334128461-8">}</span><span class="p" data-group-id="3334128461-7">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3334128461-9">[</span><span class="ss">:id</span><span class="p" data-group-id="3334128461-9">]</span><span class="p" data-group-id="3334128461-6">)</span><span class="w">
</span><span class="p" data-group-id="3334128461-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="p" data-group-id="3334128461-10">}</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Bonfire.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
