<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.4">
    <meta name="project" content="Bonfire v1.0.2-social-alpha.28">


    <title>Bonfire Federation Interoperability Guide ‚Äî Bonfire v1.0.2-social-alpha.28</title>

    <link rel="stylesheet" href="dist/html-elixir-RLZO5U2C.css" />

    <script defer src="dist/sidebar_items-DFBF9C0F.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-Y223O6DN.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://bonfirenetworks.org" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Bonfire" />
        </a>

      <div>
        <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
Bonfire
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.2-social-alpha.28
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Bonfire</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Bonfire Federation Interoperability Guide</h1>


      <a href="https://github.com/bonfire-networks/bonfire-app/blob/main/docs/topics/federation-interoperability.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<h2 id="1-introduction" class="section-heading"><a href="#1-introduction" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">1. Introduction</span></h2><p>Bonfire is a modular, extensible, privacy-focused federated platform built on top of <a href="#activitypub">ActivityPub</a> and <a href="#activitystreams">ActivityStreams</a>. It aims to provide a flexible foundation for building social, collaborative, and community-oriented applications that can interoperate with the wider Fediverse.</p><p>Unlike monolithic platforms, Bonfire is designed built as a framework that powers multiple apps (flavours) with features provided by optional extensions, allowing instances to enable only the features they need. This modularity also makes it easier to experiment with new protocols, object types, and interaction patterns.</p><p>Bonfire strives for maximum interoperability with other ActivityPub-based software such as <a href="https://docs.joinmastodon.org/spec/activitypub/" title="Mastodon ActivityPub Docs">Mastodon</a>, Pixelfed, Mobilizon, GoToSocial <a href="https://docs.gotosocial.org/en/latest/federation/" title="GoToSocial Federation Docs">8</a>, Peertube, and others, while also supporting advanced privacy controls, custom boundaries, and experimental <a href="#fep">FEPs</a>.</p><p>This guide documents how Bonfire federates, how it handles ActivityPub objects and activities, and what to expect when integrating with or building on top of Bonfire. </p><ul><li><strong>Protocols:</strong> <a href="#activitypub">ActivityPub</a>, <a href="#webfinger">WebFinger</a></li><li><strong>Syntax:</strong> <a href="https://www.w3.org/TR/activitystreams-core/" title="ActivityStreams 2.0 Core Syntax">ActivityStreams Core</a></li><li><strong>Vocabulary:</strong> <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">ActivityStreams Vocabulary</a>, ValueFlows<a href="https://www.valueflo.ws" title="ValueFlows: a vocabulary for the distributed economic networks of the next economy, to coordinate the creation, distribution, and exchange of economic resources">13</a></li><li><strong>Extensions:</strong> ActivityPub <a href="#fep">FEPs</a>, Bonfire extensions</li></ul><blockquote><p>See the <a href="#glossary">Glossary</a> for definitions of key terms.</p></blockquote><h2 id="2-protocol-support-endpoints" class="section-heading"><a href="#2-protocol-support-endpoints" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">2. Protocol Support &amp; Endpoints</span></h2><p>Bonfire supports the core <a href="#activitypub">ActivityPub</a> server-to-server (S2S) protocol for federation, as well as <a href="#webfinger">WebFinger</a> for user and resource discovery. This enables Bonfire instances to interoperate with a wide range of other Fediverse software, including <a href="https://docs.joinmastodon.org/spec/activitypub/" title="Mastodon ActivityPub Docs">Mastodon</a>, Akkoma <a href="https://docs.akkoma.dev/stable/development/ap_extensions/" title="Akkoma ActivityPub Docs">5</a>, Pixelfed, Mobilizon, Wordpress, GoToSocial <a href="https://docs.gotosocial.org/en/latest/federation/" title="GoToSocial Federation Docs">8</a>, and many more.</p><h3 id="activitypub-endpoints" class="section-heading"><a href="#activitypub-endpoints" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">ActivityPub Endpoints</span></h3><p>Bonfire exposes the standard ActivityPub endpoints for each actor:</p><ul><li><strong>Inbox</strong>: Receives incoming activities from remote servers.<br/>Example: <code class="inline">https://your.bonfire.instance/pub/actors/{username}/inbox</code></li><li><strong>Outbox</strong>: Lists activities published by the actor.<br/>Example: <code class="inline">https://your.bonfire.instance/pub/actors/{username}/outbox</code></li><li><strong>Followers / Following</strong>: Collections of followers and followed actors.</li><li><strong>Shared Inbox</strong>: (Optional) For batching deliveries to multiple actors on the same instance.</li></ul><p>HTTP requests should use the correct <code class="inline">Accept</code> header (<code class="inline">application/activity+json</code> or <code class="inline">application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;</code>).</p><p>See <a href="https://www.w3.org/TR/activitypub/" title="ActivityPub Specification">ActivityPub Spec</a> and <a href="https://www.w3.org/TR/activitystreams-core/" title="ActivityStreams 2.0 Core Syntax">ActivityStreams Core</a> for details on endpoint structure and payloads.</p><h3 id="webfinger-endpoint" class="section-heading"><a href="#webfinger-endpoint" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">WebFinger Endpoint</span></h3><p>Bonfire implements the <a href="https://datatracker.ietf.org/doc/html/rfc7033" title="WebFinger RFC">WebFinger</a> protocol for resource discovery:</p><ul><li>Endpoint: <code class="inline">https://your.bonfire.instance/.well-known/webfinger</code></li><li>Query parameter: <code class="inline">resource=acct:username@domain</code></li></ul><p>WebFinger is essential for interoperability with most ActivityPub implementations, as it allows translating <code class="inline">@user@domain</code> identifiers into canonical ActivityPub actor URIs. Bonfire ensures that the <code class="inline">rel=self</code> link and <code class="inline">subject</code> fields are correct, and supports both <code class="inline">application/activity+json</code> and <code class="inline">application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;</code> content types for maximum compatibility.</p><p>WebFinger responses include links to the actor's ActivityPub profile and HTML profile page. See <a href="https://datatracker.ietf.org/doc/html/rfc7033" title="WebFinger RFC">WebFinger RFC</a> for details.</p><h3 id="supported-verbs-and-objects" class="section-heading"><a href="#supported-verbs-and-objects" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Supported Verbs and Objects</span></h3><p>Bonfire supports all major ActivityPub activity types (verbs), including:</p><ul><li><code class="inline">Create</code>, <code class="inline">Update</code>, <code class="inline">Delete</code>, <code class="inline">Follow</code>, <code class="inline">Accept</code>, <code class="inline">Reject</code>, <code class="inline">Undo</code>, <code class="inline">Like</code>, <code class="inline">Announce</code>, <code class="inline">Flag</code>, <code class="inline">Block</code>, <code class="inline">Move</code>, and more.</li></ul><p>Supported object types include <code class="inline">Note</code>, <code class="inline">Article</code>, and others as defined in <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">ActivityStreams Vocabulary</a>. Any object types not specifically implemented (in a Bonfire extension) are still stored as JSON objects, with a fallback preview UI component attempting to display them in feeds (tip: use the <code class="inline">preview</code> property to attach another object such as a <code class="inline">Note</code> to be used as a preview for unimplemented objects). </p><h3 id="compatibility" class="section-heading"><a href="#compatibility" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Compatibility</span></h3><p>Bonfire aims for broad compatibility with major ActivityPub implementations. It supports and regularly tests against:</p><ul><li>Mastodon <a href="https://docs.joinmastodon.org/spec/activitypub/" title="Mastodon ActivityPub Docs">3</a>, Akomma, GoToSocial <a href="https://docs.gotosocial.org/en/latest/federation/" title="GoToSocial Federation Docs">8</a></li><li>Misskey and derivatives</li><li>Pixelfed</li><li>Peertube</li><li>Mobilizon</li><li>WriteFreely, Wordpress, and Ghost</li><li>Lemmy, kbin, and PieFed</li><li>Castopod, and Funkwhale</li><li>BookWyrm</li><li><a href="https://github.com/bonfire-networks/bonfire-app/wiki/Manual-federation-testing">And more</a></li></ul><h3 id="feps-and-extensions" class="section-heading"><a href="#feps-and-extensions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">FEPs and Extensions</span></h3><p>Bonfire implements and/or experiments with several <a href="https://codeberg.org/fediverse/fep" title="Fediverse Enhancement Proposals (FEPs)">Fediverse Enhancement Proposals (FEPs)</a>, including:</p><ul><li><a href="https://w3id.org/fep/044f" title="FEP-044f: Consent-respecting Quote Posts">FEP-044f</a> (Quote Posts)</li><li><a href="https://docs.gotosocial.org/en/latest/federation/interaction_policy/" title="Interaction Policy as defined by GoToSocial">TBD</a> (Interaction Policy)</li></ul><p>Partial support or conformity to-be-confirmed (help needed!):</p><ul><li><a href="https://w3id.org/fep/f1d5" title="FEP-f1d5: NodeInfo in Fediverse Software">FEP-f1d5</a>, <a href="https://w3id.org/fep/eb22" title="FEP-eb22: Supported ActivityStreams types with NodeInfo">FEP-eb22</a>, and/or <a href="https://w3id.org/fep/0151" title="FEP-0151: NodeInfo in Fediverse Software (2025 edition)">FEP-0151</a> (NodeInfo)</li><li><a href="https://w3id.org/fep/2277" title="FEP-2277: ActivityPub core types">FEP-2277</a> (ActivityPub core types)</li><li><a href="https://w3id.org/fep/4adb" title="FEP-4adb: Dereferencing identifiers through webfinger">FEP-4adb</a> (Derefencing identifiers through webfinger)</li><li><a href="https://w3id.org/fep/521a" title="FEP-521a: Representing actor's public keys">FEP-521a</a> (Representing actor's public keys)</li><li><a href="https://w3id.org/fep/5feb" title="FEP-5feb: Search indexing consent for actors">FEP-5feb</a> (Search indexing consent for actors)</li><li><a href="https://w3id.org/fep/268d" title="FEP-268d: Search consent signals for objects">FEP-268d</a> (Search consent signals for objects)</li><li><a href="https://w3id.org/fep/d8c2" title="FEP-d8c2: OAuth 2.0 profile for the ActivityPub API">FEP-d8c2</a> (OAuth 2.0 profile for the ActivityPub API)</li><li><a href="https://w3id.org/fep/7628" title="FEP-7628: Move actor">FEP-7628</a>, <a href="https://w3id.org/fep/73cd" title="FEP-73cd: Migration User Stories">FEP-73cd</a>, and/or <a href="https://w3id.org/fep/e965" title="FEP-e965: Move Activity for Migrations and Announce Activity for Tombstone Events">FEP-e965</a> (Move actor)</li><li><a href="https://w3id.org/fep/8967" title="FEP-8967: Generating link previews for attached links">FEP-8967</a> (Generating link previews for attached links)</li><li><a href="https://w3id.org/fep/c0e0" title="FEP-c0e0: Emoji reactions">FEP-c0e0</a> (Emoji reactions)</li><li><a href="https://w3id.org/fep/9098" title="FEP-9098: Custom emojis">FEP-9098</a> (Custom emojis)</li><li><a href="https://w3id.org/fep/f228" title="FEP-f228: Backfilling conversations">FEP-f228</a> (Backfilling conversations)</li><li><a href="https://w3id.org/fep/a974" title="FEP-a974: All Actor types should be followable">FEP-a974</a> (All Actor types should be followable)</li><li><a href="https://w3id.org/fep/1311" title="FEP-1311: Media attachments">FEP-1311</a> (Media attachments)</li><li><a href="https://w3id.org/fep/b2b8" title="FEP-b2b8: Long-form text">FEP-b2b8</a> (Long-form text)</li><li><a href="https://w3id.org/fep/76ea" title="FEP-76ea: Conversation threads">FEP-76ea</a> (Conversation threads)</li><li><a href="https://w3id.org/fep/7458" title="FEP-7458: Using the replies collection">FEP-7458</a> (Using the replies collection)</li><li><a href="https://w3id.org/fep/c16b" title="FEP-c16b: Formatting MFM functions">FEP-c16b</a> (Formatting MFM functions)</li><li><a href="https://w3id.org/fep/eb48" title="FEP-eb48: Hashtags">FEP-eb48</a> (Hashtags)</li></ul><p>Work-in-progres, planned, or exploring (suggestions/feedback welcome!):</p><ul><li><a href="https://docs.gotosocial.org/en/latest/federation/interaction_policy/" title="Interaction Policy as defined by GoToSocial">FEP-1b12</a> (Group federation)</li><li><a href="https://w3id.org/fep/67ff" title="FEP-67ff: FEDERATION.md">FEP-67ff</a> (FEDERATION.md)</li><li><a href="https://w3id.org/fep/2677" title="FEP-2677: Identifying the Application Actor">FEP-2677</a> (Identifying the Application Actor)</li><li><a href="https://w3id.org/fep/d556" title="FEP-d556: Server-level Actor Discovery using WebFinger">FEP-d556</a> (Server-level Actor Discovery using WebFinger)</li><li><a href="https://w3id.org/fep/8a8e" title="FEP-8a8e: A common approach to using the Event object type">FEP-8a8e</a> (A common approach to using the Event object type)</li><li><a href="https://w3id.org/fep/efda" title="FEP-efda: Followable objects">FEP-efda</a> (Followable objects)</li><li><a href="https://w3id.org/fep/9967" title="FEP-9967: Polls">FEP-9967</a> (Polls)</li><li><a href="https://w3id.org/fep/fe34" title="FEP-fe34: Origin-based security model">FEP-fe34</a> (Origin-based security model)</li><li><a href="https://w3id.org/fep/0499" title="FEP-0499: Delivering to multiple inboxes with a multibox endpoints">FEP-0499</a> (Delivering to multiple inboxes with a multibox endpoints)</li><li><a href="https://w3id.org/fep/6fcd" title="FEP-6fcd: Account export container format">FEP-6fcd</a> (Account export container format)</li><li><a href="https://w3id.org/fep/3264" title="FEP-3264: Federated work coordination">FEP-3264</a> (Federated work coordination)</li><li><a href="https://w3id.org/fep/c5a1" title="FEP-c5a1: Todos">FEP-c5a1</a> (Todos)</li></ul><p>Support for additional FEPs and experimental features not listed here may be implemented and enabled by extensions.</p><blockquote><p>For more on Bonfire's federation rules and extension points, see <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a>.</p></blockquote><h2 id="3-actor-object-model" class="section-heading"><a href="#3-actor-object-model" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">3. Actor &amp; Object Model</span></h2><p>Bonfire uses the <a href="#activitystreams">ActivityStreams</a> data model for representing actors and objects, along with the <a href="#activitypub">ActivityPub</a> specification and <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">ActivityStreams Vocabulary</a>. This section describes how Bonfire maps its internal data to ActivityPub actors and objects, and how it interprets incoming data from remote instances.</p><h3 id="actor-types" class="section-heading"><a href="#actor-types" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Actor Types</span></h3><p>Bonfire supports the following ActivityStreams actor types:</p><ul><li><strong>Person</strong>: Represents a user account or individual.</li><li><strong>Group</strong>: Represents a group, category, or collective identity.</li><li><strong>Service</strong>: Used for bots or automated accounts.</li><li>(Other types may be supported by extensions.)</li></ul><p>Bonfire maps its internal &quot;character&quot; abstraction (users, groups, categories, etc.) to the appropriate ActivityStreams actor type. See <a href="#canonical-uri">Canonical URI</a> for how actor IDs are constructed.</p><h3 id="object-types" class="section-heading"><a href="#object-types" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Object Types</span></h3><p>Bonfire supports a wide range of ActivityStreams object types, including:</p><ul><li><strong>Note</strong>: Short-form post or status update.</li><li><strong>Article</strong>: Long-form post or article.</li><li><strong>Question</strong>: Poll or question (if enabled by extension).</li><li><strong>Image</strong>, <strong>Video</strong>, <strong>Audio</strong>, <strong>Event</strong>, etc. (as defined in <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">ActivityStreams Vocabulary</a> and supported by extensions).</li></ul><p>Objects not explicitly supported by Bonfire are still stored and can be previewed in the UI, with a fallback display.</p><h3 id="addressing-and-audience" class="section-heading"><a href="#addressing-and-audience" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Addressing and Audience</span></h3><p>Bonfire uses the standard ActivityPub addressing fields to determine the audience for activities and objects:</p><ul><li><code class="inline">to</code>: Primary recipients (can include actors, collections, or the <a href="#public-uri">Public URI</a>).</li><li><code class="inline">cc</code>: Secondary recipients (e.g., followers).</li><li><code class="inline">bto</code>, <code class="inline">bcc</code>: Blind recipients (not visible to all, used for addressing activities with custom circles or boundaries).</li><li><code class="inline">audience</code>: Additional audience specification (rarely used).</li></ul><h4>Addressing and Visibility Mapping</h4><table><thead><tr><th style="text-align: left;">Addressing Fields Example</th><th style="text-align: left;">Visibility Level</th><th style="text-align: left;">Notes</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">to: Public</code></td><td style="text-align: left;">Public</td><td style="text-align: left;">Visible to everyone, delivered to all followers and public timelines.</td></tr><tr><td style="text-align: left;"><code class="inline">to: followers</code></td><td style="text-align: left;">Followers-only</td><td style="text-align: left;">Only followers can see/interact.</td></tr><tr><td style="text-align: left;"><code class="inline">to: [actor1, actor2]</code></td><td style="text-align: left;">Direct (DM)</td><td style="text-align: left;">Only addressed actors can see/interact.</td></tr><tr><td style="text-align: left;"><code class="inline">bto</code>/<code class="inline">bcc</code></td><td style="text-align: left;">Blind recipients</td><td style="text-align: left;">Recipients not visible to others (used to apply circles/boundaries in outgoing activities).</td></tr></tbody></table><p>Bonfire interprets these fields according to the ActivityPub spec and enforces boundaries and privacy accordingly.</p><h3 id="canonical-uris-and-id-formats" class="section-heading"><a href="#canonical-uris-and-id-formats" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Canonical URIs and ID Formats</span></h3><p>All Bonfire actors and objects have globally unique, canonical URIs (typically HTTPS URLs) that serve as their ActivityPub <code class="inline">id</code>. These URIs are stable and dereferenceable, allowing remote instances to fetch the ActivityStreams representation of the resource.</p><ul><li>Example actor URI: <code class="inline">https://a.bonfire.instance/pub/actors/alice</code></li><li>Example object URI: <code class="inline">https://a.bonfire.instance/pub/objects/01H8ZK2YXP9QCT5BE1JWQSAM3B6</code></li></ul><p>Bonfire uses <a href="https://github.com/ulid/spec">ULIDs</a> for object IDs, ensuring uniqueness and sortability.</p><blockquote><p>For more details on actor and object mapping, see <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a> and <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">ActivityStreams Vocabulary</a>.</p></blockquote><h2 id="4-content-types-extensions" class="section-heading"><a href="#4-content-types-extensions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">4. Content Types &amp; Extensions</span></h2><p>Bonfire supports a broad range of <a href="#activitystreams">ActivityStreams</a> object types, as defined in the <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">ActivityStreams Vocabulary</a>. The most common types are:</p><ul><li><strong>Note</strong>: Short-form post or status update.</li><li><strong>Article</strong>: Long-form post or article.</li><li><strong>Image</strong>, <strong>Video</strong>, <strong>Audio</strong>, <strong>Link</strong>: Media attachments.</li><li><strong>Event</strong>, <strong>Question</strong>, etc: Supported if a relevant Bonfire extension is enabled.</li><li><strong>Any other types</strong>: Any object (whether defined in ActivityStreams or not) type will be stored and displayed, even if not natively supported by any enabled Bonfire extension. For unknown types, Bonfire attempts to render a preview using the <code class="inline">preview</code> property if present, otherwise using fallbacks to generate a preview using some common object properties such as <code class="inline">name</code>, <code class="inline">summary</code>, or <code class="inline">image</code>.</li></ul><h3 id="extensions-and-custom-types-or-properties" class="section-heading"><a href="#extensions-and-custom-types-or-properties" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Extensions and Custom Types or Properties</span></h3><p>Bonfire supports <a href="#ap-extensions">AP extensions</a> such as:</p><ul><li><strong>Hashtag</strong>: For topic tags, using the <code class="inline">Hashtag</code> object type.</li><li><strong>Emoji</strong>: For custom emoji, using the <code class="inline">Emoji</code> object type.</li><li><strong>PropertyValue</strong>: For profile metadata fields, using the [schema.org PropertyValue][propertyvalue] extension.</li></ul><p>As of this writing there is no Bonfire extension currently defining new object types or properties, but extensions can add support for new types or properties. Some extensions are using types and properties defined by specs or FEPs outside of ActivityStreams though, for example enabling the ValueFlows extension adds support for economic objects and activities as defined by the <a href="https://www.valueflo.ws" title="ValueFlows: a vocabulary for the distributed economic networks of the next economy, to coordinate the creation, distribution, and exchange of economic resources">ValueFlows vocabulary</a>. This should be documented in each extension's docs or right here:</p><h4>FEPs, Experimental Features, and Handling of Unknown and Custom Types</h4><p>Bonfire stores and attempts to render any ActivityStreams object type, even if not natively supported. For unknown types, Bonfire uses the <code class="inline">preview</code> property if present, or falls back to common properties like <code class="inline">name</code>, <code class="inline">summary</code>, or <code class="inline">image</code>. Mastodon, GoToSocial, and Akkoma-specific extensions and properties are generally ignored unless mapped by a Bonfire extension.</p><h5>Extensions from Other Platforms</h5><p>Bonfire will always store, and depending on what extensions are implemented and enabled, may ignore or use/render Mastodon/GoToSocial/Akkoma-specific extensions such as <code class="inline">toot:Emoji</code>, <code class="inline">toot:blurhash</code>, and others. See <a href="#ap-extensions">AP Extensions</a> for more.</p><h5>Profile Metadata and Attachments</h5><p>Bonfire represents profile fields using <code class="inline">PropertyValue</code> objects in the <code class="inline">attachment</code> array, following the schema.org extension used by Mastodon and GoToSocial. Note that Mastodon uses the context <code class="inline">http://schema.org#</code> (incorrect), while Bonfire uses the correct <code class="inline">https://schema.org/</code>. Bonfire will parse both for compatibility.</p><h5>Hashtags, Mentions, and Emojis</h5><p>Bonfire encodes hashtags, mentions, and custom emojis in the <code class="inline">tag</code> array, using the <code class="inline">Hashtag</code>, <code class="inline">Mention</code>, and <code class="inline">Emoji</code> types as defined in ActivityStreams and Mastodon extensions. These are rendered in the UI and federated as appropriate.</p><h5>Blurhash</h5><p>Bonfire creates and displays blurhashes (<code class="inline">blurhash</code>) for image attachments, as defined by Mastodon and GoToSocial. These properties are used to improve media display and previews in the UI.</p><h5>Providing Source Markdown</h5><p>Bonfire includes the original source (markdown) of posts in the <code class="inline">source</code> property of ActivityPub objects, in addition to the rendered HTML in <code class="inline">content</code>. This allows remote servers and clients to display or edit the original markdown if desired, improving fidelity and interoperability.</p><h6>Example: Outgoing Note with Markdown Source</h6><pre><code class="makeup json" translate="no"><span class="p" data-group-id="9046518362-1">{</span><span class="w">
  </span><span class="nt">&quot;@context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-2">[</span><span class="w">
    </span><span class="s2">&quot;https://www.w3.org/ns/activitystreams&quot;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="9046518362-3">{</span><span class="w">
      </span><span class="nt">&quot;@language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;en&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;Hashtag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as:Hashtag&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;ValueFlows&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://w3id.org/valueflows#&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;_misskey_quote&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://misskey-hub.net/ns/#_misskey_quote&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;om2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://www.ontology-of-units-of-measure.org/resource/om-2/&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;quote&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-4">{</span><span class="nt">&quot;@id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://w3id.org/fep/044f#quote&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;@id&quot;</span><span class="p" data-group-id="9046518362-4">}</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;quoteAuthorization&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-5">{</span><span class="nt">&quot;@id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://w3id.org/fep/044f#quoteAuthorization&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;@id&quot;</span><span class="p" data-group-id="9046518362-5">}</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;sensitive&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as:sensitive&quot;</span><span class="w">
    </span><span class="p" data-group-id="9046518362-3">}</span><span class="w">
  </span><span class="p" data-group-id="9046518362-2">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;attachment&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-6">[</span><span class="p" data-group-id="9046518362-6">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;attributedTo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;cc&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-7">[</span><span class="p" data-group-id="9046518362-7">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;p&gt;‚ÄúTo oppose something is to maintain it... You must go somewhere else; you must have another goal; then you walk a different road.‚Äù &lt;br/&gt; ‚Äï Ursula K. Le Guin&lt;/p&gt;&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/objects/01K5EX3HRWJEY51JYK40JFT0MD&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;indexable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;interactionPolicy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-8">{</span><span class="w">
    </span><span class="nt">&quot;canAnnounce&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-9">{</span><span class="nt">&quot;automaticApproval&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-10">[</span><span class="s2">&quot;https://www.w3.org/ns/activitystreams#Public&quot;</span><span class="p" data-group-id="9046518362-10">]</span><span class="p" data-group-id="9046518362-9">}</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;canLike&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-11">{</span><span class="nt">&quot;automaticApproval&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-12">[</span><span class="s2">&quot;https://www.w3.org/ns/activitystreams#Public&quot;</span><span class="p" data-group-id="9046518362-12">]</span><span class="p" data-group-id="9046518362-11">}</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;canQuote&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-13">{</span><span class="w">
      </span><span class="nt">&quot;automaticApproval&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-14">[</span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example&quot;</span><span class="p" data-group-id="9046518362-14">]</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;manualApproval&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-15">[</span><span class="s2">&quot;https://www.w3.org/ns/activitystreams#Public&quot;</span><span class="p" data-group-id="9046518362-15">]</span><span class="w">
    </span><span class="p" data-group-id="9046518362-13">}</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;canReply&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-16">{</span><span class="nt">&quot;automaticApproval&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-17">[</span><span class="s2">&quot;https://www.w3.org/ns/activitystreams#Public&quot;</span><span class="p" data-group-id="9046518362-17">]</span><span class="p" data-group-id="9046518362-16">}</span><span class="w">
  </span><span class="p" data-group-id="9046518362-8">}</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;published&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-09-18T17:14:13.148Z&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;sensitive&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-18">{</span><span class="w">
    </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;‚ÄúTo oppose something is to maintain it... You must go somewhere else; you must have another goal; then you walk a different road.‚Äù </span><span class="se">\n</span><span class="s2"> ‚Äï Ursula K. Le Guin&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;mediaType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text/markdown&quot;</span><span class="w">
  </span><span class="p" data-group-id="9046518362-18">}</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-19">[</span><span class="p" data-group-id="9046518362-19">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9046518362-20">[</span><span class="s2">&quot;https://www.w3.org/ns/activitystreams#Public&quot;</span><span class="p" data-group-id="9046518362-20">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Note&quot;</span><span class="w">
</span><span class="p" data-group-id="9046518362-1">}</span></code></pre><h6>Example: Outgoing Actor with Profile Fields</h6><pre><code class="makeup json" translate="no"><span class="p" data-group-id="3776999893-1">{</span><span class="w">
  </span><span class="nt">&quot;@context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-2">[</span><span class="w">
    </span><span class="s2">&quot;https://www.w3.org/ns/activitystreams&quot;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3776999893-3">{</span><span class="w">
      </span><span class="nt">&quot;@language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;en&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;alsoKnownAs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-4">{</span><span class="nt">&quot;@id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as:alsoKnownAs&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;@id&quot;</span><span class="p" data-group-id="3776999893-4">}</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;manuallyApprovesFollowers&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as:manuallyApprovesFollowers&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;movedTo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as:movedTo&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;sensitive&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;as:sensitive&quot;</span><span class="w">
    </span><span class="p" data-group-id="3776999893-3">}</span><span class="w">
  </span><span class="p" data-group-id="3776999893-2">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;alsoKnownAs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-5">[</span><span class="s2">&quot;https://sunbeam.city/users/example&quot;</span><span class="p" data-group-id="3776999893-5">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;attachment&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-6">[</span><span class="w">
    </span><span class="p" data-group-id="3776999893-7">{</span><span class="w">
      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;website&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PropertyValue&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;a rel=</span><span class="se">\&quot;</span><span class="s2">me</span><span class="se">\&quot;</span><span class="s2"> href=</span><span class="se">\&quot;</span><span class="s2">https://bonfirenetworks.org</span><span class="se">\&quot;</span><span class="s2">&gt;https://bonfirenetworks.org&lt;/a&gt;&quot;</span><span class="w">
    </span><span class="p" data-group-id="3776999893-7">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3776999893-8">{</span><span class="w">
      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;liberapay&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PropertyValue&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;a rel=</span><span class="se">\&quot;</span><span class="s2">me</span><span class="se">\&quot;</span><span class="s2"> href=</span><span class="se">\&quot;</span><span class="s2">https://bonfire.cafe/pub/objects/01K1D97DXFJJ91BYP1WBR71V1A</span><span class="se">\&quot;</span><span class="s2">&gt;https://bonfire.cafe/pub/objects/01K1D97DXFJJ91BYP1WBR71V1A&lt;/a&gt;&quot;</span><span class="w">
    </span><span class="p" data-group-id="3776999893-8">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3776999893-9">{</span><span class="w">
      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;link&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PropertyValue&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;a rel=</span><span class="se">\&quot;</span><span class="s2">me</span><span class="se">\&quot;</span><span class="s2"> href=</span><span class="se">\&quot;</span><span class="s2">https://bonfire.cafe/pub/objects/01K1D967YP3G7FACGAPF61Z80Q</span><span class="se">\&quot;</span><span class="s2">&gt;https://bonfire.cafe/pub/objects/01K1D967YP3G7FACGAPF61Z80Q&lt;/a&gt;&quot;</span><span class="w">
    </span><span class="p" data-group-id="3776999893-9">}</span><span class="w">
  </span><span class="p" data-group-id="3776999893-6">]</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;discoverable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;endpoints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-10">{</span><span class="w">
    </span><span class="nt">&quot;oauthAuthorizationEndpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/oauth/authorize&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;oauthRegistrationEndpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/api/v1/apps&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;oauthTokenEndpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/oauth/token&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;sharedInbox&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/shared_inbox&quot;</span><span class="w">
  </span><span class="p" data-group-id="3776999893-10">}</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;followers&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example/followers&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;following&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example/following&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-11">{</span><span class="w">
    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Image&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/files/redir/local/data/uploads/01JSC2WAV3P752DW3W0H3847DP/icons/01JSHVHQ5ZNHM95QEKXRW6BN46.png&quot;</span><span class="w">
  </span><span class="p" data-group-id="3776999893-11">}</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-12">{</span><span class="w">
    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Image&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/images/bonfires.png&quot;</span><span class="w">
  </span><span class="p" data-group-id="3776999893-12">}</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;inbox&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example/inbox&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;indexable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Example User&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;outbox&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example/outbox&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;preferredUsername&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;example&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;publicKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3776999893-13">{</span><span class="w">
    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example#main-key&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;publicKeyPem&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-----BEGIN PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">...snip...</span><span class="se">\n</span><span class="s2">-----END PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">&quot;</span><span class="w">
  </span><span class="p" data-group-id="3776999893-13">}</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;p&gt;Tending to @bonfire@bonfire.cafe üî•&lt;/p&gt;&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Person&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;updated&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-09-25T10:09:52.379596&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bonfire.cafe/pub/actors/example&quot;</span><span class="w">
</span><span class="p" data-group-id="3776999893-1">}</span></code></pre><h2 id="5-federation-flows" class="section-heading"><a href="#5-federation-flows" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">5. Federation Flows</span></h2><p>Bonfire federates content and activities using the <a href="#activitypub">ActivityPub</a> protocol, following the same general flows as other major Fediverse platforms.</p><h3 id="outgoing-federation" class="section-heading"><a href="#outgoing-federation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Outgoing Federation</span></h3><p>When a user or app extension triggers an action (such as creating, updating, or deleting content), Bonfire:</p><ul><li>Checks boundaries and federation settings to determine if the content should be federated (see <a href="#9-access-control">Access Control</a>).</li><li>Serializes the object/activity into ActivityStreams JSON, including all required addressing fields (<code class="inline">to</code>, <code class="inline">bto</code>, etc. taking circles, follow status, boundaries and blocks into account).</li><li>Queues the activity for delivery to remote recipients' inboxes, batching deliveries to the same instance when possible (sending them to the <a href="#shared-inbox">shared inbox</a> if one declared is declared in recipients' <code class="inline">Actor</code> object, in which case the addressing fields should be used by recipient instances to determine who to deliver it to).</li><li>Signs all outgoing requests with HTTP signatures (<a href="#http-signature">HTTP Signature</a>).</li></ul><p>Common outgoing activities include:</p><ul><li><code class="inline">Create</code> (new posts, replies, etc.)</li><li><code class="inline">Update</code> (edits to posts or profiles)</li><li><code class="inline">Delete</code> (removal of posts or profiles)</li><li><code class="inline">Follow</code>, <code class="inline">Accept</code>, <code class="inline">Reject</code>, <code class="inline">Undo</code>, <code class="inline">Like</code>, <code class="inline">Announce</code>, <code class="inline">Flag</code>, <code class="inline">Block</code>, <code class="inline">Move</code>, and others as supported by extensions.</li></ul><h3 id="incoming-federation" class="section-heading"><a href="#incoming-federation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Incoming Federation</span></h3><p>When Bonfire receives an activity from a remote instance:</p><ul><li>Validates the HTTP signature and checks the sender's domain and actor (see <a href="#9-access-control">Access Control</a>). If no valid signature is verified, it attempts to re-fetch the canonical object and processes that instead.</li><li>Parses, validates and transforms the activity data against a standardized version of the ActivityStreams vocabulary and any supported extensions, and saves the activity/object JSON in the database.</li><li>Passed the activity to active Bonfire extensions for processing: e.g., creates or updates a local objects, adds to feeds, triggers notifications, applies moderation or boundaries.</li><li>Handles errors gracefully, logging and rejecting invalid or unauthorized activities.</li></ul><p>Bonfire supports all standard ActivityPub flows, including:</p><ul><li>Receiving posts, replies, likes, boosts, follows, blocks, reports, and more.</li><li>Handling incoming <code class="inline">Flag</code> activities as moderation reports.</li><li>Processing <code class="inline">Move</code> activities for account migration.</li></ul><h3 id="profile-discovery-and-following" class="section-heading"><a href="#profile-discovery-and-following" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Profile Discovery and Following</span></h3><p>To follow a remote user or resource, Bonfire:</p><ul><li>Performs a <a href="#webfinger">WebFinger</a> lookup to resolve <code class="inline">@username@domain</code> to an ActivityPub actor URI (see <a href="#webfinger-integrating">WebFinger Integration</a> section for details).</li><li>Fetches and validates the actor's profile using a signed GET request.</li><li>Sends a <code class="inline">Follow</code> activity to the remote actor's inbox.</li><li>Handles <code class="inline">Accept</code> or <code class="inline">Reject</code> responses to update the local following state.</li></ul><h3 id="example-flows" class="section-heading"><a href="#example-flows" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Flows</span></h3><ul><li><strong>Status federation:</strong> A user creates a post, which is serialized as a <code class="inline">Create</code> activity with a <code class="inline">Note</code> object and delivered to the appropriate remote inboxes.</li><li><strong>Profile federation:</strong> Profile updates, follows, and blocks are federated as <code class="inline">Update</code>, <code class="inline">Follow</code>, <code class="inline">Block</code>, etc., activities.</li></ul><blockquote><p>For more details on the federation pipeline and extension points, see <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a>.</p></blockquote><h2 id="6-webfinger-integration" class="section-heading"><a href="#6-webfinger-integration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">6. WebFinger Integration</span></h2><p>Bonfire implements the <a href="#webfinger">WebFinger</a> protocol for user and resource discovery, enabling remote servers to resolve <code class="inline">@username@domain</code> identifiers to canonical ActivityPub actor URIs. This is a key part of <a href="#profile-discovery-and-following">profile discovery and following</a>.</p><ul><li><strong>Endpoint:</strong> <code class="inline">https://your.bonfire.instance/.well-known/webfinger</code></li><li><strong>Query parameter:</strong> <code class="inline">resource=acct:username@domain</code></li></ul><p>A typical WebFinger response includes:</p><ul><li>The <code class="inline">subject</code> field set to the queried account (e.g., <code class="inline">acct:alice@your.bonfire.instance</code>)</li><li>A <code class="inline">self</code> link pointing to the actor's ActivityPub URI</li><li>Optionally, a link to the user's HTML profile</li></ul><p><strong>Example request:</strong></p><pre><code class="makeup elixir" translate="no"><span class="nc">GET</span><span class="w"> </span><span class="o">/</span><span class="o">.</span><span class="n">well</span><span class="o">-</span><span class="n">known</span><span class="o">/</span><span class="n">webfinger?</span><span class="n">resource</span><span class="o">=</span><span class="n">acct</span><span class="nc">:alice@your</span><span class="o">.</span><span class="n">bonfire</span><span class="o">.</span><span class="n">instance</span><span class="w">
</span><span class="ss">Accept</span><span class="p">:</span><span class="w"> </span><span class="n">application</span><span class="o">/</span><span class="n">jrd</span><span class="o">+</span><span class="n">json</span></code></pre><p><strong>Example response:</strong></p><pre><code class="makeup json" translate="no"><span class="p" data-group-id="3345552039-1">{</span><span class="w">
  </span><span class="nt">&quot;subject&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;acct:alice@your.bonfire.instance&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;links&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3345552039-2">[</span><span class="w">
    </span><span class="p" data-group-id="3345552039-3">{</span><span class="w">
      </span><span class="nt">&quot;rel&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;self&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/activity+json&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://your.bonfire.instance/pub/actors/alice&quot;</span><span class="w">
    </span><span class="p" data-group-id="3345552039-3">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3345552039-4">{</span><span class="w">
      </span><span class="nt">&quot;rel&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://webfinger.net/rel/profile-page&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text/html&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://your.bonfire.instance/@alice&quot;</span><span class="w">
    </span><span class="p" data-group-id="3345552039-4">}</span><span class="w">
  </span><span class="p" data-group-id="3345552039-2">]</span><span class="w">
</span><span class="p" data-group-id="3345552039-1">}</span></code></pre><p><strong>Interop requirements:</strong></p><ul><li>The <code class="inline">rel=self</code> link must point to the canonical ActivityPub actor URI.</li><li>The <code class="inline">subject</code> must match the queried account.</li><li>The endpoint must respond with the correct content type (<code class="inline">application/jrd+json</code>).</li></ul><p><strong>Common pitfalls:</strong></p><ul><li>Incorrect or missing <code class="inline">rel=self</code> link.</li><li>Mismatched <code class="inline">subject</code> field.</li><li>Not supporting both <code class="inline">application/jrd+json</code> and <code class="inline">application/json</code> Accept headers.</li></ul><blockquote><p>For more on how Bonfire uses WebFinger for profile discovery and following, see <a href="#5-federation-flows">Federation Flows</a>.</p></blockquote><h2 id="7-http-signatures-secure-fetch" class="section-heading"><a href="#7-http-signatures-secure-fetch" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">7. HTTP Signatures &amp; Secure Fetch</span></h2><p>All ActivityPub server-to-server (S2S) requests to Bonfire endpoints should be signed with <a href="#http-signature">HTTP Signatures</a>, including both <code class="inline">GET</code> and <code class="inline">POST</code> requests. Bonfire also signs all outgoing federation requests, following the <a href="https://datatracker.ietf.org/doc/html/draft-cavage-http-signatures" title="HTTP Signatures RFC">Cavage HTTP Signatures RFC</a>, for compatibility with Mastodon, GoToSocial, Pixelfed, and others.</p><h3 id="requirements" class="section-heading"><a href="#requirements" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Requirements</span></h3><ul><li><strong>Signature required:</strong> By default, all S2S requests (including fetches of public resources) must include a valid HTTP signature. </li><li><strong>Supported algorithms:</strong> Bonfire supports <code class="inline">rsa-sha256</code> and <code class="inline">ed25519</code> (and others as per the RFC).</li><li><strong>Key discovery:</strong> The public key for a Bonfire actor is published in the actor's ActivityPub JSON under the <code class="inline">publicKey</code> property.</li><li><strong>Signature headers:</strong> Outgoing requests include the required headers (<code class="inline">(request-target)</code>, <code class="inline">host</code>, <code class="inline">date</code>, and <code class="inline">digest</code> for <code class="inline">POST</code>).</li></ul><h3 id="quirks-and-compatibility" class="section-heading"><a href="#quirks-and-compatibility" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quirks and Compatibility</span></h3><ul><li><strong>Query parameters:</strong> Bonfire signs requests including query parameters in the signature string, but will attempt validation both with and without query parameters for compatibility with other implementations (such as Mastodon and GoToSocial). This ensures that signed requests for paginated collections or other endpoints with query parameters are accepted regardless of the remote implementation's signature handling.</li><li><strong>keyId format:</strong> Bonfire uses the fragment format for <code class="inline">keyId</code> (e.g., <code class="inline">https://your.bonfire.instance/pub/actors/alice#main-key</code>), matching Mastodon and most other platforms.</li><li><strong>Public key endpoint:</strong> The <code class="inline">keyId</code> in the signature header should match the <code class="inline">id</code> of the <code class="inline">publicKey</code> object in the actor's JSON.</li></ul><h3 id="secure-fetch" class="section-heading"><a href="#secure-fetch" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Secure Fetch</span></h3><p>By default, Bonfire requires signed <code class="inline">GET</code> requests for fetching actor and object JSON at ActivityPub endpoints (e.g., <code class="inline">/pub/actors/{username}</code>, <code class="inline">/pub/objects/{id}</code>), even for public resources. Unsigned requests to these endpoints may be rejected with HTTP 401. This is equivalent to Mastodon's &quot;secure mode&quot; and helps prevent abuse and scraping by blocked or defederated instances.</p><p><strong>Configurability:</strong><br/>This behavior can be changed by admins in an instance's configuration, if they want unsigned GETs (to public resources) to be allowed.</p><h3 id="common-pitfalls" class="section-heading"><a href="#common-pitfalls" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Common Pitfalls</span></h3><ul><li>Missing or invalid signature header.</li><li>Using an incorrect <code class="inline">keyId</code> or public key.</li><li>Not including required headers in the signature.</li><li>Not handling both with/without query parameters for signature validation.</li></ul><blockquote><p>For more details, see <a href="https://datatracker.ietf.org/doc/html/draft-cavage-http-signatures" title="HTTP Signatures RFC">HTTP Signatures RFC</a> and <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a>.</p></blockquote><h2 id="8-rate-limiting" class="section-heading"><a href="#8-rate-limiting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">8. Rate Limiting</span></h2><p>Bonfire applies rate limiting to all federation endpoints, including both incoming and outgoing ActivityPub and WebFinger requests.</p><h3 id="incoming-federation-endpoints" class="section-heading"><a href="#incoming-federation-endpoints" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Incoming Federation Endpoints</span></h3><p>Federation endpoints are rate limited per IP address. If the rate limit is exceeded, Bonfire responds with HTTP status <code class="inline">429 Too Many Requests</code> and a <code class="inline">Retry-After</code> header indicating when to retry. The default rate limits can be configured by the instance admin. Rate limited endpoints include:</p><ul><li><strong>Inbox / Shared Inbox:</strong>  Incoming POST requests to inbox endpoints</li><li><strong>GET requests for Actor and Object</strong> endpoints (e.g. <code class="inline">/pub/actors/{username}</code> and <code class="inline">/pub/objects/{id}</code>)</li><li><strong>WebFinger:</strong>  Incoming GET requests to the WebFinger endpoint</li></ul><h3 id="outgoing-federation-requests" class="section-heading"><a href="#outgoing-federation-requests" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Outgoing Federation Requests</span></h3><ul><li><strong>Outgoing HTTP requests</strong> (to remote servers) also support rate limiting and include retry logic. If a remote server responds with <code class="inline">429 Too Many Requests</code> or <code class="inline">503 Service Unavailable</code>, Bonfire will respect the <code class="inline">Retry-After</code> header and automatically retry after the indicated delay.</li></ul><h3 id="http-status-codes-and-headers" class="section-heading"><a href="#http-status-codes-and-headers" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">HTTP Status Codes and Headers</span></h3><ul><li><code class="inline">429 Too Many Requests</code>: Returned when the rate limit is exceeded.</li><li><code class="inline">503 Service Unavailable</code>: May be returned by remote servers; Bonfire will retry as appropriate.</li><li><code class="inline">Retry-After</code>: Indicates how many seconds to wait before retrying.</li></ul><h3 id="interop-notes" class="section-heading"><a href="#interop-notes" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Interop Notes</span></h3><ul><li>Remote servers should respect <code class="inline">Retry-After</code> headers and avoid retrying requests too quickly.</li><li>If you receive a <code class="inline">429</code> from Bonfire, wait the indicated time before retrying.</li><li>Rate limits are applied per IP and per endpoint.</li></ul><blockquote><p>For more details, see the <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a>.</p></blockquote><h2 id="9-moderation-flagging-and-blocking" class="section-heading"><a href="#9-moderation-flagging-and-blocking" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">9. Moderation, Flagging, and Blocking</span></h2><p>Bonfire provides robust moderation tools and supports federated moderation activities to help maintain healthy communities and enforce local policies.</p><h3 id="blocking" class="section-heading"><a href="#blocking" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Blocking</span></h3><p>Bonfire supports several types of blocks, each with distinct effects:</p><ul><li><p><strong>Ghost block</strong>: The blocked user is prevented from seeing or interacting with you or your content on your instance:</p><ul><li>Private posts and activities are never delivered to ghosted users.</li><li>Public posts may still be visible to ghosted users on remote instance or via public instance web views.</li><li>Ghosted users cannot follow, mention, or message you, and you cannot mention or message them.</li><li>Undoing a ghost block is possible, but missed activities are not retroactively delivered.</li><li>Instance admins can enforce ghost blocks globally, preventing a user from seeing or interacting with any local users.</li></ul></li><li><p><strong>Silence</strong>: You stop seeing content from the silenced user:</p><ul><li>Their posts and activities are filtered from your feeds and notifications.</li><li>You can still view their profile or posts via direct links.</li><li>You won't see mentions or messages from them, and you cannot follow them.</li><li>Undoing a silence is possible, but missed activities are not retroactively restored.</li><li>Instance admins can silence a user for all local users, hiding their content from all local feeds.</li></ul></li><li><p><strong>Full block</strong>: All of the above.</p></li><li><p><strong>Instance-level blocks (defederation)</strong>: Admins can block entire domains, preventing all federation with those instances.</p></li></ul><p>All block types are enforced at the boundaries level and affect both incoming and outgoing federation as appropriate.</p><h3 id="flagging-reporting" class="section-heading"><a href="#flagging-reporting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Flagging (Reporting)</span></h3><ul><li><strong>Flag activities:</strong>  <ul><li>Bonfire supports the ActivityStreams <code class="inline">Flag</code> activity for reporting users, posts, or other objects for moderation.</li><li>Incoming <code class="inline">Flag</code> activities from remote instances are processed as moderation reports and routed to moderators.</li><li>Outgoing <code class="inline">Flag</code> activities are federated to remote instances' <a href="#shared-inbox">shared inbox</a> when a user reports content originating elsewhere.</li></ul></li><li><strong>Moderation workflow:</strong>  <ul><li>Reports can be reviewed, actioned, or dismissed by moderators. Actions may include warning, silencing, blocking, labeling, editing, or deleting content or accounts.</li></ul></li></ul><h3 id="moderation-activities" class="section-heading"><a href="#moderation-activities" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Moderation Activities</span></h3><p>Bonfire does not send <code class="inline">Block</code> activities for S2S federation, but does apply incoming blocks as appropriate. Moderation is mostly handled through Bonfire's boundaries functionality, and the <code class="inline">Flag</code> activity for reporting, which are processed as moderation reports and placed in instance moderators' queue.</p><h4>Account Migration</h4><p>Bonfire supports account migration using the <code class="inline">Move</code> activity, and the <code class="inline">alsoKnownAs</code> and <code class="inline">movedTo</code> properties on actors. Migration is only considered valid if both accounts reference each other via <code class="inline">alsoKnownAs</code>. On receiving a valid <code class="inline">Move</code>, Bonfire will redirect followers to the new account and update local state accordingly.</p><h3 id="interop-notes-1" class="section-heading"><a href="#interop-notes-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Interop Notes</span></h3><ul><li>Remote instances can expect Bonfire to process incoming <code class="inline">Flag</code> activities according to local moderation policy.</li><li>Bonfire federates moderation actions as appropriate, including <code class="inline">Flag</code>, <code class="inline">Update</code>, and <code class="inline">Delete</code> activities.</li><li>Bonfire follows the ActivityPub and ActivityStreams conventions for moderation activities, ensuring compatibility with major implementations.</li></ul><blockquote><p>For more details, see <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a> and the <a href="https://www.w3.org/TR/activitypub/" title="ActivityPub Specification">ActivityStreams Spec</a> for <code class="inline">Flag</code> activities.</p></blockquote><h2 id="10-circles-boundaries-interaction-policies" class="section-heading"><a href="#10-circles-boundaries-interaction-policies" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">10. Circles, Boundaries &amp; Interaction Policies</span></h2><p>Bonfire provides advanced privacy and interaction controls, supporting both standard ActivityPub audience fields and newer proposals like <a href="https://w3id.org/fep/044f" title="FEP-044f: Consent-respecting Quote Posts">FEP-044f</a> for interaction policies.</p><h3 id="circles-and-boundaries" class="section-heading"><a href="#circles-and-boundaries" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Circles and Boundaries</span></h3><ul><li><strong>Circles</strong> in Bonfire are flexible audience groups (similar to &quot;circles&quot; or &quot;lists&quot; in other platforms), used to define custom sharing boundaries for posts and activities.</li><li><strong>Boundaries</strong> are Bonfire's mechanism for enforcing privacy, collaboration permission, and blocks. They determine who can see, interact with, or receive a given activity.</li><li>When federating, Bonfire always maps circles and boundaries to ActivityPub addressing fields (in <code class="inline">bto</code> or <code class="inline">bcc</code>) as appropriate. Circles are not federated as named groups; only the resolved list of recipients is included in the addressing fields.</li><li>Remote instances will only see the addressing fields, not the internal circle names or membership. Circle membership is not exposed to other users or to remote servers by default.</li></ul><h3 id="interaction-policies" class="section-heading"><a href="#interaction-policies" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Interaction Policies</span></h3><ul><li>Bonfire supports <a href="https://w3id.org/fep/044f" title="FEP-044f: Consent-respecting Quote Posts">FEP-044f</a> and related proposals for fine-grained interaction control.</li><li>Posts and objects can include an <code class="inline">interactionPolicy</code> property, specifying who can like, reply, announce, or quote.</li><li>Sub-policies include <code class="inline">canLike</code>, <code class="inline">canReply</code>, <code class="inline">canAnnounce</code>, and <code class="inline">canQuote</code>, each with <code class="inline">automaticApproval</code> and optionally <code class="inline">manualApproval</code> fields.</li><li>Bonfire includes <code class="inline">interactionPolicy</code> <a href="https://docs.gotosocial.org/en/latest/federation/interaction_policy/" title="Interaction Policy as defined by GoToSocial">15</a> on outgoing posts when appropriate. This property is intended as an FYI for remote instances, so they can disable or hide actions in their UI (and avoid users enacting interactions that will not be properly federated to their intended recipients but could still seen by users of their own instance). </li><li>Bonfire will always enforce these policies, e.g. if a remote instance does not support or respect <code class="inline">interactionPolicy</code>, Bonfire will still reject any incoming interaction (reply, like, announce, etc) that violates the policy.</li></ul><h3 id="approval-flows" class="section-heading"><a href="#approval-flows" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Approval Flows</span></h3><ul><li>Both automatic and manual approval flows are supported for local and remote users.</li><li>When a remote user attempts an interaction that requires manual approval, Bonfire federates a pending request and responds with <code class="inline">Accept</code> or <code class="inline">Reject</code> activities as appropriate, following <a href="https://w3id.org/fep/044f" title="FEP-044f: Consent-respecting Quote Posts">FEP-044f</a>.</li><li>The <code class="inline">approvedBy</code> property is used to indicate explicit approval by the post author, and Bonfire supports both auto-accept and manual approval flows.</li></ul><h3 id="interop-notes-2" class="section-heading"><a href="#interop-notes-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Interop Notes</span></h3><ul><li>Remote servers that do not support <code class="inline">interactionPolicy</code> will fall back to default ActivityPub behavior (anyone who can see a post can interact with it), but Bonfire will still enforce its policies and reject unauthorized interactions.</li><li>Bonfire will respect incoming <code class="inline">interactionPolicy</code> properties from remote posts, enforcing restrictions locally.</li><li>Audience enforcement is always based on both addressing fields and interaction policies.</li></ul><blockquote><p>For more details, see <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a> and <a href="https://docs.gotosocial.org/en/latest/federation/interaction_policy/" title="Interaction Policy as defined by GoToSocial">15</a>.</p></blockquote><h2 id="11-testing-debugging" class="section-heading"><a href="#11-testing-debugging" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">11. Testing &amp; Debugging</span></h2><p>Testing and debugging federation with Bonfire requires understanding ActivityPub S2S flows, HTTP signatures, and proper request formatting.</p><h3 id="required-headers" class="section-heading"><a href="#required-headers" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Required Headers</span></h3><ul><li><code class="inline">Accept</code>: Use <code class="inline">application/activity+json</code> or <code class="inline">application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;</code> for ActivityPub endpoints.</li><li><code class="inline">Signature</code>: All S2S requests should be signed (see <a href="#7-http-signatures--secure-fetch">HTTP Signatures</a>), unless the instance accepts non-signed requests for public objects.</li><li><a href="https://hexdocs.pm/elixir/Date.html"><code class="inline">Date</code></a>: Required for signature validation.</li><li><code class="inline">Digest</code>: Required for signed POST requests.</li></ul><p><strong>Note:</strong> All example curl commands below assume you will include the required headers if needed, including a valid <code class="inline">Signature</code> header.</p><h3 id="example-curl-commands" class="section-heading"><a href="#example-curl-commands" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example curl commands</span></h3><p><strong>Fetch a remote actor (signed GET):</strong></p><pre><code class="makeup sh" translate="no"><span class="">curl -H &quot;Accept: application/activity+json&quot; \
</span><span class="">     -H &quot;Date: $(date -u +&#39;%a, %d %b %Y %H:%M:%S GMT&#39;)&quot; \
</span><span class="">     https://a.bonfire.instance/pub/actors/alice
</span></code></pre><p><strong>Fetch a remote object (signed GET):</strong></p><pre><code class="makeup sh" translate="no"><span class="">curl -H &quot;Accept: application/activity+json&quot; \
</span><span class="">     -H &quot;Date: $(date -u +&#39;%a, %d %b %Y %H:%M:%S GMT&#39;)&quot; \
</span><span class="">     https://a.bonfire.instance/pub/objects/01H8ZK2YXP9QCT5BE1JWQSAM3B6
</span></code></pre><p><strong>Send an activity to an inbox (signed POST):</strong></p><pre><code class="makeup sh" translate="no"><span class="">curl -X POST \
</span><span class="">     -H &quot;Accept: application/activity+json&quot; \
</span><span class="">     -H &quot;Content-Type: application/activity+json&quot; \
</span><span class="">     -H &quot;Date: $(date -u +&#39;%a, %d %b %Y %H:%M:%S GMT&#39;)&quot; \
</span><span class="">     -H &quot;Digest: SHA-256=...&quot; \
</span><span class="">     --data-binary @activity.json \
</span><span class="">     https://a.bonfire.instance/pub/actors/alice/inbox
</span></code></pre><p><strong>WebFinger lookup (no signature required):</strong></p><pre><code class="makeup sh" translate="no"><span class="">curl -H &quot;Accept: application/jrd+json&quot; \
</span><span class="">     &quot;https://a.bonfire.instance/.well-known/webfinger?resource=acct:alice@your.bonfire.instance&quot;
</span></code></pre><h3 id="debugging-tips" class="section-heading"><a href="#debugging-tips" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Debugging Tips</span></h3><ul><li>Check for required headers (eg <code class="inline">Signature</code>) and correct content types.</li><li>Use verbose curl output (<code class="inline">-v</code>) to inspect HTTP status codes and headers.</li><li>Check logs for signature validation errors, rate limiting (<code class="inline">429</code>), or access control (<code class="inline">403</code>).</li><li>Inspect the job queues for stuck or failed federation jobs. Bonfire users can view their federation queue at <code class="inline">/settings/user/federation_status</code>.</li></ul><h3 id="troubleshooting-common-issues" class="section-heading"><a href="#troubleshooting-common-issues" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Troubleshooting Common Issues</span></h3><ul><li><strong>401 Unauthorized</strong>: Missing or invalid HTTP signature.</li><li><strong>403 Forbidden</strong>: Blocked by boundaries, blocks, or instance defederation.</li><li><strong>429 Too Many Requests</strong>: Rate limit exceeded; check <code class="inline">Retry-After</code> header.</li><li><strong>406 Not Acceptable</strong>: Incorrect <code class="inline">Accept</code> or <code class="inline">Content-Type</code> header.</li><li><strong>422 Unprocessable Entity</strong>: Malformed activity or object.</li><li><strong>503 Service Unavailable</strong>: Remote server is down or overloaded.</li></ul><blockquote><p>For more details, see <a href="https://docs.bonfirenetworks.org/TODO" title="Bonfire ActivityPub Implementation Docs">Bonfire ActivityPub Implementation Docs</a> and the <a href="https://www.w3.org/TR/activitypub/" title="ActivityPub Specification">ActivityPub Spec</a>.</p></blockquote><!--## 12. Compatibility Notes- Known quirks with Mastodon [3], Pixelfed, GoToSocial [8], etc.- Supported/not-currently-supported ActivityStreams extensions [1], [3]- JSON-LD context handling- HTML sanitization [3]## 13. Quirks & Gotchas- Known interop issues and edge cases- Differences from Mastodon [3], GtS [8], etc.- Common pitfalls for implementers## 14. FAQ / Troubleshooting- Common issues and solutions- Contact/support links--><h2 id="15-glossary" class="section-heading"><a href="#15-glossary" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">15. Glossary</span></h2><h3 id="activitypub" class="section-heading"><a href="#activitypub" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">ActivityPub</span></h3><p>A decentralized social networking protocol based on the ActivityStreams data format. <a href="https://www.w3.org/TR/activitypub/" title="ActivityPub Specification">1</a></p><h3 id="activitystreams" class="section-heading"><a href="#activitystreams" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">ActivityStreams</span></h3><p>A model/data format for representing potential and completed activities using JSON. <a href="https://www.w3.org/TR/activitystreams-core/" title="ActivityStreams 2.0 Core Syntax">11</a></p><h3 id="actor" class="section-heading"><a href="#actor" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Actor</span></h3><p>An ActivityStreams object capable of performing activities (e.g., Person, Group, Service). <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="dereference" class="section-heading"><a href="#dereference" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Dereference</span></h3><p>To fetch the ActivityStreams representation of a resource (e.g., actor or object) by making an HTTP request to its canonical URI.</p><h3 id="webfinger" class="section-heading"><a href="#webfinger" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">WebFinger</span></h3><p>A protocol for resolving user identifiers (e.g., <code class="inline">@user@domain</code>) to canonical profile URIs. <a href="https://datatracker.ietf.org/doc/html/rfc7033" title="WebFinger RFC">2</a></p><h3 id="fep" class="section-heading"><a href="#fep" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">FEP</span></h3><p>Fediverse Enhancement Proposal, a community process for proposing and documenting protocol extensions. <a href="https://codeberg.org/fediverse/fep" title="Fediverse Enhancement Proposals (FEPs)">4</a></p><h3 id="http-signature" class="section-heading"><a href="#http-signature" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">HTTP Signature</span></h3><p>A cryptographic signature for HTTP requests, used to authenticate and authorize ActivityPub S2S messages. <a href="https://datatracker.ietf.org/doc/html/draft-cavage-http-signatures" title="HTTP Signatures RFC">10</a></p><h3 id="inbox" class="section-heading"><a href="#inbox" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inbox</span></h3><p>Endpoint on an actor for receiving activities.</p><h3 id="outbox" class="section-heading"><a href="#outbox" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Outbox</span></h3><p>Endpoint on an actor for publishing activities.</p><h3 id="public-uri" class="section-heading"><a href="#public-uri" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Public URI</span></h3><p>The special URI <code class="inline">https://www.w3.org/ns/activitystreams#Public</code> used to indicate public addressing.</p><h3 id="mrf" class="section-heading"><a href="#mrf" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">MRF</span></h3><p>Message Rewrite Facility, a policy system for filtering or modifying federated activities.</p><h3 id="boundary" class="section-heading"><a href="#boundary" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Boundary</span></h3><p>Bonfire‚Äôs mechanism for enforcing privacy, blocks, and audience restrictions.</p><h3 id="peered" class="section-heading"><a href="#peered" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Peered</span></h3><p>A mapping between a local object and its canonical URI.</p><h3 id="canonical-uri" class="section-heading"><a href="#canonical-uri" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Canonical URI</span></h3><p>An activty, object or actor's <code class="inline">id</code>: an authoritative, globally unique URI.</p><h3 id="flag" class="section-heading"><a href="#flag" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Flag</span></h3><p>The ActivityStreams activity type for reporting moderation issues.</p><h3 id="interaction-policy" class="section-heading"><a href="#interaction-policy" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Interaction Policy</span></h3><p>A set of rules (e.g., canLike, canReply) governing who can interact with a post. <a href="https://docs.gotosocial.org/en/latest/federation/interaction_policy/" title="Interaction Policy as defined by GoToSocial">15</a></p><h3 id="instance" class="section-heading"><a href="#instance" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Instance</span></h3><p>A single deployment of a federated server (e.g., a Bonfire, Mastodon, or GtS server).</p><h3 id="shared-inbox" class="section-heading"><a href="#shared-inbox" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Shared Inbox</span></h3><p>An endpoint for batching delivery of activities to multiple actors on the same instance. <a href="https://www.w3.org/TR/activitypub/#shared-inbox-delivery" title="Shared Inbox Delivery in ActivityPub">14</a></p><h3 id="tombstone" class="section-heading"><a href="#tombstone" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Tombstone</span></h3><p>An object indicating that a resource (e.g., a post or actor) has been deleted.</p><h3 id="hashtag" class="section-heading"><a href="#hashtag" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Hashtag</span></h3><p>An ActivityStreams extension representing a topic tag.</p><h3 id="emoji" class="section-heading"><a href="#emoji" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Emoji</span></h3><p>An ActivityStreams extension representing a custom emoji.</p><h3 id="propertyvalue" class="section-heading"><a href="#propertyvalue" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">PropertyValue</span></h3><p>A <a href="https://schema.org/PropertyValue">schema.org</a> extension for profile metadata fields.</p><h3 id="create" class="section-heading"><a href="#create" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Create</span></h3><p>The ActivityStreams activity type for creating an object. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="update" class="section-heading"><a href="#update" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Update</span></h3><p>The ActivityStreams activity type for updating an object. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="delete" class="section-heading"><a href="#delete" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Delete</span></h3><p>The ActivityStreams activity type for deleting an object. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="accept" class="section-heading"><a href="#accept" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Accept</span></h3><p>The ActivityStreams activity type for accepting an activity. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="reject" class="section-heading"><a href="#reject" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Reject</span></h3><p>The ActivityStreams activity type for rejecting an activity. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="note" class="section-heading"><a href="#note" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Note</span></h3><p>An ActivityStreams object type representing a short-form post. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><h3 id="article" class="section-heading"><a href="#article" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Article</span></h3><p>An ActivityStreams object type representing a long-form post. <a href="https://www.w3.org/TR/activitystreams-vocabulary/" title="ActivityStreams 2.0 Vocabulary">12</a></p><!-- ## 17. References -->

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="settings_system.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ‚Üê Previous Page
        </span>
        <span class="title">
Bonfire Settings System Documentation
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="Bonfire.API.Graphql.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page ‚Üí
        </span>
        <span class="title">
Bonfire.API.GraphQL
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Bonfire.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.4) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
