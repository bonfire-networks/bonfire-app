<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.4">
    <meta name="project" content="Bonfire v1.0.0-social-rc.3">


    <title>How to Add a New Feed Preset in Bonfire — Bonfire v1.0.0-social-rc.3</title>

    <link rel="stylesheet" href="dist/html-elixir-RLZO5U2C.css" />

    <script defer src="dist/sidebar_items-06E5548C.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-Y223O6DN.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://bonfirenetworks.org" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Bonfire" />
        </a>

      <div>
        <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
Bonfire
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0-social-rc.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Bonfire</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>How to Add a New Feed Preset in Bonfire</h1>


      <a href="https://github.com/bonfire-networks/bonfire-app/blob/main/docs/building/HOWTO_add_feed_preset.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p>This guide walks through the process of adding a new feed preset to Bonfire, using the Events feed as an example.</p><h2 id="overview" class="section-heading"><a href="#overview" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Overview</span></h2><p>Feed presets in Bonfire are pre-configured feed definitions that determine:</p><ul><li>What content is displayed</li><li>Who can access the feed</li><li>How the data is loaded and optimized</li><li>UI presentation and navigation</li></ul><h2 id="step-1-locate-the-configuration-file" class="section-heading"><a href="#step-1-locate-the-configuration-file" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 1: Locate the Configuration File</span></h2><p>Feed presets are defined in:</p><pre><code class="makeup elixir" translate="no"><span class="o">/</span><span class="n">extensions</span><span class="o">/</span><span class="n">bonfire_social</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">runtime_config</span><span class="o">.</span><span class="n">ex</span></code></pre><h2 id="step-2-define-the-feed-preset" class="section-heading"><a href="#step-2-define-the-feed-preset" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 2: Define the Feed Preset</span></h2><p>Add your new feed preset to the <code class="inline">feed_presets</code> list in the runtime configuration. Feed presets are defined as a keyword list where the key is the feed's atom identifier.</p><h3 id="basic-structure" class="section-heading"><a href="#basic-structure" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Basic Structure</span></h3><pre><code class="makeup elixir" translate="no"><span class="ss">your_feed_name</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9209291127-1">%{</span><span class="w">
  </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="9209291127-2">(</span><span class="s">&quot;Display Name&quot;</span><span class="p" data-group-id="9209291127-2">)</span><span class="p">,</span><span class="w">
  </span><span class="ss">built_in</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="9209291127-3">(</span><span class="s">&quot;Description of what this feed shows&quot;</span><span class="p" data-group-id="9209291127-3">)</span><span class="p">,</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9209291127-4">%</span><span class="nc" data-group-id="9209291127-4">FeedFilters</span><span class="p" data-group-id="9209291127-4">{</span><span class="w">
    </span><span class="c1"># Filter configuration</span><span class="w">
  </span><span class="p" data-group-id="9209291127-4">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">icon</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;icon-name&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">assigns</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9209291127-5">[</span><span class="w">
    </span><span class="c1"># UI configuration</span><span class="w">
  </span><span class="p" data-group-id="9209291127-5">]</span><span class="w">
</span><span class="p" data-group-id="9209291127-1">}</span></code></pre><h3 id="example-events-feed" class="section-heading"><a href="#example-events-feed" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example: Events Feed</span></h3><pre><code class="makeup elixir" translate="no"><span class="ss">events</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3105382105-1">%{</span><span class="w">
  </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="3105382105-2">(</span><span class="s">&quot;Events&quot;</span><span class="p" data-group-id="3105382105-2">)</span><span class="p">,</span><span class="w">
  </span><span class="ss">built_in</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="3105382105-3">(</span><span class="s">&quot;Events and gatherings&quot;</span><span class="p" data-group-id="3105382105-3">)</span><span class="p">,</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3105382105-4">%</span><span class="nc" data-group-id="3105382105-4">FeedFilters</span><span class="p" data-group-id="3105382105-4">{</span><span class="w">
    </span><span class="ss">feed_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:events</span><span class="p">,</span><span class="w">
    </span><span class="ss">object_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3105382105-5">[</span><span class="s">&quot;Event&quot;</span><span class="p" data-group-id="3105382105-5">]</span><span class="p">,</span><span class="w">  </span><span class="c1"># ActivityPub Event type</span><span class="w">
    </span><span class="ss">exclude_activity_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3105382105-6">[</span><span class="ss">:like</span><span class="p">,</span><span class="w"> </span><span class="ss">:boost</span><span class="p">,</span><span class="w"> </span><span class="ss">:flag</span><span class="p" data-group-id="3105382105-6">]</span><span class="w">
  </span><span class="p" data-group-id="3105382105-4">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">icon</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ph:calendar-blank-bold&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">assigns</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3105382105-7">[</span><span class="w">
    </span><span class="ss">selected_tab</span><span class="p">:</span><span class="w"> </span><span class="ss">:events</span><span class="p">,</span><span class="w">
    </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;events&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">page_title</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="3105382105-8">(</span><span class="s">&quot;Events&quot;</span><span class="p" data-group-id="3105382105-8">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">feedback_title</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="3105382105-9">(</span><span class="s">&quot;No events found&quot;</span><span class="p" data-group-id="3105382105-9">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">feedback_message</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="3105382105-10">(</span><span class="s">&quot;There are no upcoming events to show. Events from other federated platforms like Mobilizon will appear here.&quot;</span><span class="p" data-group-id="3105382105-10">)</span><span class="w">
  </span><span class="p" data-group-id="3105382105-7">]</span><span class="w">
</span><span class="p" data-group-id="3105382105-1">}</span></code></pre><h2 id="step-3-configure-feed-filters" class="section-heading"><a href="#step-3-configure-feed-filters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 3: Configure Feed Filters</span></h2><p>The <code class="inline">FeedFilters</code> struct accepts various filtering options:</p><h3 id="common-filter-options" class="section-heading"><a href="#common-filter-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Common Filter Options</span></h3><ul><li><strong><code class="inline">feed_name</code></strong>: Internal identifier for the feed (typically matches the preset key)</li><li><strong><code class="inline">activity_types</code></strong>: Include only these activity types (e.g., <code class="inline">[:create, :like, :boost]</code>)</li><li><strong><code class="inline">exclude_activity_types</code></strong>: Exclude these activity types</li><li><strong><code class="inline">object_types</code></strong>: Filter by object type (e.g., <code class="inline">[:post]</code>, <code class="inline">[&quot;Event&quot;]</code>)</li><li><strong><code class="inline">exclude_object_types</code></strong>: Exclude specific object types</li><li><strong><code class="inline">subjects</code></strong>: Filter by who performed the activity</li><li><strong><code class="inline">objects</code></strong>: Filter by what was acted upon</li><li><strong><code class="inline">creators</code></strong>: Filter by content creators</li><li><strong><code class="inline">media_types</code></strong>: Filter by media type (e.g., <code class="inline">[&quot;image&quot;, &quot;video&quot;]</code>)</li><li><strong><code class="inline">origin</code></strong>: Filter by origin (<code class="inline">:local</code> or <code class="inline">:remote</code>)</li><li><strong><code class="inline">tags</code></strong>: Filter by hashtags</li><li><strong><code class="inline">time_limit</code></strong>: Limit to content from last N days</li><li><strong><code class="inline">sort_by</code></strong>: Sort order (e.g., <code class="inline">:num_replies</code>)</li><li><strong><code class="inline">sort_order</code></strong>: <code class="inline">:asc</code> or <code class="inline">:desc</code></li></ul><h3 id="example-configurations" class="section-heading"><a href="#example-configurations" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Configurations</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># Media-specific feed</span><span class="w">
</span><span class="ss">images</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-1">%{</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-2">%</span><span class="nc" data-group-id="7263115511-2">FeedFilters</span><span class="p" data-group-id="7263115511-2">{</span><span class="w">
    </span><span class="ss">media_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-3">[</span><span class="s">&quot;image&quot;</span><span class="p" data-group-id="7263115511-3">]</span><span class="w">
  </span><span class="p" data-group-id="7263115511-2">}</span><span class="w">
</span><span class="p" data-group-id="7263115511-1">}</span><span class="w">

</span><span class="c1"># Local content only</span><span class="w">
</span><span class="ss">local_posts</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-4">%{</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-5">%</span><span class="nc" data-group-id="7263115511-5">FeedFilters</span><span class="p" data-group-id="7263115511-5">{</span><span class="w">
    </span><span class="ss">origin</span><span class="p">:</span><span class="w"> </span><span class="ss">:local</span><span class="p">,</span><span class="w">
    </span><span class="ss">object_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-6">[</span><span class="ss">:post</span><span class="p" data-group-id="7263115511-6">]</span><span class="w">
  </span><span class="p" data-group-id="7263115511-5">}</span><span class="w">
</span><span class="p" data-group-id="7263115511-4">}</span><span class="w">

</span><span class="c1"># User-specific activities</span><span class="w">
</span><span class="ss">user_activities</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-7">%{</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-8">%</span><span class="nc" data-group-id="7263115511-8">FeedFilters</span><span class="p" data-group-id="7263115511-8">{</span><span class="w">
    </span><span class="ss">exclude_activity_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-9">[</span><span class="ss">:like</span><span class="p">,</span><span class="w"> </span><span class="ss">:follow</span><span class="p" data-group-id="7263115511-9">]</span><span class="w">
  </span><span class="p" data-group-id="7263115511-8">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">parameterized</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-10">%{</span><span class="ss">subjects</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7263115511-11">[</span><span class="ss">:by</span><span class="p" data-group-id="7263115511-11">]</span><span class="p" data-group-id="7263115511-10">}</span><span class="w">
</span><span class="p" data-group-id="7263115511-7">}</span></code></pre><h2 id="step-4-set-permissions" class="section-heading"><a href="#step-4-set-permissions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 4: Set Permissions</span></h2><p>Configure who can access the feed:</p><ul><li><strong><code class="inline">current_user_required: true</code></strong>: Requires user to be logged in</li><li><strong><code class="inline">instance_permission_required: :permission_name</code></strong>: Requires specific permission (e.g., <code class="inline">:mediate</code>)</li><li><strong><code class="inline">exclude_from_nav: true</code></strong>: Hide from navigation menus</li><li><strong><code class="inline">opts: [include_flags: true]</code></strong>: Additional permission options</li></ul><h2 id="step-5-configure-ui-settings" class="section-heading"><a href="#step-5-configure-ui-settings" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 5: Configure UI Settings</span></h2><p>The <code class="inline">assigns</code> list contains UI-specific settings:</p><pre><code class="makeup elixir" translate="no"><span class="ss">assigns</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0279044112-1">[</span><span class="w">
  </span><span class="ss">selected_tab</span><span class="p">:</span><span class="w"> </span><span class="ss">:your_tab</span><span class="p">,</span><span class="w">           </span><span class="c1"># Tab identifier</span><span class="w">
  </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your_page&quot;</span><span class="p">,</span><span class="w">                 </span><span class="c1"># Page route</span><span class="w">
  </span><span class="ss">page_title</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="0279044112-2">(</span><span class="s">&quot;Page Title&quot;</span><span class="p" data-group-id="0279044112-2">)</span><span class="p">,</span><span class="w">       </span><span class="c1"># Page header</span><span class="w">
  </span><span class="ss">feed_title</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="0279044112-3">(</span><span class="s">&quot;Feed Title&quot;</span><span class="p" data-group-id="0279044112-3">)</span><span class="p">,</span><span class="w">       </span><span class="c1"># Feed section title</span><span class="w">
  </span><span class="ss">feedback_title</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="0279044112-4">(</span><span class="s">&quot;Empty Title&quot;</span><span class="p" data-group-id="0279044112-4">)</span><span class="p">,</span><span class="w">  </span><span class="c1"># Empty state title</span><span class="w">
  </span><span class="ss">feedback_message</span><span class="p">:</span><span class="w"> </span><span class="n">l</span><span class="p" data-group-id="0279044112-5">(</span><span class="s">&quot;Empty msg&quot;</span><span class="p" data-group-id="0279044112-5">)</span><span class="p">,</span><span class="w">  </span><span class="c1"># Empty state message</span><span class="w">
  </span><span class="ss">hide_filters</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">                </span><span class="c1"># Hide filter UI</span><span class="w">
  </span><span class="ss">showing_within</span><span class="p">:</span><span class="w"> </span><span class="ss">:context</span><span class="p">,</span><span class="w">          </span><span class="c1"># Display context</span><span class="w">
  </span><span class="ss">no_header</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">                    </span><span class="c1"># Hide header</span><span class="w">
</span><span class="p" data-group-id="0279044112-1">]</span></code></pre><h2 id="step-6-add-preload-rules-optional-but-recommended" class="section-heading"><a href="#step-6-add-preload-rules-optional-but-recommended" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 6: Add Preload Rules (Optional but Recommended)</span></h2><p>Optimize data loading by adding specific preload rules for your feed. Find the <code class="inline">preload_rules</code> configuration section and add:</p><pre><code class="makeup elixir" translate="no"><span class="s">&quot;Your Feed Name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="1076612788-1">%{</span><span class="w">
  </span><span class="ss">match</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1076612788-2">%{</span><span class="ss">feed_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:your_feed</span><span class="p" data-group-id="1076612788-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">include</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1076612788-3">[</span><span class="ss">:with_object_more</span><span class="p">,</span><span class="w"> </span><span class="ss">:tags</span><span class="p">,</span><span class="w"> </span><span class="ss">:maybe_sensitive_for_me</span><span class="p" data-group-id="1076612788-3">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">exclude</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1076612788-4">[</span><span class="ss">:with_parent</span><span class="p">,</span><span class="w"> </span><span class="ss">:notifications_object_creator</span><span class="p" data-group-id="1076612788-4">]</span><span class="w">
</span><span class="p" data-group-id="1076612788-1">}</span></code></pre><h3 id="common-preload-options" class="section-heading"><a href="#common-preload-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Common Preload Options</span></h3><p><strong>Include options:</strong></p><ul><li><code class="inline">:with_subject</code> - Load activity subject (who performed action)</li><li><code class="inline">:with_creator</code> - Load object creator</li><li><code class="inline">:with_object_more</code> - Load object with profile/character data</li><li><code class="inline">:with_media</code> - Load media attachments</li><li><code class="inline">:with_reply_to</code> - Load replied-to content</li><li><code class="inline">:with_seen</code> - Add seen/unseen status</li><li><code class="inline">:tags</code> - Load tags/categories</li><li><code class="inline">:emoji</code> - Load emoji reactions</li><li><code class="inline">:sensitivity</code> - Load content warnings</li><li><code class="inline">:activity_name</code> - Load activity display names</li></ul><p><strong>Exclude options:</strong></p><ul><li><code class="inline">:with_parent</code> - Skip parent relationships</li><li><code class="inline">:notifications_object_creator</code> - Skip creator notifications</li><li><code class="inline">:with_object_peered</code> - Skip federation data</li></ul><h2 id="step-7-format-and-test" class="section-heading"><a href="#step-7-format-and-test" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 7: Format and Test</span></h2><ol><li><p>Run the formatter:</p><pre><code class="makeup bash" translate="no"><span class="">mix format extensions/bonfire_social/lib/runtime_config.ex
</span></code></pre></li><li><p>Restart your Bonfire server to load the new configuration</p></li><li><p>Test accessing your feed:</p><ul><li>Via UI navigation (if not excluded from nav)</li><li>Via direct URL: <code class="inline">/feed/your_feed_name</code></li><li>Via API/GraphQL queries</li></ul></li></ol><h2 id="advanced-features" class="section-heading"><a href="#advanced-features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Advanced Features</span></h2><h3 id="parameterized-feeds" class="section-heading"><a href="#parameterized-feeds" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameterized Feeds</span></h3><p>For dynamic feeds that accept parameters:</p><pre><code class="makeup elixir" translate="no"><span class="ss">hashtag</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7382034897-1">%{</span><span class="w">
  </span><span class="ss">built_in</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Activities with a specific hashtag&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7382034897-2">%</span><span class="nc" data-group-id="7382034897-2">FeedFilters</span><span class="p" data-group-id="7382034897-2">{</span><span class="p" data-group-id="7382034897-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">parameterized</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7382034897-3">%{</span><span class="ss">tags</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7382034897-4">[</span><span class="ss">:tags</span><span class="p" data-group-id="7382034897-4">]</span><span class="p" data-group-id="7382034897-3">}</span><span class="w">
</span><span class="p" data-group-id="7382034897-1">}</span></code></pre><h3 id="custom-query-functions" class="section-heading"><a href="#custom-query-functions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Custom Query Functions</span></h3><p>For complex queries, specify a custom base query:</p><pre><code class="makeup elixir" translate="no"><span class="ss">bookmarks</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6361300827-1">%{</span><span class="w">
  </span><span class="ss">base_query_fun</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Bonfire.Social.Bookmarks</span><span class="o">.</span><span class="n">base_query</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="c1"># ... other config</span><span class="w">
</span><span class="p" data-group-id="6361300827-1">}</span></code></pre><h3 id="special-feed-types" class="section-heading"><a href="#special-feed-types" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Special Feed Types</span></h3><p>Some feeds bypass standard patterns:</p><pre><code class="makeup elixir" translate="no"><span class="ss">curated</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6095986224-1">%{</span><span class="w">
  </span><span class="c1"># Uses custom query via Pins.list_instance_pins</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6095986224-2">%</span><span class="nc" data-group-id="6095986224-2">FeedFilters</span><span class="p" data-group-id="6095986224-2">{</span><span class="ss">feed_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:curated</span><span class="p" data-group-id="6095986224-2">}</span><span class="w">
</span><span class="p" data-group-id="6095986224-1">}</span></code></pre><h2 id="common-feed-preset-patterns" class="section-heading"><a href="#common-feed-preset-patterns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Common Feed Preset Patterns</span></h2><h3 id="1-activity-based-feeds" class="section-heading"><a href="#1-activity-based-feeds" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">1. Activity-Based Feeds</span></h3><p>Query activities through the Activity table:</p><pre><code class="makeup elixir" translate="no"><span class="ss">notifications</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2141439795-1">%{</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2141439795-2">%</span><span class="nc" data-group-id="2141439795-2">FeedFilters</span><span class="p" data-group-id="2141439795-2">{</span><span class="w">
    </span><span class="ss">feed_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:notifications</span><span class="p">,</span><span class="w">
    </span><span class="ss">show_objects_only_once</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
  </span><span class="p" data-group-id="2141439795-2">}</span><span class="w">
</span><span class="p" data-group-id="2141439795-1">}</span></code></pre><h3 id="2-edge-based-feeds" class="section-heading"><a href="#2-edge-based-feeds" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">2. Edge-Based Feeds</span></h3><p>Query relationships directly through the Edge table:</p><pre><code class="makeup elixir" translate="no"><span class="ss">my_flags</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9953465554-1">%{</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9953465554-2">%</span><span class="nc" data-group-id="9953465554-2">FeedFilters</span><span class="p" data-group-id="9953465554-2">{</span><span class="w">
    </span><span class="ss">activity_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9953465554-3">[</span><span class="ss">:flag</span><span class="p" data-group-id="9953465554-3">]</span><span class="w">
  </span><span class="p" data-group-id="9953465554-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">parameterized</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9953465554-4">%{</span><span class="ss">subjects</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9953465554-5">[</span><span class="ss">:me</span><span class="p" data-group-id="9953465554-5">]</span><span class="p" data-group-id="9953465554-4">}</span><span class="w">
</span><span class="p" data-group-id="9953465554-1">}</span></code></pre><h3 id="3-media-feeds" class="section-heading"><a href="#3-media-feeds" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">3. Media Feeds</span></h3><p>Filter by media content:</p><pre><code class="makeup elixir" translate="no"><span class="ss">videos</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6128009771-1">%{</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6128009771-2">%</span><span class="nc" data-group-id="6128009771-2">FeedFilters</span><span class="p" data-group-id="6128009771-2">{</span><span class="w">
    </span><span class="ss">media_types</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6128009771-3">[</span><span class="s">&quot;video&quot;</span><span class="p" data-group-id="6128009771-3">]</span><span class="w">
  </span><span class="p" data-group-id="6128009771-2">}</span><span class="w">
</span><span class="p" data-group-id="6128009771-1">}</span></code></pre><h3 id="4-user-specific-feeds" class="section-heading"><a href="#4-user-specific-feeds" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">4. User-Specific Feeds</span></h3><p>Require authentication and filter by current user:</p><pre><code class="makeup elixir" translate="no"><span class="ss">my_events</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8913961445-1">%{</span><span class="w">
  </span><span class="ss">current_user_required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">parameterized</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8913961445-2">%{</span><span class="ss">subjects</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8913961445-3">[</span><span class="ss">:me</span><span class="p" data-group-id="8913961445-3">]</span><span class="p" data-group-id="8913961445-2">}</span><span class="w">
</span><span class="p" data-group-id="8913961445-1">}</span></code></pre><h2 id="troubleshooting" class="section-heading"><a href="#troubleshooting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Troubleshooting</span></h2><ol><li><strong>Feed not appearing</strong>: Check permissions and <code class="inline">exclude_from_nav</code> setting</li><li><strong>No data loading</strong>: Verify filter configuration matches existing data</li><li><strong>Performance issues</strong>: Add appropriate preload rules</li><li><strong>Permission errors</strong>: Verify <code class="inline">current_user_required</code> and permission settings</li></ol><h2 id="next-steps" class="section-heading"><a href="#next-steps" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Next Steps</span></h2><p>After adding a feed preset:</p><ol><li>Consider adding UI components if needed</li><li>Add tests for the new feed</li><li>Document the feed in user-facing documentation</li><li>Consider internationalization for all user-visible strings</li></ol>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="setup.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Setup Tutorial
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="add-a-new-widget.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Add a new widget
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Bonfire.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.4) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
