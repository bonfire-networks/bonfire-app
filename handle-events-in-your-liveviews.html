<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.4">
    <meta name="project" content="Bonfire v1.0.2-social-alpha.22">


    <title>Handle events in your Live Views with LiveHandlers — Bonfire v1.0.2-social-alpha.22</title>

    <link rel="stylesheet" href="dist/html-elixir-RLZO5U2C.css" />

    <script defer src="dist/sidebar_items-B9017398.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-Y223O6DN.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://bonfirenetworks.org" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Bonfire" />
        </a>

      <div>
        <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
Bonfire
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.2-social-alpha.22
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Bonfire</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Handle events in your Live Views with LiveHandlers</h1>


      <a href="https://github.com/bonfire-networks/bonfire-app/blob/main/docs/building/handle-events-in-your-liveviews.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p><a href="./Bonfire.UI.Common.LiveHandlers.html"><code class="inline">Bonfire.UI.Common.LiveHandlers</code></a> is a core module that simplifies event delegation for Phoenix LiveView applications within the Bonfire ecosystem. It provides a standardized way to handle various LiveView events (params, events, info) and route them to appropriate handler modules, enabling you to easily handle the same event in multiple live views or components using the same code.</p><h2 id="overview" class="section-heading"><a href="#overview" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Overview</span></h2><p>The LiveHandlers system allows you to:</p><ol><li>Define event handling logic in dedicated modules </li><li>Route events from multiple views or components based on naming conventions</li><li>Handle complex event delegation scenarios</li><li>Standardize error handling across your application</li></ol><h2 id="usage" class="section-heading"><a href="#usage" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Usage</span></h2><h3 id="creating-a-livehandler-module" class="section-heading"><a href="#creating-a-livehandler-module" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Creating a LiveHandler module</span></h3><p>To create a LiveHandler for your Bonfire extension:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Bonfire.MyExtension.LiveHandler</span><span class="w"> </span><span class="k" data-group-id="4764238334-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Bonfire.UI.Common.Web</span><span class="p">,</span><span class="w"> </span><span class="ss">:live_handler</span><span class="w">

  </span><span class="c1"># Implement handler callbacks</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="4764238334-2">(</span><span class="s">&quot;my_action&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="4764238334-2">)</span><span class="w"> </span><span class="k" data-group-id="4764238334-3">do</span><span class="w">
    </span><span class="c1"># Your handling logic</span><span class="w">
    </span><span class="p" data-group-id="4764238334-4">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="4764238334-4">}</span><span class="w">
  </span><span class="k" data-group-id="4764238334-3">end</span><span class="w">
  
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_info</span><span class="p" data-group-id="4764238334-5">(</span><span class="p" data-group-id="4764238334-6">{</span><span class="ss">:my_message</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="4764238334-6">}</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="4764238334-5">)</span><span class="w"> </span><span class="k" data-group-id="4764238334-7">do</span><span class="w">
    </span><span class="c1"># Process the message</span><span class="w">
    </span><span class="p" data-group-id="4764238334-8">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="4764238334-8">}</span><span class="w">
  </span><span class="k" data-group-id="4764238334-7">end</span><span class="w">
  
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_params</span><span class="p" data-group-id="4764238334-9">(</span><span class="p" data-group-id="4764238334-10">%{</span><span class="s">&quot;my_param&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="4764238334-10">}</span><span class="p">,</span><span class="w"> </span><span class="n">uri</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="4764238334-9">)</span><span class="w"> </span><span class="k" data-group-id="4764238334-11">do</span><span class="w">
    </span><span class="c1"># Handle URL parameters</span><span class="w">
    </span><span class="p" data-group-id="4764238334-12">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="4764238334-12">}</span><span class="w">
  </span><span class="k" data-group-id="4764238334-11">end</span><span class="w">

</span><span class="k" data-group-id="4764238334-1">end</span></code></pre><h3 id="triggering-livehandlers" class="section-heading"><a href="#triggering-livehandlers" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Triggering LiveHandlers</span></h3><h4>From Templates</h4><p>You can trigger the <code class="inline">handle_event</code> in your LiveHandler from any view or component:</p><pre><code class="makeup html" translate="no"><span class="p" data-group-id="8715705070-1">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="o">=</span><span class="s">&quot;Bonfire.MyExtension:perform_action&quot;</span><span class="p" data-group-id="8715705070-1">&gt;</span><span class="s">Click me</span><span class="p" data-group-id="8715705070-2">&lt;/</span><span class="nt">button</span><span class="p" data-group-id="8715705070-2">&gt;</span><span class="s">

</span><span class="p" data-group-id="8715705070-3">&lt;</span><span class="nt">form</span><span class="w"> </span><span class="na">phx-submit</span><span class="o">=</span><span class="s">&quot;Bonfire.MyExtension:save_form&quot;</span><span class="p" data-group-id="8715705070-3">&gt;</span><span class="s">
  </span><span class="c">&lt;!-- form content --&gt;</span><span class="s">
</span><span class="p" data-group-id="8715705070-4">&lt;/</span><span class="nt">form</span><span class="p" data-group-id="8715705070-4">&gt;</span></code></pre><h4>From URIs</h4><p>You can trigger <code class="inline">handle_params</code> in your LiveHandler based on on URIs:</p><pre><code class="makeup heex" translate="no"><span class="p" data-group-id="3083901603-out-1">&lt;</span><span class="nt">a</span><span class="w"> </span><span class="na">href</span><span class="o">=</span><span class="s">&quot;?Bonfire.MyExtension[after]</span><span class="o">=</span><span class="p" data-group-id="3083901603-1">&lt;%=</span><span class="w"> </span><span class="n">e</span><span class="p" data-group-id="3083901603-ex-1">(</span><span class="na">@page_info</span><span class="p">,</span><span class="w"> </span><span class="ss">:end_cursor</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="3083901603-ex-1">)</span><span class="w"> </span><span class="p" data-group-id="3083901603-1">%&gt;</span><span class="s">&quot;</span><span class="p" data-group-id="3083901603-out-1">&gt;</span><span class="s">Load more</span><span class="p" data-group-id="3083901603-out-2">&lt;/</span><span class="nt">a</span><span class="p" data-group-id="3083901603-out-2">&gt;</span></code></pre><h4>From PubSub</h4><p>You can trigger <code class="inline">handle_info</code> in your LiveHandler from any live view or component:</p><pre><code class="makeup elixir" translate="no"><span class="nc">PubSub</span><span class="o">.</span><span class="n">broadcast</span><span class="p" data-group-id="0349566168-1">(</span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0349566168-2">{</span><span class="p" data-group-id="0349566168-3">{</span><span class="nc">Bonfire.MyExtension</span><span class="p">,</span><span class="w"> </span><span class="ss">:new_item</span><span class="p" data-group-id="0349566168-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p" data-group-id="0349566168-2">}</span><span class="p" data-group-id="0349566168-1">)</span></code></pre><h2 id="examples" class="section-heading"><a href="#examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><h3 id="handle-form-submission" class="section-heading"><a href="#handle-form-submission" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Handle Form Submission</span></h3><p>In your view or component:</p><pre><code class="makeup html" translate="no"><span class="p" data-group-id="1896145852-1">&lt;</span><span class="nt">form</span><span class="w"> </span><span class="na">phx-submit</span><span class="o">=</span><span class="s">&quot;Bonfire.MyExtension:save_form&quot;</span><span class="p" data-group-id="1896145852-1">&gt;</span><span class="s">
  </span><span class="c">&lt;!-- form content --&gt;</span><span class="s">
</span><span class="p" data-group-id="1896145852-2">&lt;/</span><span class="nt">form</span><span class="p" data-group-id="1896145852-2">&gt;</span></code></pre><p>In your LiveHandler module:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="1531100494-1">(</span><span class="s">&quot;save_form&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1531100494-2">%{</span><span class="s">&quot;post&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">post_attrs</span><span class="p" data-group-id="1531100494-2">}</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="1531100494-1">)</span><span class="w"> </span><span class="k" data-group-id="1531100494-3">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Posts</span><span class="o">.</span><span class="n">create</span><span class="p" data-group-id="1531100494-4">(</span><span class="n">current_user</span><span class="p" data-group-id="1531100494-5">(</span><span class="n">socket</span><span class="p" data-group-id="1531100494-5">)</span><span class="p">,</span><span class="w"> </span><span class="n">post_attrs</span><span class="p" data-group-id="1531100494-4">)</span><span class="w"> </span><span class="k" data-group-id="1531100494-6">do</span><span class="w">
    </span><span class="p" data-group-id="1531100494-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">post</span><span class="p" data-group-id="1531100494-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="1531100494-8">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">assign_flash</span><span class="p" data-group-id="1531100494-9">(</span><span class="ss">:info</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Post created successfully!&quot;</span><span class="p" data-group-id="1531100494-9">)</span><span class="p" data-group-id="1531100494-8">}</span><span class="w">
    </span><span class="p" data-group-id="1531100494-10">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="1531100494-10">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="1531100494-11">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="1531100494-12">(</span><span class="ss">:changeset</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="1531100494-12">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">assign_error</span><span class="p" data-group-id="1531100494-13">(</span><span class="s">&quot;Failed to create post&quot;</span><span class="p" data-group-id="1531100494-13">)</span><span class="p" data-group-id="1531100494-11">}</span><span class="w">
  </span><span class="k" data-group-id="1531100494-6">end</span><span class="w">
</span><span class="k" data-group-id="1531100494-3">end</span></code></pre><h3 id="handle-url-parameters" class="section-heading"><a href="#handle-url-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Handle URL Parameters</span></h3><p>In your view or component:</p><pre><code class="makeup heex" translate="no"><span class="p" data-group-id="1648794047-out-1">&lt;</span><span class="nt">a</span><span class="w"> </span><span class="na">href</span><span class="o">=</span><span class="s">&quot;?Bonfire.MyExtension[after]</span><span class="o">=</span><span class="p" data-group-id="1648794047-1">&lt;%=</span><span class="w"> </span><span class="n">e</span><span class="p" data-group-id="1648794047-ex-1">(</span><span class="na">@page_info</span><span class="p">,</span><span class="w"> </span><span class="ss">:end_cursor</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="1648794047-ex-1">)</span><span class="w"> </span><span class="p" data-group-id="1648794047-1">%&gt;</span><span class="s">&quot;</span><span class="p" data-group-id="1648794047-out-1">&gt;</span><span class="s">
  Load more
</span><span class="p" data-group-id="1648794047-out-2">&lt;/</span><span class="nt">a</span><span class="p" data-group-id="1648794047-out-2">&gt;</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">handle_params</span><span class="p" data-group-id="5953757118-1">(</span><span class="p" data-group-id="5953757118-2">%{</span><span class="s">&quot;after&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">cursor</span><span class="p" data-group-id="5953757118-2">}</span><span class="p">,</span><span class="w"> </span><span class="c">_uri</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="5953757118-1">)</span><span class="w"> </span><span class="k" data-group-id="5953757118-3">do</span><span class="w">
  </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch_items_after_cursor</span><span class="p" data-group-id="5953757118-4">(</span><span class="n">cursor</span><span class="p" data-group-id="5953757118-4">)</span><span class="w">
  </span><span class="p" data-group-id="5953757118-5">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="5953757118-6">(</span><span class="ss">:items</span><span class="p">,</span><span class="w"> </span><span class="n">items</span><span class="p" data-group-id="5953757118-6">)</span><span class="p" data-group-id="5953757118-5">}</span><span class="w">
</span><span class="k" data-group-id="5953757118-3">end</span></code></pre><h2 id="key-concepts" class="section-heading"><a href="#key-concepts" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Concepts</span></h2><h3 id="event-routing" class="section-heading"><a href="#event-routing" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Event Routing</span></h3><p>LiveHandlers uses naming conventions to route events:</p><ul><li><code class="inline">phx-click=&quot;Bonfire.Posts:delete&quot;</code> and <code class="inline">phx-submit=&quot;Bonfire.Posts.LiveHandler:delete&quot;</code> both route to <code class="inline">Bonfire.Posts.LiveHandler.handle_event(&quot;delete&quot;, ...)</code></li><li><code class="inline">PubSub.broadcast(topic, {{Bonfire.Social.Feeds, :new_activity}, activity})</code> and <code class="inline">PubSub.broadcast(topic, {&quot;Bonfire.Social.Feeds.LiveHandler:new_activity&quot;, item})</code> both route to <code class="inline">Bonfire.Social.Feeds.LiveHandler.handle_info({:new_activity, activity}, ...)</code></li><li><code class="inline">?Bonfire.Social.Feeds[after]=&lt;cursor&gt;</code> and <code class="inline">/?Bonfire.Social.Feeds[after]=&lt;cursor&gt;</code>  and <code class="inline">/any_view?Bonfire.Social.Feeds.LiveHandler[after]=&lt;cursor&gt;</code> all route to <code class="inline">Bonfire.Social.Feeds.LiveHandler.handle_params(%{&quot;after&quot; =&gt; cursor}, ...)</code></li></ul><h3 id="error-handling" class="section-heading"><a href="#error-handling" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Error Handling</span></h3><p>All LiveHandler callbacks are wrapped in error protection using <code class="inline">ErrorHandling.undead/2</code> to prevent crashes.</p><h2 id="api-documentation" class="section-heading"><a href="#api-documentation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">API Documentation</span></h2><p>For more detailed documentation, see the <a href="./Bonfire.UI.Common.LiveHandlers.html"><code class="inline">Bonfire.UI.Common.LiveHandlers</code></a> module documentation.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="extensions-overview.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
What is a Bonfire extension
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="how_to_create_usage_rules.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
How to Create Effective Usage Rules for LLM-Assisted Development
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Bonfire.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.4) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
