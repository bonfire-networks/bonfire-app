<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.4">
    <meta name="project" content="Bonfire v1.0.0-social-rc.3.15">


    <title>Hosting guide — Bonfire v1.0.0-social-rc.3.15</title>

    <link rel="stylesheet" href="dist/html-elixir-RLZO5U2C.css" />

    <script defer src="dist/sidebar_items-BDC7858D.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-Y223O6DN.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://bonfirenetworks.org" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Bonfire" />
        </a>

      <div>
        <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
Bonfire
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0-social-rc.3.15
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Bonfire</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Hosting guide</h1>


      <a href="https://github.com/bonfire-networks/bonfire-app/blob/main/docs/DEPLOY.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p>A short guide to running Bonfire in a production environment and setting up a digital space connected to the fediverse.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Status</h4><p>The release candidate of Bonfire Social 1.0 is ready! Other flavours of Bonfire are currently at alpha or beta stages. </p></section><p><em>These instructions are for setting up Bonfire in production. If you want to run the backend in development, please refer to our <a href="hacking.html">Installation guide</a> instead.</em></p><blockquote><p><strong>Before you begin:</strong><br/>Make sure you have completed the <a href="setup.html">Setup Tutorial</a> to prepare your server, domain, mail, and DNS.<br/>This guide assumes your infrastructure is ready and covers installing and configuring Bonfire itself.</p></blockquote><blockquote><p><strong>Warning</strong>
By default sign ups are by invite only. You can invite people via instance settings, or open up for public registrations (just make sure you have a code of conduct and moderation team in place first). </p></blockquote><hr class="thin"/><h2 id="step-1-decide-how-you-want-to-deploy-and-manage-the-app" class="section-heading"><a href="#step-1-decide-how-you-want-to-deploy-and-manage-the-app" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step 1 - Decide how you want to deploy and manage the app</span></h2><!-- tabs-open --><h3 id="co-op-cloud" class="section-heading"><a href="#co-op-cloud" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Co-op Cloud</span></h3><p>Install using <a href="https://coopcloud.tech">Co-op Cloud</a> (recommended) which is an alternative to corporate cloud services built by tech co-ops, and provides handy tools for setting up and managing many self-hosted free software tools using ready-to-use &quot;recipes&quot;. Very useful if you'd like to host Bonfire alongside other open and/or federated projects. </p><h4>1. Install Coop-Cloud on your server</h4><p>Follow this <a href="https://docs.coopcloud.tech/operators/tutorial/">guide to setup Docker and Coop Cloud</a> on your server.</p><p>If you have any issues connecting with SSH, here's a <a href="https://docs.coopcloud.tech/abra/trouble/#ssh-connection-issues">guide for coop-cloud ssh issues</a>:</p><blockquote><p>[!Tip] Protip
Ensure .ssh/config file is set up</p><pre><code class="makeup elixir" translate="no"><span class="nc">Host</span><span class="w"> </span><span class="p" data-group-id="4657649228-1">[</span><span class="n">yourdomain</span><span class="o">.</span><span class="n">net</span><span class="p" data-group-id="4657649228-1">]</span><span class="w">
    </span><span class="nc">HostName</span><span class="w"> </span><span class="p" data-group-id="4657649228-2">[</span><span class="n">yourdomain</span><span class="o">.</span><span class="n">net</span><span class="p" data-group-id="4657649228-2">]</span><span class="w">
    </span><span class="nc">User</span><span class="w"> </span><span class="p" data-group-id="4657649228-3">[</span><span class="n">root</span><span class="p" data-group-id="4657649228-3">]</span><span class="w">
    </span><span class="nc">IdentityFile</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">ssh</span><span class="o">/</span><span class="p" data-group-id="4657649228-4">[</span><span class="n">your_ssh_key</span><span class="p" data-group-id="4657649228-4">]</span></code></pre></blockquote><h4>2. Install Abra on your computer</h4><p><a href="https://docs.coopcloud.tech/abra/">Abra</a> is installed locally on your machine and acts as the remote control to Coop-Cloud, letting you manage software installations more easily from your local machine. </p><p><a href="https://docs.coopcloud.tech/abra/install/">Follow the Abra installation guide</a>.</p><h5>2.1. Add your server to Abra</h5><p>Here's a guide for how to <a href="https://docs.coopcloud.tech/operators/tutorial/#install-abra">add your server</a> to Abra. This tutorial works well until you need to install the app. When you reach the &quot;Nextcloud&quot; part of the guide, switch back to this guide.</p><ul><li>The command for adding the server is <code class="inline">abra server add [yourdomain.net]</code> or e.g. <code class="inline">abra server add [social.yourdomain.net]</code> if using a subdomain</li><li>To see that it works, check <code class="inline">abra server ls</code> and you'll get a cute happy message</li></ul><blockquote><p>[!Tip] Protip
Try pinging <em>traefik.yourdomain.net</em> to see that it works:
<code class="inline">ping traefik.yourdomain.net</code></p></blockquote><h4>3. Install Traefik</h4><p><a href="https://doc.traefik.io/traefik/">Traefik</a> is a proxy that supports developers with publishing services. This will make it easy to ensure that your bonfire instance is up to date! </p><p>Install by following this <a href="https://recipes.coopcloud.tech/traefik">recipie to install Traefik</a>.</p><p>Remember to add a valid email when configuring Traefik to generate a SSL certificate (abra app config traefik.yourdomain) - that's the only field you need to configure for traefik to work</p><blockquote><p>[!Tip] Protip 
You can try using --chaos to tell abra to use the recipe that you have set up locally rather than pulling it from the repository if the traefik setup is stucked</p></blockquote><h4>4. Install Bonfire</h4><p>Use the <a href="https://recipes.coopcloud.tech/bonfire">Bonfire recipe</a> and follow the instructions there. </p><ul><li><p>Editing the config file:</p><ul><li> <code class="inline">abra app config [yourdomain.net]</code></li><li>See <a href="#preparing-the-config-in-env">prepare the config</a> for details about what to edit, for example you should add the email sending key:<pre><code class="makeup elixir" translate="no"><span class="nc">MAIL_BACKEND</span><span class="o">=</span><span class="n">mailgun</span><span class="w">
</span><span class="nc">MAIL_DOMAIN</span><span class="o">=</span><span class="p" data-group-id="2617905295-1">[</span><span class="n">yourdomain</span><span class="o">.</span><span class="n">net</span><span class="p" data-group-id="2617905295-1">]</span><span class="w">
</span><span class="nc">MAIL_KEY</span><span class="o">=</span><span class="p" data-group-id="2617905295-2">[</span><span class="n">your</span><span class="o">-</span><span class="n">mailgun</span><span class="o">-</span><span class="n">sending</span><span class="o">-</span><span class="n">key</span><span class="p" data-group-id="2617905295-2">]</span><span class="w">
</span><span class="nc">MAIL_FROM</span><span class="o">=</span><span class="p" data-group-id="2617905295-3">[</span><span class="n">from</span><span class="na">@yourdomain</span><span class="o">.</span><span class="n">net</span><span class="p" data-group-id="2617905295-3">]</span></code></pre></li></ul></li><li><p>Deploying: 
<code class="inline">abra app deploy [yourdomain.net]</code></p></li><li><p>If redeploying, you can force deploy:
<code class="inline">abra app deploy [yourdomain.net] --force</code></p></li></ul><blockquote><p><strong>Protip</strong>
You can turn the <code class="inline">~/abra/servers/yourdomain.net</code> directory into a git repo and share it (privately!) with collaborators. It's also useful as a backup if you loose access to your machine or want to manager the server from a different place.</p></blockquote><h4>CoopCloud FAQs</h4><ul><li><p>How to connect to the bonfire app via command line?
  <code class="inline">abra app run [yourinstance.net] app bin/bonfire remote</code></p></li><li><p>How to sign up with command line? </p><ul><li><code class="inline">abra app run [yourinstance.net] app bin/bonfire remote</code> </li><li>and then in the IEx console: <code class="inline">Bonfire.Me.make_account_only(&quot;my@email.net&quot;, &quot;my pw&quot;)</code></li></ul></li><li><p>How to see logs?</p><ul><li>for bonfire logs: <code class="inline">abra app logs [yourinstance.net] app</code></li><li>to include logs of the DB and web proxy: <code class="inline">abra app logs [yourinstance.net]</code></li></ul></li><li><p>How to set up backups?</p><ul><li>see this coopcloud recipe: <a href="https://recipes.coopcloud.tech/backup-bot-two">https://recipes.coopcloud.tech/backup-bot-two</a></li></ul></li></ul><h3 id="docker-containers" class="section-heading"><a href="#docker-containers" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Docker containers</span></h3><ol><li>Install dependencies. </li></ol><p>The easiest way to manage the docker image is using just commands.</p><p>The <code class="inline">docker-compose.release.yml</code> uses <code class="inline">config/prod/.env</code> to launch a container with the necessary environment variables along with its dependencies, currently that means an extra postgres container, along with a reverse proxy (Caddy server, which you may want to replace with nginx or whatever you prefer).</p><p>Make sure you have <a href="https://www.docker.com/">Docker</a>, with the <a href="https://docs.docker.com/compose/install/#install-compose">compose</a> plugin, and <a href="https://github.com/casey/just#packages">just</a> installed:</p><pre><code class="makeup sh" translate="no"><span class="gp unselectable">$ </span><span class="">docker version
</span><span class="">Docker Engine - Community - 23.0.1
</span><span class="">
</span><span class="gp unselectable">$ </span><span class="">docker compose version
</span><span class="">Docker Compose version v2.16.0
</span><span class="">
</span><span class="gp unselectable">$ </span><span class="">just --version
</span><span class="">just 1.13.0
</span><span class="">...
</span></code></pre><ol start="2"><li>Clone this repository and change into the directory:</li></ol><pre><code class="makeup sh" translate="no"><span class="">git clone --depth 1 https://github.com/bonfire-networks/bonfire-app.git bonfire &amp;&amp; cd bonfire
</span></code></pre><ol start="3"><li>Specify what flavour you want to run in production:</li></ol><p>The first thing to do is choose what flavour of Bonfire (eg. ember, social, community, or cooperation) you want to deploy, as each flavour uses different Docker images and set of configs. For example if you want to run the <code class="inline">social</code> flavour:</p><ul><li><code class="inline">export MIX_ENV=prod FLAVOUR=social WITH_DOCKER=yes</code> </li></ul><p>You may also want to put this in the appropriate place in your system so your choice of flavour is remembered for next time (eg. <code class="inline">~/.bashrc</code> or <code class="inline">~/.zshrc</code>)</p><ol start="4"><li>Run <code class="inline">MIX_ENV=prod just config</code> to initialise some default config and then edit the config in the <code class="inline">./.env</code> file (see <a href="#preparing-the-config-in-env">prepare the config</a> for details about what to edit).</li></ol><blockquote><p>Now that your tooling is set up, you have the choice of using pre-built images or building your own. For example if your flavour does not have a prebuilt image on Docker Hub, or if you want to customise any of the extensions, you can build one yourself. </p></blockquote><h4>Using pre-built Docker images (easy mode)</h4><ul><li>The <code class="inline">image</code> entry in <code class="inline">docker-compose.release.yml</code> will by default use the image on Docker Hub which corresponds to your chosen flavour (see step 1 above for choosing your flavour).</li></ul><p>You can see the images available per flavour, version (we currently recommend using the <code class="inline">latest</code> tag), and architecture at <a href="https://hub.docker.com/r/bonfirenetworks/bonfire/tags">https://hub.docker.com/r/bonfirenetworks/bonfire/tags</a> </p><ol start="5"><li>Try <a href="#running-with-docker">running the app</a>!</li></ol><h4>Custom Docker build</h4><p>Building your own Docker image is useful if you want to make code changes or add your own extensions.</p><p><code class="inline">Dockerfile.release</code> uses the <a href="https://docs.docker.com/develop/develop-images/multistage-build/">multistage build</a> feature to just the image as small as possible. It generates the OTP release which is later copied into the final image packaged in an Alpine linux container.</p><p>There is a <code class="inline">justfile</code> with relevant commands (make sure set the <code class="inline">MIX_ENV=prod</code> env variable):</p><ul><li><code class="inline">just rel-build-locked</code> which builds the docker image of the latest release</li><li><code class="inline">just rel-build</code> which builds the docker image, including local changes to any cloned extensions in <code class="inline">./extensions/</code> </li><li><code class="inline">just rel-tag</code> adds the &quot;latest&quot; tag to your last build, so that it will be used when running</li></ul><p>Once you've built and tagged your image, you may need to update the <code class="inline">image</code> name in <code class="inline">docker-compose.release.release.yml</code> to match (either your local image name if running on the same machine you used for the build, or a remote image on Docker Hub if you pushed it) and then follow the same steps as for option A1.</p><p>For production, we recommend to set up a CI workflow to automate this, for an example you can look at the one <a href="../github/workflows/release.yaml">we currently use</a>.</p><p>Finally, try <a href="#running-with-docker">running the app</a>!</p><h4>Running with Docker</h4><ol><li><p>Before running the app for the first time, but after having <a href="#preparing-the-config-in-env">prepared the config</a>, you should run <code class="inline">just setup-prod</code> which will get the instance ready.</p></li><li><p>The you can start the docker containers with docker-compose: <code class="inline">just rel-run</code></p></li></ol><p>You can run this at the prompt <code class="inline">bin/bonfire remote</code> to enter Elixir's iex environment. Once there in case migrations have not run automatically you can run <code class="inline">Bonfire.Common.Repo.migrate</code> to initialise your database.</p><ol start="3"><li><p>The backend should now be running at <a href="http://localhost:4000/">http://localhost:4000/</a>. <a href="#notes-on-running-the-app">Yay, you're up and running!</a></p></li><li><p>If that worked, start the app as a daemon to it stays running in the background: <code class="inline">just rel-run-bg</code></p></li></ol><blockquote><p>Alternatively, <code class="inline">just rel-run-bg db</code> if you want to run the backend + db but not the web proxy, or <code class="inline">just rel-run-bg db search</code> if you want to run the full-text search index.</p></blockquote><h3 id="bare-metal" class="section-heading"><a href="#bare-metal" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Bare-metal</span></h3><p>Running a custom build without Docker.</p><ol><li>Install dependencies. </li></ol><ul><li>Postgres 12+ (but preferably 17+) with <a href="https://postgis.net/install/">Postgis</a> extension</li><li><a href="https://github.com/casey/just#packages">just</a></li><li>Elixir version 1.15+ with OTP 25+ (see the <code class="inline">.tool-versions</code> to double check the versions we're currently using). If your distribution only has an old version available, check <a href="https://elixir-lang.org/install.html">Elixir's install page</a> or use a tool like <a href="https://github.com/jdx/mise">mise</a> (run <code class="inline">mise install</code> in this directory) or asdf. </li></ul><p><strong>Note: Source versions of Elixir &gt;=1.17 and &lt;1.17.3 have bugs that can freeze compilation when using the Pathex library, which bonfire does,</strong> so please use 1.16 or 1.17.3+ (or you can set <code class="inline">WITH_PATHEX=0</code> in env to disabled the use of that library).</p><ol start="2"><li>Clone this repository and change into the directory:</li></ol><pre><code class="makeup sh" translate="no"><span class="">git clone --depth 1 https://github.com/bonfire-networks/bonfire-app.git bonfire &amp;&amp; cd bonfire
</span></code></pre><ol start="3"><li>Specify what flavour you want to run in production:</li></ol><p>The first thing to do is choose what flavour of Bonfire (eg. ember, social, community, or cooperation) you want to deploy, as each flavour uses different Docker images and set of configs. For example if you want to run the <code class="inline">social</code> flavour:</p><ul><li><code class="inline">export FLAVOUR=social MIX_ENV=prod WITH_DOCKER=no</code> </li></ul><p>You may also want to put this in the appropriate place in your system so your choice of flavour is remembered for next time (eg. <code class="inline">~/.bashrc</code> or <code class="inline">~/.zshrc</code>)</p><ol start="4"><li><p>Run <code class="inline">just config</code> to initialise some default config and then edit the config in the <code class="inline">./.env</code> file (see <a href="#preparing-the-config-in-env">prepare the config</a> for details about what to edit).</p></li><li><p>Run <code class="inline">just setup-prod</code></p></li><li><p>Run <code class="inline">just rel-build</code> to create an elixir release. This will create an executable in your <code class="inline">_build/prod/rel/bonfire</code> directory. Note that you will need <code class="inline">just</code> to pass in the <code class="inline">.env</code> file to the executable, like so: <code class="inline">just cmd _build/prod/rel/bonfire/bin/bonfire &lt;bonfire command&gt;</code>. Alternatively, this file can be sourced by <code class="inline">source .env</code> instead. We will be using the <code class="inline">bin/bonfire</code> executable as called from <code class="inline">just</code> from here on. </p></li><li><p>Running the release</p></li></ol><ul><li><p>Create a database, and a user, fill out the <code class="inline">.env</code> with your credentials and secrets</p></li><li><p>You will need to use <code class="inline">just</code> in order to pass the <code class="inline">.env</code> file to the executable. This can be accomplished by running <code class="inline">just cmd _build/prod/rel/bonfire/bin/bonfire &lt;bonfire command&gt;</code>. Just works from the root directory of the <code class="inline">justfile</code>, not your current directory.</p></li><li><p>If you’re using RDS or some other locked down DB, you may need to run <code class="inline">CREATE EXTENSION IF NOT EXISTS citext WITH SCHEMA public;</code> on your database with elevated privileges.</p></li><li><p>You may also need to enable the <code class="inline">postgis</code> extension manually by running <code class="inline">CREATE EXTENSION IF NOT EXISTS postgis WITH SCHEMA public;</code> on your database with elevated privileges.</p></li><li><p>You can check if your instance is configured correctly and get to the iex console by running <code class="inline">bin/bonfire start</code></p></li><li><p>The migrations should automatically run on first boot, but if you run into troubles the migration command is: <code class="inline">Bonfire.Common.Repo.migrate()</code> in the iex console. </p></li><li><p>To run the instance as a daemon, use <code class="inline">bin/bonfire start daemon</code>. <a href="#notes-on-running-the-app">Yay, you're up and running!</a></p></li></ul><ol start="8"><li>Adding HTTPS</li></ol><p>The common and convenient way for adding HTTPS is by using a reverse proxy like Nginx or Caddyserver (the latter of which is bundled as part of the docker compose setup).</p><p>Some web servers (like Caddy or Traefik) can handle generating and setting up HTTPS certificates automatically, but if you need TLS/SSL certificates for nginx, you can look get some for free with <a href="https://letsencrypt.org/">letsencrypt</a>. The simplest way to obtain and install a certificate is to use <a href="https://certbot.eff.org">Certbot.</a>. Depending on your specific setup, certbot may be able to get a certificate and configure your web server automatically.</p><p>There is an example nginx configuration provided at <code class="inline">config/deploy/nginx.conf</code> and one for Caddy at <code class="inline">config/deploy/Caddyfile2-https</code></p><blockquote><p>NOTE: If you've built from source, you should point the web server root directory to be <code class="inline">_build/prod/rel/bonfire/lib/bonfire-[current-version]/priv/static</code></p></blockquote><h3 id="guix" class="section-heading"><a href="#guix" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Guix</span></h3><p><a href="https://guix.gnu.org">Guix</a> is a functional, atomic, transactional package manager and Linux distribution. It was inspired by Nix and is designed to give users more control over their computing environments, and make these easier to reproduce over time and deploy to one or many devices.</p><p>The <a href="https://github.com/bonfire-networks/bonfire-guix"><code class="inline">bonfire-guix</code></a> channel contains a Guix System service to deploy Bonfire. Assuming you have the Guix System installed on a server the following steps will allow you to have a working Bonfire instance.  You can find a more detailed guide <a href="https://fishinthecalculator.me/blog/bonfire--guix-a-love-story.html">here</a>.</p><h4>1. Enable the <code class="inline">bonfire-guix</code> channel</h4><p>You can follow <a href="https://github.com/bonfire-networks/bonfire-guix?tab=readme-ov-file#configure">these instructions</a> to make Guix aware of the Bonfire channel. You can check you have correctly enabled <code class="inline">bonfire-guix</code> by running <code class="inline">guix describe</code>. After <code class="inline">guix pull</code>, in a new shell, your <code class="inline">guix describe</code> should look something like this (commit hashes will probably differ):</p><pre><code class="makeup shell" translate="no"><span class="">Generation 42   Oct 06 2025 18:39:20    (current)
</span><span class="">  guix 7a0c6b4
</span><span class="">    repository URL: https://git.guix.gnu.org/guix.git
</span><span class="">    branch: master
</span><span class="">    commit: 7a0c6b4b0a72a47035486a6b72dc67014b8a64ce
</span><span class="">  bonfire 49617fa
</span><span class="">    repository URL: https://github.com/bonfire-networks/bonfire-guix
</span><span class="">    branch: main
</span><span class="">    commit: 49617fa523bf66de8193ef5b004beea95ef1b133
</span><span class="">  sops-guix eba0aae
</span><span class="">    repository URL: https://github.com/fishinthecalculator/sops-guix
</span><span class="">    branch: main
</span><span class="">    commit: eba0aae6ac9d828c1afe7f8275ac8e1094334286
</span><span class="">  gocix aea12b4
</span><span class="">    repository URL: https://github.com/fishinthecalculator/gocix
</span><span class="">    branch: main
</span><span class="">    commit: aea12b4088799e436e6a1ccc479854ac55cb99c0
</span></code></pre><h4>2. Setup SSL certificates</h4><p>You want to setup SSL certificates provisioning as soon as possible, since everything from now on presupposes HTTPS. To do so on the Guix System, you have to add the <code class="inline">certbot-service-type</code> to your <code class="inline">operating-system</code> record (which after installation is available in <code class="inline">/etc/config.scm</code>):</p><pre><code class="scheme">(use-modules (gnu services certbot) ...) ;for 'certbot-service-type'

(operating-system
  ...

  (services
    (list
      ...
      (service certbot-service-type
               (certbot-configuration
                (email &quot;your@email.org&quot;)
                (certificates
                 (list
                  (certificate-configuration
                   (domains (list &quot;yourdomain.net&quot;))))))))))</code></pre><p>Reconfigure your system with <code class="inline">sudo guix system reconfigure</code> and proceed with the next steps.</p><h4>3. Secrets</h4><p>The Bonfire service is able to load secrets stored as files, so you are free to choose whichever option you prefer to provision and rotate them. One option to provision secrets as files in a Guix aware way is <a href="https://github.com/fishinthecalculator/sops-guix">sops-guix</a>. You can refer to <a href="https://github.com/fishinthecalculator/sops-guix?tab=readme-ov-file#creating-secrets-with-sops"><code class="inline">sops-guix</code>' tutorial for a more in depth explaination</a>.</p><h5><code class="inline">age</code> keys</h5><p>First you need a set of cryptographic keys to encrypt your secrets, in this example <a href="https://age-encryption.org"><code class="inline">age</code></a> will be used. If you already have your <code class="inline">age</code> keys, skip to the <strong>SOPS secrets</strong> section.</p><p>Run the following on server to generate keys for the <code class="inline">root</code> account:</p><pre><code class="makeup shell" translate="no"><span class="">~$ sudo -i
</span><span class="">Password: 
</span><span class="">~# mkdir -p ~/.config/sops/age
</span><span class="">~# guix shell age -- age-keygen -o /root/.config/sops/age/keys.txt
</span><span class="">...
</span><span class="">
</span><span class="">Public key: age1m3hcq7d9sl3d0uz6ezxvns4f7mjctksmmf5d8tpptmyz30rk9qnscgzfsa
</span></code></pre><p>You'll need one keypair for each user of the secret so, if you intend to be able to update secrets on a different machine than the one you are installing Bonfire on, make sure to generate a keypair there as well. If you are creating secrets on a PC or a laptop and intend to run Bonfire on a server you SSH into, this is your scenario. Create one keypair for your user on your machine at <code class="inline">$HOME.config/sops/age/keys.txt</code> with the above command.</p><p>Next you need to create a SOPS configuration file, named <code class="inline">.sops.yaml</code>, in the same directory your Guix configuration file is:</p><pre><code class="yaml">keys:
    # This is the public key of your laptop/PC
    - &amp;user_yourself_age age1peu96695en0xrlshkd3j3zzd04payh3cx27yjw6r40z8ekemnuesmkrupn
    # This is the public key of the server you are installing Bonfire upon
    - &amp;host_yoursystem age1m3hcq7d9sl3d0uz6ezxvns4f7mjctksmmf5d8tpptmyz30rk9qnscgzfsa

creation_rules:
    - path_regex: .*yoursystem\.yaml$
      key_groups:
          - age:
                - *user_yourself_age
                - *host_yoursystem</code></pre><p>You are now ready to create the <a href="#secret-keys-for-which-you-should-put-random-secrets">secrets you need</a>.</p><h5>SOPS secrets</h5><p>In this example the PostgreSQL password secret is being created, but other secrets are created the same way. You can generate a random string with:</p><pre><code class="makeup shell" translate="no"><span class="">guix shell openssl -- openssl rand -base64 32
</span><span class="">v/hSYQHNCJMYW+U8D3m6ADQ+5382jN9iJ69gfImEISY=
</span></code></pre><p>From the same directory where the <code class="inline">.sops.yaml</code> and your configuration are stored, run the following command to create a <code class="inline">yoursystem.yaml</code> file that will store your encrypted secrets. Unencrypted secrets are supposed to never hit the disk, check out <code class="inline">sops-guix</code> README for more information.</p><pre><code class="makeup bash" translate="no"><span class="">guix shell sops -- sops yoursystem.yaml
</span></code></pre><p>Your default editor will pop up. Replace the SOPS example secrets and add the following content to the file:</p><pre><code class="yaml">postgres:
    bonfire: v/hSYQHNCJMYW+U8D3m6ADQ+5382jN9iJ69gfImEISY=</code></pre><p>Save and close the editor. You can now check inside <code class="inline">yoursystem.yaml</code> and see that the secrets is effectively encrypted.</p><p>When all secrets are in your <code class="inline">yoursystem.yaml</code> file your can add the following to your operating system configuration:</p><pre><code class="scheme">(use-modules (guix gexp)            ;for 'local-file'
             (guix utils)           ;for 'current-source-directory'
             (sops services sops)   ;for 'sops-secrets-service-type'
             (sops secrets)         ;for 'sops-secret' and 'sops-secret-&gt;file-name'
             ...)

(define %project-root
 (current-source-directory))

(define sops.yaml
  (local-file (string-append %project-root &quot;/.sops.yaml&quot;)
              &quot;sops.yaml&quot;))

(define-public yoursystem.yaml
  (local-file (string-append %project-root &quot;/yoursystem.yaml&quot;)
              &quot;yoursystem.yaml&quot;))

(define %secrets-directory
  &quot;/run/secrets&quot;)

(define (secret-&gt;file-name secret)
  (string-append %secrets-directory &quot;/&quot; (sops-secret-&gt;file-name secret)))

;; PostgreSQL

(define-public bonfire-postgres-password-secret
  (sops-secret
   ;; Each element of this list represents
   ;; one key in yoursystem.yaml.  In this case
   ;; it represents:
   ;;
   ;; postgres:
   ;;      bonfire:
   ;;
   (key '(&quot;postgres&quot; &quot;bonfire&quot;))
   (user &quot;oci-container&quot;)
   (group &quot;postgres&quot;)
   (file yoursystem.yaml)
   (permissions #o440)))

;; Meilisearch

(define-public meilisearch-key-secret
  (sops-secret ...))

;; Bonfire

(define-public bonfire-mail-key-secret
  (sops-secret ...))
   
(define-public bonfire-mail-private-key-secret
  (sops-secret ...))

(define-public bonfire-secret-key-base-secret
  (sops-secret ...))

(define-public bonfire-signing-salt-secret
  (sops-secret ...))

(define-public bonfire-encryption-salt-secret
  (sops-secret ...))

(operating-system
  ...

  (services
    (list
      ...
      (service sops-secrets-service-type
               (sops-service-configuration
                (config sops.yaml)
                (secrets
                 (list meilisearch-key-secret
                       bonfire-postgres-password-secret
                       bonfire-mail-key-secret
                       bonfire-mail-private-key-secret
                       bonfire-secret-key-base-secret
                       bonfire-signing-salt-secret
                       bonfire-encryption-salt-secret)))))))</code></pre><h4>4. Postgres</h4><p>Bonfire supports the PostgreSQL database engine and requires the postgis extension. At the time of this writing Guix will by default will install PostgresSQL 16 but you can use another version by <a href="https://guix.gnu.org/manual/devel/en/guix.html#index-postgresql_002dconfiguration">setting the <code class="inline">postgresql</code> field of the <code class="inline">postgresql-configuration</code></a>. This is what it's required to set them up:</p><pre><code class="scheme">(use-modules (gnu packages geo)        ;for postgis
             (gnu services databases)  ;for 'postgresql-service-type'
             ...)


(operating-system
  ...

  (services
    (list
      ...

      ;; Postgres
      (service postgresql-service-type
               (postgresql-configuration
                (extension-packages (list postgis)))))))</code></pre><h4>5. Podman</h4><p>Add the <code class="inline">rootless-podman-service-type</code> and it DBus dependencies to your configuration in the <code class="inline">services</code> field:</p><pre><code class="scheme">(use-modules (gnu services containers) ;for 'rootless-podman-service-type' and 'oci-service-type'
             (gnu services dbus)       ;for 'dbus-service-type'
             (gnu services desktop)    ;for 'elogind-service-type'
             ...)

...

;; The DBus clique
(service elogind-service-type)
(service dbus-root-service-type)

;; Podman
(service rootless-podman-service-type)

;; This service implements OCI provisioned Shepherd services
(service oci-service-type
         (oci-configuration
          (runtime 'podman)))</code></pre><h4>6. Meilisearch and Bonfire</h4><p>To provision a functional Bonfire instance you will need two services, meilisearch and the Bonfire flavour. The <code class="inline">(bonfire services bonfire)</code> module provides a Guix System service able to provision a database and the Bonfire instance. Add the following to your <code class="inline">operating-system</code> configuration, and make sure to change the values based on your actual setup:</p><pre><code class="scheme">(use-modules (bonfire services bonfire) ;for 'oci-bonfire-service-type'
             (oci services meilisearch) ;for 'oci-meilisearch-service-type'
             ...)

...

;; meilisearch
(service oci-meilisearch-service-type
         (oci-meilisearch-configuration
          (network &quot;host&quot;)
          (master-key
           ;; In case you are not using sops-guix for your secrets
           ;; just pass the secret file path as a string.
           ;; The same holds for all other secrets fields.
           (secret-&gt;file-name meilisearch-key-secret))))

;; Bonfire
(service oci-bonfire-service-type
         (oci-bonfire-configuration
          (configuration
           (bonfire-configuration
            ;; Networking
            (hostname &quot;yourdomain.net&quot;)  ;replace with your domain
            (public-port &quot;443&quot;)
            (network &quot;host&quot;)
            ;; Postgres
            (postgres-user &quot;bonfire&quot;)
            (postgres-db &quot;bonfire&quot;)
            ;; Mail
            (mail-domain &quot;yourdomain.net&quot;)
            (mail-from &quot;youremail@address.org&quot;)))
          ;; Shepherd dependencies
          (requirement
           '(user-processes postgresql postgres-roles podman-meilisearch))
          (extra-variables
           `((&quot;MAIL_BACKEND&quot; . &quot;mailjet&quot;) ;; change with your email provider
             (&quot;SERVER_PORT&quot; . &quot;4000&quot;)
             (&quot;SEARCH_MEILI_INSTANCE&quot; . &quot;http://localhost:7700&quot;)))
          ;; Secrets
          (meili-master-key
           (secret-&gt;file-name meilisearch-key-secret))
          (postgres-password
           (secret-&gt;file-name bonfire-postgres-password-secret))
          (mail-key
           (secret-&gt;file-name bonfire-mail-key-secret))
          (mail-private-key
           (secret-&gt;file-name bonfire-mail-private-key-secret))
          (secret-key-base
           (secret-&gt;file-name bonfire-secret-key-base-secret))
          (signing-salt
           (secret-&gt;file-name bonfire-signing-salt-secret))
          (encryption-salt
           (secret-&gt;file-name bonfire-encryption-salt-secret))))</code></pre><h4>7. Reverse proxy</h4><p>The last piece to be able to access your instance from the Internet is a reverse proxy. We'll use NGINX but any one should work. To configure NGINX to forward traffic to Bonfire the following must be added to your configuration:</p><pre><code class="scheme">(use-modules (gnu services web) ;for 'nginx-service-type'
             ...)

...

(service nginx-service-type
         (nginx-configuration
          ;; Wait for Bonfire to start
          (shepherd-requirement '(podman-bonfire))
          (server-blocks
           (list
            (nginx-server-configuration
             (server-name (list &quot;yourdomain.net&quot;))
             (listen '(&quot;443 ssl&quot; &quot;[::]:443 ssl&quot;))
             ;; Replace with your domain
             (ssl-certificate &quot;/etc/certs/yourdomain.net/fullchain.pem&quot;)
             ;; Replace with your domain
             (ssl-certificate-key &quot;/etc/certs/yourdomain.net/privkey.pem&quot;)
             (locations
              (list
               (nginx-location-configuration
                (uri &quot;/&quot;)
                (body (list (string-append &quot;proxy_pass http://localhost:4000;&quot;)
                ;; Taken from https://www.nginx.com/resources/wiki/start/topics/examples/full/
                ;; Those settings are used when proxies are involved
                &quot;proxy_redirect          off;&quot;
                &quot;proxy_set_header        Host $host;&quot;
                &quot;proxy_set_header        X-Real-IP $remote_addr;&quot;
                &quot;proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;&quot;
                &quot;proxy_http_version      1.1;&quot;
                &quot;proxy_cache_bypass      $http_upgrade;&quot;
                &quot;proxy_set_header        Upgrade $http_upgrade;&quot;
                &quot;proxy_set_header        Connection \&quot;upgrade\&quot;;&quot;
                &quot;proxy_set_header        X-Forwarded-Proto $scheme;&quot;
                &quot;proxy_set_header        X-Forwarded-Host  $host;&quot;))))))))))</code></pre><!-- tabs-close --><h2 id="preparing-the-config-in-env" class="section-heading"><a href="#preparing-the-config-in-env" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Preparing the config (in .env)</span></h2><h3 id="config-keys-you-should-pay-special-attention-to" class="section-heading"><a href="#config-keys-you-should-pay-special-attention-to" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Config keys you should pay special attention to:</span></h3><p>The app needs these environment variables to be configured in order to work.</p><ul><li><code class="inline">FLAVOUR</code> should reflect your chosen flavour</li><li><code class="inline">HOSTNAME</code> (your domain name, eg: <code class="inline">bonfire.example.com</code>)</li><li><code class="inline">MAIL_BACKEND</code>, <code class="inline">MAIL_DOMAIN</code> and <code class="inline">MAIL_KEY</code> and related keys to configure transactional email, for example set <code class="inline">MAIL_BACKEND=mailgun</code> and sign up at <a href="https://www.mailgun.com/">Mailgun</a> and then configure the domain name and key (you may also need to set <code class="inline">MAIL_BASE_URI</code> if your domain is not setup in EU, as the default <code class="inline">MAIL_BASE_URI</code> is set as <code class="inline">https://api.eu.mailgun.net/v3</code>). Many other services and approaches (including SMTP) are available, see <a href="Bonfire.Mailer.html">the configuration docs</a>.</li><li><code class="inline">UPLOADS_S3_BUCKET</code> and the related API key and secret for uploads. See <code class="inline">config/runtime.exs</code> for extra variables available to set if you're not using the default service and region (which is <a href="https://www.scaleway.com/en/object-storage/">Scaleway</a> Paris).</li></ul><h3 id="secret-keys-for-which-you-should-put-random-secrets" class="section-heading"><a href="#secret-keys-for-which-you-should-put-random-secrets" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Secret keys for which you should put random secrets.</span></h3><p>You can run <code class="inline">just secrets</code> to generate some for you.</p><ul><li><code class="inline">SECRET_KEY_BASE</code></li><li><code class="inline">SIGNING_SALT</code></li><li><code class="inline">ENCRYPTION_SALT</code></li><li><code class="inline">POSTGRES_PASSWORD</code></li><li><code class="inline">MEILI_MASTER_KEY</code> </li></ul><h3 id="further-information-on-config" class="section-heading"><a href="#further-information-on-config" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Further information on config</span></h3><p>In the <code class="inline">./config/</code> (which is a symbolic link to the config of the flavour you choose to run) directory of the codebase, there are following config files:</p><ul><li><code class="inline">config.exs</code>: default base configuration, which itself loads many other config files, such as one for each installed Bonfire extension.</li><li><code class="inline">prod.exs</code>: default extra configuration for <code class="inline">MIX_ENV=prod</code></li><li><code class="inline">runtime.exs</code>: extra configuration which is loaded at runtime (vs the others which are only loaded once at compile time, i.e. when you build a release)</li><li><code class="inline">bonfire_*.exs</code>: compile-time configs specific to different extensions, which are automatically imported by <code class="inline">config.exs</code></li><li><code class="inline">[extension]/lib/runtime_config.exs</code>: runtime configs specific to different extensions, which are automatically imported by <code class="inline">runtime.exs</code></li></ul><p>You should <em>not</em> have to modify the files above. Instead, overload any settings from the above files using env variables or in <code class="inline">./.env</code>. If any settings in the <code class="inline">.exs</code> config files are not available in env or in the instance settings UI, please open an issue or PR.</p><h2 id="notes-on-running-the-app" class="section-heading"><a href="#notes-on-running-the-app" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Notes on running the app</span></h2><blockquote><p>NOTE: If you are running in a restricted environment such as Amazon RDS, you will need to execute some sql against the database before migrations can run: <code class="inline">CREATE EXTENSION IF NOT EXISTS citext;</code></p></blockquote><p>By default, the backend listens on port 4000 (TCP), so you can access it on <a href="http://localhost:4000/">http://localhost:4000/</a> (if you are on the same machine) but would usually access it at <a href="https://yourdomain.net/">https://yourdomain.net/</a>. In case of an error it will restart automatically.</p><p>You can sign up at <a href="https://yourdomain.net/signup">https://yourdomain.net/signup</a> even though instances are invite-only by default, if you are the first to sign up you'll be able to do so without email confirmation and will automatically be made an instance admin (where you can then generate invite links or enable open sign ups).</p><p>However, for any future sign ups know you will need to having a working <a href="https://docs.bonfirenetworks.org/Bonfire.Mailer.html">email sending service configured</a> so users can receive confirmation links to verify their email addresses.</p><blockquote><p>You can also sign up via CLI (accessed via <code class="inline">just rel-shell</code>) by entering something like this in your app's Elixir console: <code class="inline">Bonfire.Me.make_account_only(&quot;my@email.net&quot;, &quot;my pw&quot;)</code></p></blockquote><h2 id="handy-commands" class="section-heading"><a href="#handy-commands" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Handy commands</span></h2><ul><li><code class="inline">just update</code> to update to the latest release of Bonfire </li><li><code class="inline">just rel-run</code>                        Run the app in Docker, in the foreground</li><li><code class="inline">just rel-run-bg</code>                     Run the app in Docker, and keep running in the background</li><li><code class="inline">just rel-stop</code>                       Stop the running release</li><li><code class="inline">just rel-shell</code>                      Runs a simple shell inside of the container, useful to explore the image </li></ul><p>Once in the shell, you can run <code class="inline">bin/bonfire</code> with the following commands:
Usage: <code class="inline">bonfire COMMAND [ARGS]</code></p><p>The known commands are:</p><ul><li><code class="inline">start</code>          Starts the system</li><li><code class="inline">start_iex</code>      Starts the system with IEx attached</li><li><code class="inline">daemon</code>         Starts the system as a daemon</li><li><code class="inline">daemon_iex</code>     Starts the system as a daemon with IEx attached</li><li><code class="inline">eval &quot;EXPR&quot;</code>    Executes the given expression on a new, non-booted system</li><li><code class="inline">rpc &quot;EXPR&quot;</code>     Executes the given expression remotely on the running system</li><li><code class="inline">remote</code>         Connects to the running system via a IEx remote shell</li><li><code class="inline">restart</code>        Restarts the running system via a remote command</li><li><code class="inline">stop</code>           Stops the running system via a remote command</li><li><code class="inline">pid</code>            Prints the operating system PID of the running system via a remote command</li><li><code class="inline">version</code>        Prints the release name and version to be booted</li></ul><p>There are some useful database-related release tasks under <code class="inline">EctoSparkles.Migrator.</code> that can be run in an <code class="inline">iex</code> console (which you get to with <code class="inline">just rel-shell</code> followed by <code class="inline">bin/bonfire remote</code>, assuming the app is already running):</p><ul><li><code class="inline">migrate</code> runs all up migrations</li><li><code class="inline">rollback(step)</code> roll back to step X</li><li><code class="inline">rollback_to(version)</code> roll back to a specific version</li><li><code class="inline">rollback_all</code> rolls back all migrations back to zero (caution: this means losing all data)</li></ul><p>You can also directly call some functions in the code from the command line, for example:</p><ul><li>to migrate: <code class="inline">docker exec bonfire_web bin/bonfire rpc 'Bonfire.Common.Repo.migrate'</code></li><li>to just yourself an admin: <code class="inline">docker exec bonfire_web bin/bonfire rpc 'Bonfire.Me.Users.make_admin(&quot;my_username&quot;)'</code></li></ul><h2 id="admin-tools" class="section-heading"><a href="#admin-tools" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Admin tools</span></h2><ul><li>LiveDashboard for viewing real-time metrics and logs at <code class="inline">/admin/system/</code></li><li>Oban logs for viewing queued jobs (e.g. for processing federated activities) <code class="inline">/admin/system/oban_queues</code></li><li>LiveAdmin for browsing data in the database at <code class="inline">/admin/system/data</code></li><li>Orion for dynamic distributed performance profiling at <code class="inline">/admin/system/orion</code></li><li>Web Observer as an alternative way to view metrics at <code class="inline">/admin/system/wobserver</code></li></ul><h2 id="troubleshooting" class="section-heading"><a href="#troubleshooting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Troubleshooting</span></h2><p>Some common issues that may arise during deployment and our suggestions for resolving them.</p><h4>WebSocket connections not establishing behind a reverse proxy</h4><p>If you are running Bonfire behind your own reverse proxy (e.g. nginx), you might experience issues with WebSocket connections not establishing. WebSocket connections require specific configuration to work, in nginx the following configuration is necessary for websockets to work:</p><pre><code class="makeup elixir" translate="no"><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">websocket</span><span class="w"> </span><span class="p" data-group-id="7748133108-1">{</span><span class="w">
    </span><span class="n">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="ss">://</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">4000</span><span class="p">;</span><span class="w">
    
    </span><span class="c1"># these configurations are necessary to proxy WebSocket requests</span><span class="w">
    </span><span class="n">proxy_http_version</span><span class="w"> </span><span class="mf">1.1</span><span class="p">;</span><span class="w">
    </span><span class="n">proxy_set_header</span><span class="w"> </span><span class="nc">Upgrade</span><span class="w"> </span><span class="err">$</span><span class="n">http_upgrade</span><span class="p">;</span><span class="w">
    </span><span class="n">proxy_set_header</span><span class="w"> </span><span class="nc">Connection</span><span class="w"> </span><span class="s">&quot;upgrade&quot;</span><span class="p">;</span><span class="w">
</span><span class="p" data-group-id="7748133108-1">}</span></code></pre>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="changelog.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Changelog: releases
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="hacking.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Development setup
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Bonfire.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.4) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
